"use strict";(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[8215],{"./ts/components/emoji/Emoji.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>Emoji,g:()=>EmojiSizes});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/emoji/lib.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),EmojiSizes=[16,18,20,24,28,32,48,64,66],Emoji=react__WEBPACK_IMPORTED_MODULE_0__.memo(react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function(_ref,ref){var className=_ref.className,emoji=_ref.emoji,shortName=_ref.shortName,_ref$size=_ref.size,size=void 0===_ref$size?28:_ref$size,skinTone=_ref.skinTone,_ref$style=_ref.style,style=void 0===_ref$style?{}:_ref$style,title=_ref.title,image="";return shortName?image=(0,_lib__WEBPACK_IMPORTED_MODULE_2__.al)(shortName,skinTone):emoji&&(image=(0,_lib__WEBPACK_IMPORTED_MODULE_2__.rl)(emoji)||""),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{ref,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-emoji",`module-emoji--${size}px`,className),style,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("img",{className:`module-emoji__image--${size}px`,src:image,"aria-label":null!=title?title:emoji,title:null!=title?title:emoji})})})))},"./ts/components/emoji/EmojiButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>EmojiButton,h:()=>EmojiButtonVariant});var EmojiButtonVariant,lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),lodash_get__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/get.js"),lodash_get__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),react_popper__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-popper/lib/esm/Manager.js"),react_popper__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react-popper/lib/esm/Reference.js"),react_popper__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/react-popper/lib/esm/Popper.js"),_Emoji__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/emoji/Emoji.tsx"),_EmojiPicker__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/components/emoji/EmojiPicker.tsx"),_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/hooks/useRefMerger.ts"),_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/handleOutsideClick.ts"),_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/services/keyboardLayout.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(EmojiButtonVariant){EmojiButtonVariant[EmojiButtonVariant.Normal=0]="Normal",EmojiButtonVariant[EmojiButtonVariant.ProfileEditor=1]="ProfileEditor"}(EmojiButtonVariant||(EmojiButtonVariant={}));var EmojiButton=react__WEBPACK_IMPORTED_MODULE_2__.memo((function EmojiButtonInner(_ref){var className=_ref.className,closeOnPick=_ref.closeOnPick,emoji=_ref.emoji,emojiButtonApi=_ref.emojiButtonApi,i18n=_ref.i18n,doSend=_ref.doSend,onClose=_ref.onClose,onPickEmoji=_ref.onPickEmoji,skinTone=_ref.skinTone,onSetSkinTone=_ref.onSetSkinTone,recentEmojis=_ref.recentEmojis,_ref$variant=_ref.variant,variant=void 0===_ref$variant?EmojiButtonVariant.Normal:_ref$variant,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_2__.useState(!1),2),open=_React$useState2[0],setOpen=_React$useState2[1],buttonRef=react__WEBPACK_IMPORTED_MODULE_2__.useRef(null),popperRef=react__WEBPACK_IMPORTED_MODULE_2__.useRef(null),refMerger=(0,_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_6__.T)(),handleClickButton=react__WEBPACK_IMPORTED_MODULE_2__.useCallback((function(){setOpen(!open)}),[open,setOpen]),handleClose=react__WEBPACK_IMPORTED_MODULE_2__.useCallback((function(){setOpen(!1),onClose&&onClose()}),[setOpen,onClose]),api=react__WEBPACK_IMPORTED_MODULE_2__.useMemo((function(){return{close:function(){return setOpen(!1)}}}),[setOpen]);return emojiButtonApi&&(emojiButtonApi.current=api),react__WEBPACK_IMPORTED_MODULE_2__.useEffect((function(){return open?(0,_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_7__.p)((function(){return handleClose(),!0}),{containerElements:[popperRef,buttonRef],name:"EmojiButton"}):lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}),[open,handleClose]),react__WEBPACK_IMPORTED_MODULE_2__.useEffect((function(){var handleKeydown=function(event){var ctrlKey=event.ctrlKey,metaKey=event.metaKey,shiftKey=event.shiftKey,commandKey="darwin"===lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(window,"platform")&&metaKey,controlKey="darwin"!==lodash_get__WEBPACK_IMPORTED_MODULE_1___default()(window,"platform")&&ctrlKey,commandOrCtrl=commandKey||controlKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_8__.P(event),panels=document.querySelectorAll(".conversation .panel");panels&&panels.length>1||commandOrCtrl&&shiftKey&&("j"===key||"J"===key)&&(event.stopPropagation(),event.preventDefault(),setOpen(!open))};return document.addEventListener("keydown",handleKeydown),function(){document.removeEventListener("keydown",handleKeydown)}}),[open,setOpen]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(react_popper__WEBPACK_IMPORTED_MODULE_10__.dK,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_popper__WEBPACK_IMPORTED_MODULE_11__.s,{children:function(_ref2){var ref=_ref2.ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("button",{type:"button",ref:refMerger(buttonRef,ref),onClick:handleClickButton,className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(className,{"module-emoji-button__button":!0,"module-emoji-button__button--active":open,"module-emoji-button__button--has-emoji":Boolean(emoji),"module-emoji-button__button--profile-editor":variant===EmojiButtonVariant.ProfileEditor}),"aria-label":i18n("icu:EmojiButton__label"),children:emoji&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_4__.d,{emoji,size:24})})}}),open?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)("div",{ref:popperRef,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(react_popper__WEBPACK_IMPORTED_MODULE_12__.r,{placement:"top-start",strategy:"fixed",children:function(_ref3){var ref=_ref3.ref,style=_ref3.style;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_EmojiPicker__WEBPACK_IMPORTED_MODULE_5__.h,{ref,i18n,style,onPickEmoji:function(ev){onPickEmoji(ev),closeOnPick&&handleClose()},doSend,onClose:handleClose,skinTone,onSetSkinTone,recentEmojis})}})}):null]})}))},"./ts/components/emoji/EmojiPicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>EmojiPicker});var lodash_zipObject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/zipObject.js"),lodash_zipObject__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_zipObject__WEBPACK_IMPORTED_MODULE_0__),lodash_last__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/last.js"),lodash_last__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_1__),lodash_initial__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/initial.js"),lodash_initial__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_initial__WEBPACK_IMPORTED_MODULE_2__),lodash_flatMap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/flatMap.js"),lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_flatMap__WEBPACK_IMPORTED_MODULE_3__),lodash_findLast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lodash/findLast.js"),lodash_findLast__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_findLast__WEBPACK_IMPORTED_MODULE_4__),lodash_debounce__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lodash/debounce.js"),lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_5__),lodash_clamp__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lodash/clamp.js"),lodash_clamp__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_6__),lodash_chunk__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lodash/chunk.js"),lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_chunk__WEBPACK_IMPORTED_MODULE_7__),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_9__),react_virtualized__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-virtualized/dist/es/index.js"),focus_trap_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/focus-trap-react/dist/focus-trap-react.js"),focus_trap_react__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(focus_trap_react__WEBPACK_IMPORTED_MODULE_11__),_Emoji__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ts/components/emoji/Emoji.tsx"),_lib__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./ts/components/emoji/lib.ts"),_util_grapheme__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./ts/util/grapheme.ts"),_util_missingCaseError__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./ts/util/missingCaseError.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function focusOnRender(el){el&&el.focus()}var categories=["recents","emoji","animal","food","activity","travel","object","symbol","flag"],EmojiPicker=react__WEBPACK_IMPORTED_MODULE_8__.memo(react__WEBPACK_IMPORTED_MODULE_8__.forwardRef((function(_ref,ref){var i18n=_ref.i18n,doSend=_ref.doSend,onPickEmoji=_ref.onPickEmoji,_ref$skinTone=_ref.skinTone,skinTone=void 0===_ref$skinTone?0:_ref$skinTone,onSetSkinTone=_ref.onSetSkinTone,_ref$recentEmojis=_ref.recentEmojis,recentEmojis=void 0===_ref$recentEmojis?[]:_ref$recentEmojis,style=_ref.style,onClickSettings=_ref.onClickSettings,onClose=_ref.onClose,firstRecent=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(recentEmojis),1)[0],_React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(categories[0]),2),selectedCategory=_React$useState4[0],setSelectedCategory=_React$useState4[1],_React$useState6=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(!1),2),searchMode=_React$useState6[0],setSearchMode=_React$useState6[1],_React$useState8=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(""),2),searchText=_React$useState8[0],setSearchText=_React$useState8[1],_React$useState10=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(0),2),scrollToRow=_React$useState10[0],setScrollToRow=_React$useState10[1],_React$useState12=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(skinTone),2),selectedTone=_React$useState12[0],setSelectedTone=_React$useState12[1],handleToggleSearch=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.stopPropagation(),e.preventDefault(),setSearchText(""),setSelectedCategory(categories[0]),setSearchMode((function(m){return!m}))}),[setSearchText,setSearchMode]),debounceSearchChange=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()((function(query){setScrollToRow(0),setSearchText(query)}),200)}),[setSearchText,setScrollToRow]),handleSearchChange=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){debounceSearchChange(e.currentTarget.value)}),[debounceSearchChange]),handlePickTone=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.preventDefault(),e.stopPropagation();var _e$currentTarget$data=e.currentTarget.dataset.tone,parsedTone=parseInt(void 0===_e$currentTarget$data?"0":_e$currentTarget$data,10);setSelectedTone(parsedTone),onSetSkinTone&&onSetSkinTone(parsedTone)}),[onSetSkinTone]),handlePickEmoji=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){var shortName=e.currentTarget.dataset.shortName;"key"in e?"Enter"===e.key&&(doSend?(doSend(),e.stopPropagation(),e.preventDefault()):shortName&&(onPickEmoji({skinTone:selectedTone,shortName}),e.stopPropagation(),e.preventDefault())):shortName&&(e.stopPropagation(),e.preventDefault(),onPickEmoji({skinTone:selectedTone,shortName}))}),[doSend,onPickEmoji,selectedTone]);react__WEBPACK_IMPORTED_MODULE_8__.useEffect((function(){var handler=function(event){"Escape"===event.key?searchMode?(event.preventDefault(),event.stopPropagation(),setScrollToRow(0),setSearchText(""),setSearchMode(!1)):onClose&&(event.preventDefault(),event.stopPropagation(),onClose()):searchMode||event.ctrlKey||event.metaKey||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Shift","Tab"," "].includes(event.key)||((0,_util_grapheme__WEBPACK_IMPORTED_MODULE_14__.i3)(event.key)?(setSelectedCategory(categories[0]),setSearchMode(!0)):(null==onClose||onClose(),event.preventDefault(),event.stopPropagation()))};return document.addEventListener("keydown",handler),function(){document.removeEventListener("keydown",handler)}}),[onClose,searchMode,setSearchMode]);var renderableCategories=categories.slice(1),emojiGrid=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){if(searchText)return lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()((0,_lib__WEBPACK_IMPORTED_MODULE_13__.yC)(searchText).map((function(e){return e.short_name})),8);var chunks=lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default()(renderableCategories,(function(cat){return lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()(_lib__WEBPACK_IMPORTED_MODULE_13__.lu[cat].map((function(e){return e.short_name})),8)}));return[].concat(_toConsumableArray(lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()(firstRecent,8)),_toConsumableArray(chunks))}),[firstRecent,renderableCategories,searchText]),rowCount=emojiGrid.length,catRowEnds=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){var rowEnds=[Math.ceil(firstRecent.length/8)-1];return renderableCategories.forEach((function(cat){rowEnds.push(Math.ceil(_lib__WEBPACK_IMPORTED_MODULE_13__.lu[cat].length/8)+lodash_last__WEBPACK_IMPORTED_MODULE_1___default()(rowEnds))})),rowEnds}),[firstRecent.length,renderableCategories]),catToRowOffsets=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){var offsets=lodash_initial__WEBPACK_IMPORTED_MODULE_2___default()(catRowEnds).map((function(i){return i+1}));return lodash_zipObject__WEBPACK_IMPORTED_MODULE_0___default()(categories,[0].concat(_toConsumableArray(offsets)))}),[catRowEnds]),catOffsetEntries=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return Object.entries(catToRowOffsets)}),[catToRowOffsets]),handleSelectCategory=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.stopPropagation(),e.preventDefault();var category=e.currentTarget.dataset.category;category&&(setSelectedCategory(category),setScrollToRow(catToRowOffsets[category]))}),[catToRowOffsets,setSelectedCategory,setScrollToRow]),cellRenderer=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(_ref2){var key=_ref2.key,cellStyle=_ref2.style,rowIndex=_ref2.rowIndex,columnIndex=_ref2.columnIndex,shortName=emojiGrid[rowIndex][columnIndex];return shortName?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__body__emoji-cell",style:cellStyle,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button",className:"module-emoji-picker__button",onClick:handlePickEmoji,onKeyDown:handlePickEmoji,"data-short-name":shortName,title:shortName,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName,skinTone:selectedTone})})},key):null}),[emojiGrid,handlePickEmoji,selectedTone]),getRowHeight=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(_ref3){var index=_ref3.index;return searchText?34:catRowEnds.includes(index)&&index!==lodash_last__WEBPACK_IMPORTED_MODULE_1___default()(catRowEnds)?44:34}),[catRowEnds,searchText]),onSectionRendered=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()((function(_ref4){var rowStartIndex=_ref4.rowStartIndex,_ref5=lodash_findLast__WEBPACK_IMPORTED_MODULE_4___default()(catOffsetEntries,(function(_ref7){var row=_slicedToArray(_ref7,2)[1];return rowStartIndex>=row}))||categories,cat=_slicedToArray(_ref5,1)[0];setSelectedCategory(cat)}),10)}),[catOffsetEntries]);function getCategoryButtonLabel(category){switch(category){case"recents":return i18n("icu:EmojiPicker__button--recents");case"emoji":return i18n("icu:EmojiPicker__button--emoji");case"animal":return i18n("icu:EmojiPicker__button--animal");case"food":return i18n("icu:EmojiPicker__button--food");case"activity":return i18n("icu:EmojiPicker__button--activity");case"travel":return i18n("icu:EmojiPicker__button--travel");case"object":return i18n("icu:EmojiPicker__button--object");case"symbol":return i18n("icu:EmojiPicker__button--symbol");case"flag":return i18n("icu:EmojiPicker__button--flag");default:throw(0,_util_missingCaseError__WEBPACK_IMPORTED_MODULE_16__.b)(category)}}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(focus_trap_react__WEBPACK_IMPORTED_MODULE_11___default(),{focusTrapOptions:{allowOutsideClick:!0},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"module-emoji-picker",ref,style,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("header",{className:"module-emoji-picker__header",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button",onClick:handleToggleSearch,onKeyDown:function(event){"Enter"!==event.key&&"Select"!==event.key||handleToggleSearch(event)},title:i18n(searchMode?"icu:EmojiPicker--search-close":"icu:EmojiPicker--search-placeholder"),className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--icon",searchMode?"module-emoji-picker__button--icon--close":"module-emoji-picker__button--icon--search"),"aria-label":i18n("icu:EmojiPicker--search-placeholder")}),searchMode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__header__search-field",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("input",{ref:focusOnRender,className:"module-emoji-picker__header__search-field__input",placeholder:i18n("icu:EmojiPicker--search-placeholder"),onChange:handleSearchChange,dir:"auto"})}):categories.map((function(cat){return"recents"===cat&&0===firstRecent.length?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{"aria-pressed":selectedCategory===cat,type:"button","data-category":cat,title:cat,onClick:handleSelectCategory,onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||handleSelectCategory(event)},className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--icon",`module-emoji-picker__button--icon--${cat}`,selectedCategory===cat?"module-emoji-picker__button--selected":null),"aria-label":getCategoryButtonLabel(cat)},cat)}))]}),rowCount>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_virtualized__WEBPACK_IMPORTED_MODULE_10__.qj,{children:function(_ref9){var width=_ref9.width,height=_ref9.height;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_virtualized__WEBPACK_IMPORTED_MODULE_10__.rj,{className:"module-emoji-picker__body",width,height,columnCount:8,columnWidth:38,rowHeight:getRowHeight,rowCount,cellRenderer,scrollToRow:lodash_clamp__WEBPACK_IMPORTED_MODULE_6___default()(scrollToRow,0,rowCount-1),scrollToAlignment:"start",onSectionRendered},searchText)}})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__body","module-emoji-picker__body--empty"),children:[i18n("icu:EmojiPicker--empty"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName:"slightly_frowning_face",size:16,style:{marginInlineStart:"4px"}})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("footer",{className:"module-emoji-picker__footer",children:[Boolean(onClickSettings)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{"aria-label":i18n("icu:CustomizingPreferredReactions__title"),className:"module-emoji-picker__button module-emoji-picker__button--footer module-emoji-picker__button--settings",onClick:function(event){onClickSettings&&(event.preventDefault(),event.stopPropagation(),onClickSettings())},onKeyDown:function(event){!onClickSettings||"Enter"!==event.key&&"Space"!==event.key||(event.preventDefault(),event.stopPropagation(),onClickSettings())},title:i18n("icu:CustomizingPreferredReactions__title"),type:"button"}),onSetSkinTone?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__footer__skin-tones",children:[0,1,2,3,4,5].map((function(tone){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{"aria-pressed":selectedTone===tone,type:"button","data-tone":tone,onClick:handlePickTone,onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||handlePickTone(event)},title:i18n("icu:EmojiPicker--skin-tone",{tone:`${tone}`}),className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--footer",selectedTone===tone?"module-emoji-picker__button--selected":null),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName:"hand",skinTone:tone,size:20})},tone)}))}):null,Boolean(onClickSettings)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__footer__settings-spacer"})]})]})})})))},"./ts/services/keyboardLayout.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>lookup});var layoutMap,_util_assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/assert.ts");function lookup(_ref){var _layoutMap$get,code=_ref.code,key=_ref.key;return(0,_util_assert__WEBPACK_IMPORTED_MODULE_0__.Yj)(void 0!==layoutMap,"keyboardLayout not initialized"),null!==(_layoutMap$get=layoutMap.get(code))&&void 0!==_layoutMap$get?_layoutMap$get:key}}}]);