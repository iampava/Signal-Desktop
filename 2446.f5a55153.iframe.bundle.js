"use strict";(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[2446],{"./ts/components/ContextMenu.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>ContextMenu});var closeCurrentOpenContextMenu,lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-dom/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),react_popper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-popper/lib/esm/usePopper.js"),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/util/getClassNamesFor.ts"),_util_theme__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/util/theme.ts"),_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/util/handleOutsideClick.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function generateVirtualElement(x,y){return{getBoundingClientRect:function(){return new DOMRect(x,y)}}}function ContextMenu(_ref){var ariaLabel=_ref.ariaLabel,children=_ref.children,i18n=_ref.i18n,menuOptions=_ref.menuOptions,moduleClassName=_ref.moduleClassName,onClick=_ref.onClick,onMenuShowingChanged=_ref.onMenuShowingChanged,popperOptions=_ref.popperOptions,portalToRoot=_ref.portalToRoot,theme=_ref.theme,title=_ref.title,value=_ref.value,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),isMenuShowing=_useState2[0],setIsMenuShowing=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),2),focusedIndex=_useState4[0],setFocusedIndex=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),2),popperElement=_useState6[0],setPopperElement=_useState6[1],virtualElement=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(generateVirtualElement(0,0)),_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),2),referenceElement=_useState8[0],setReferenceElement=_useState8[1],_usePopper=(0,react_popper__WEBPACK_IMPORTED_MODULE_8__.D)(virtualElement.current,popperElement,Object.assign({placement:"top-start",strategy:"fixed"},popperOptions)),styles=_usePopper.styles,attributes=_usePopper.attributes;(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){onMenuShowingChanged&&onMenuShowingChanged(isMenuShowing)}),[isMenuShowing,onMenuShowingChanged]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){return isMenuShowing?(0,_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_6__.p)((function(){return setIsMenuShowing(!1),closeCurrentOpenContextMenu=void 0,!0}),{containerElements:[referenceElement,popperElement],name:"ContextMenu"}):lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}),[isMenuShowing,referenceElement,popperElement]);var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_1__.useState(null),2),portalNode=_React$useState2[0],setPortalNode=_React$useState2[1];(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){if(!portalToRoot||!isMenuShowing)return lodash_noop__WEBPACK_IMPORTED_MODULE_0___default();var div=document.createElement("div");return document.body.appendChild(div),setPortalNode(div),function(){document.body.removeChild(div)}}),[portalToRoot,isMenuShowing]);var _step,handleKeyDown=function(ev){if(("Enter"===ev.key||"Space"===ev.key)&&!isMenuShowing){var _closeCurrentOpenCont;if(null===(_closeCurrentOpenCont=closeCurrentOpenContextMenu)||void 0===_closeCurrentOpenCont||_closeCurrentOpenCont(),closeCurrentOpenContextMenu=function(){return setIsMenuShowing(!1)},referenceElement){var box=referenceElement.getBoundingClientRect();virtualElement.current=generateVirtualElement(box.x,box.y)}setIsMenuShowing(!0),setFocusedIndex(0),ev.preventDefault(),ev.stopPropagation()}if(isMenuShowing){if("ArrowDown"===ev.key||"Tab"===ev.key){var currFocusedIndex=focusedIndex||0,nextFocusedIndex=currFocusedIndex>=menuOptions.length-1?0:currFocusedIndex+1;setFocusedIndex(nextFocusedIndex),ev.stopPropagation(),ev.preventDefault()}if("ArrowUp"===ev.key){var _currFocusedIndex=focusedIndex||0,_nextFocusedIndex=0===_currFocusedIndex?menuOptions.length-1:_currFocusedIndex-1;setFocusedIndex(_nextFocusedIndex),ev.stopPropagation(),ev.preventDefault()}if("Enter"===ev.key){if(void 0!==focusedIndex){var focusedOption=menuOptions[focusedIndex];focusedOption.onClick(focusedOption.value)}setIsMenuShowing(!1),closeCurrentOpenContextMenu=void 0,ev.stopPropagation(),ev.preventDefault()}"Escape"===ev.key&&(setIsMenuShowing(!1),closeCurrentOpenContextMenu=void 0,ev.stopPropagation(),ev.preventDefault())}},handleClick=function(ev){var _closeCurrentOpenCont2;null===(_closeCurrentOpenCont2=closeCurrentOpenContextMenu)||void 0===_closeCurrentOpenCont2||_closeCurrentOpenCont2(),closeCurrentOpenContextMenu=function(){return setIsMenuShowing(!1)},virtualElement.current=generateVirtualElement(ev.clientX,ev.clientY),setIsMenuShowing(!0),ev.stopPropagation(),ev.preventDefault()},getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_4__.h)("ContextMenu",moduleClassName),optionElements=new Array,_loop=function(index,option){var previous=menuOptions[index-1];previous&&previous.group!==option.group&&optionElements.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:getClassName("__divider")},`${option.label}-divider`));optionElements.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("button",{"aria-label":option.label,className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(getClassName("__option"),focusedIndex===index?getClassName("__option--focused"):void 0),type:"button",onClick:function(ev){ev.preventDefault(),ev.stopPropagation(),option.onClick(option.value),setIsMenuShowing(!1),closeCurrentOpenContextMenu=void 0},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:getClassName("__option--container"),children:[option.icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(getClassName("__option--icon"),option.icon)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:getClassName("__option--title"),children:option.label}),option.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:getClassName("__option--description"),children:option.description})]})]}),void 0!==value&&void 0!==option.value&&value===option.value?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:getClassName("__option--selected")}):null]},option.label))},_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(menuOptions.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref3=_slicedToArray(_step.value,2);_loop(_ref3[0],_ref3[1])}}catch(err){_iterator.e(err)}finally{_iterator.f()}var menuNode=isMenuShowing?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:theme?(0,_util_theme__WEBPACK_IMPORTED_MODULE_5__.j)(theme):void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",Object.assign({className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(getClassName("__popper"),1===menuOptions.length?getClassName("__popper--single-item"):void 0),ref:setPopperElement,style:styles.popper},attributes.popper,{children:[title&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{className:getClassName("__title"),children:title}),optionElements]}))}):void 0;return"function"==typeof children?children({openMenu:onClick||handleClick,onKeyDown:handleKeyDown,isMenuShowing,ref:setReferenceElement,menuNode}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(getClassName("__container"),theme?(0,_util_theme__WEBPACK_IMPORTED_MODULE_5__.j)(theme):void 0),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("button",{"aria-label":ariaLabel||i18n("icu:ContextMenu--button"),className:classnames__WEBPACK_IMPORTED_MODULE_3___default()(getClassName("__button"),isMenuShowing?getClassName("__button--active"):void 0),onClick:onClick||handleClick,onContextMenu:handleClick,onKeyDown:handleKeyDown,ref:setReferenceElement,type:"button",children}),portalNode?(0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)(menuNode,portalNode):menuNode]})}},"./ts/components/ReactionPickerPicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JR:()=>ReactionPickerPickerMoreButton,S3:()=>ReactionPickerPickerStyle,Ud:()=>ReactionPickerPickerEmojiButton,V$:()=>ReactionPickerPicker});var ReactionPickerPickerStyle,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_emoji_Emoji__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/emoji/Emoji.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");!function(ReactionPickerPickerStyle){ReactionPickerPickerStyle[ReactionPickerPickerStyle.Picker=0]="Picker",ReactionPickerPickerStyle[ReactionPickerPickerStyle.Menu=1]="Menu"}(ReactionPickerPickerStyle||(ReactionPickerPickerStyle={}));var ReactionPickerPickerEmojiButton=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function ReactionPickerPickerEmojiButtonInner(_ref,ref){var emoji=_ref.emoji,onClick=_ref.onClick,isSelected=_ref.isSelected,title=_ref.title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{type:"button",ref,tabIndex:0,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-ReactionPickerPicker__button","module-ReactionPickerPicker__button--emoji",isSelected&&"module-ReactionPickerPicker__button--selected"),onClick:function(event){event.stopPropagation(),onClick()},onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||(event.stopPropagation(),event.preventDefault(),onClick())},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_emoji_Emoji__WEBPACK_IMPORTED_MODULE_2__.d,{size:48,emoji,title})})}));function ReactionPickerPickerMoreButton(_ref2){var i18n=_ref2.i18n,onClick=_ref2.onClick;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("button",{"aria-label":i18n("icu:Reactions--more"),className:"module-ReactionPickerPicker__button module-ReactionPickerPicker__button--more",onClick:function(event){event.stopPropagation(),onClick()},onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||(event.stopPropagation(),event.preventDefault(),onClick())},tabIndex:0,title:i18n("icu:Reactions--more"),type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"module-ReactionPickerPicker__button--more__dot"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"module-ReactionPickerPicker__button--more__dot"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:"module-ReactionPickerPicker__button--more__dot"})]})}ReactionPickerPickerMoreButton.displayName="ReactionPickerPickerMoreButton";var ReactionPickerPicker=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function ReactionPickerPickerInner(_ref3,ref){var children=_ref3.children,isSomethingSelected=_ref3.isSomethingSelected,pickerStyle=_ref3.pickerStyle,style=_ref3.style;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-ReactionPickerPicker",isSomethingSelected&&"module-ReactionPickerPicker--something-selected",{"module-ReactionPickerPicker--picker-style":pickerStyle===ReactionPickerPickerStyle.Picker,"module-ReactionPickerPicker--menu-style":pickerStyle===ReactionPickerPickerStyle.Menu}),ref,style,children})}))},"./ts/components/StoryViewsNRepliesModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>StoryViewsNRepliesModal});var lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_types_Stories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/types/Stories.ts"),_Avatar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/Avatar.tsx"),_CompositionInput__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/components/CompositionInput.tsx"),_conversation_ContactName__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_emoji_EmojiButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/components/emoji/EmojiButton.tsx"),_conversation_Emojify__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),_conversation_Message__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/components/conversation/Message.tsx"),_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ts/components/conversation/MessageTimestamp.tsx"),_Modal__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./ts/components/Modal.tsx"),_conversation_ReactionPicker__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ts/components/conversation/ReactionPicker.tsx"),_Tabs__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./ts/components/Tabs.tsx"),_util_theme__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./ts/util/theme.ts"),_types_Util__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./ts/types/Util.ts"),_util__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./ts/components/_util.ts"),_types_Colors__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("./ts/types/Colors.ts"),_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("./ts/util/shouldNeverBeCalled.ts"),_ContextMenu__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("./ts/components/ContextMenu.tsx"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var StoryViewsNRepliesTab,MESSAGE_DEFAULT_PROPS={canDeleteForEveryone:!1,checkForAccount:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,clearTargetedMessage:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,containerWidthBreakpoint:_util__WEBPACK_IMPORTED_MODULE_16__.Up.Medium,doubleCheckMissingQuoteReference:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,isBlocked:!1,isMessageRequestAccepted:!0,isSelected:!1,isSelectMode:!1,onToggleSelect:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,onReplyToMessage:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,kickOffAttachmentDownload:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,markAttachmentAsCorrupted:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,messageExpanded:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,openGiftBadge:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,openLink:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,previews:[],retryMessageSend:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,pushPanelForConversation:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,renderAudioAttachment:function(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{})},saveAttachment:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,scrollToQuotedMessage:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,showConversation:lodash_noop__WEBPACK_IMPORTED_MODULE_0___default(),showExpiredIncomingTapToViewToast:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,showExpiredOutgoingTapToViewToast:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,showLightbox:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,showLightboxForViewOnceMedia:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,startConversation:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U,theme:_types_Util__WEBPACK_IMPORTED_MODULE_15__.f8.dark,viewStory:_util_shouldNeverBeCalled__WEBPACK_IMPORTED_MODULE_18__.U};function StoryViewsNRepliesModal(_ref){var composerElement,repliesElement,viewsElement,authorTitle=_ref.authorTitle,canReply=_ref.canReply,deleteGroupStoryReply=_ref.deleteGroupStoryReply,deleteGroupStoryReplyForEveryone=_ref.deleteGroupStoryReplyForEveryone,getPreferredBadge=_ref.getPreferredBadge,group=_ref.group,hasViewReceiptSetting=_ref.hasViewReceiptSetting,hasViewsCapability=_ref.hasViewsCapability,i18n=_ref.i18n,platform=_ref.platform,isFormattingEnabled=_ref.isFormattingEnabled,isFormattingSpoilersEnabled=_ref.isFormattingSpoilersEnabled,isInternalUser=_ref.isInternalUser,onChangeViewTarget=_ref.onChangeViewTarget,onClose=_ref.onClose,onReact=_ref.onReact,onReply=_ref.onReply,onSetSkinTone=_ref.onSetSkinTone,onTextTooLong=_ref.onTextTooLong,onUseEmoji=_ref.onUseEmoji,preferredReactionEmoji=_ref.preferredReactionEmoji,recentEmojis=_ref.recentEmojis,renderEmojiPicker=_ref.renderEmojiPicker,replies=_ref.replies,showContactModal=_ref.showContactModal,skinTone=_ref.skinTone,sortedGroupMembers=_ref.sortedGroupMembers,viewTarget=_ref.viewTarget,views=_ref.views,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),2),deleteReplyId=_useState2[0],setDeleteReplyId=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),2),deleteForEveryoneReplyId=_useState4[0],setDeleteForEveryoneReplyId=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),2),revealedSpoilersById=_useState6[0],setRevealedSpoilersById=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({}),2),displayLimitById=_useState8[0],setDisplayLimitById=_useState8[1],containerElementRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),inputApiRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(),shouldScrollToBottomRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(!0),bottomRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),_useState10=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),2),messageBodyText=_useState10[0],setMessageBodyText=_useState10[1],currentTab=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){return viewTarget===_types_Stories__WEBPACK_IMPORTED_MODULE_3__.Zk.Replies?StoryViewsNRepliesTab.Replies:StoryViewsNRepliesTab.Views}),[viewTarget]),focusComposer=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){inputApiRef.current&&inputApiRef.current.focus()}),[inputApiRef]),insertEmoji=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(e){inputApiRef.current&&(inputApiRef.current.insertEmoji(e),onUseEmoji(e))}),[inputApiRef,onUseEmoji]);function shouldCollapse(reply,otherReply){return reply.conversationId===(null==otherReply?void 0:otherReply.conversationId)&&(!(null!=otherReply&&otherReply.reactionEmoji)||Boolean(otherReply.deletedForEveryone))}(0,react__WEBPACK_IMPORTED_MODULE_1__.useLayoutEffect)((function(){var _bottomRef$current;currentTab===StoryViewsNRepliesTab.Replies&&replies.length&&shouldScrollToBottomRef.current&&(null===(_bottomRef$current=bottomRef.current)||void 0===_bottomRef$current||_bottomRef$current.scrollIntoView({behavior:"smooth"}),shouldScrollToBottomRef.current=!1)}),[currentTab,replies.length]),group&&group.left?composerElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__not-a-member",children:i18n("icu:StoryViewsNRepliesModal__not-a-member")}):canReply&&(composerElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_ReactionPicker__WEBPACK_IMPORTED_MODULE_12__.$,{i18n,onPick:function(emoji){group||onClose(),onReact(emoji)},onSetSkinTone,preferredReactionEmoji,renderEmojiPicker}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__compose-container",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__composer",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_CompositionInput__WEBPACK_IMPORTED_MODULE_5__.D,{draftText:messageBodyText,getPreferredBadge,i18n,inputApi:inputApiRef,isFormattingEnabled,isFormattingSpoilersEnabled,moduleClassName:"StoryViewsNRepliesModal__input",onCloseLinkPreview:lodash_noop__WEBPACK_IMPORTED_MODULE_0___default(),onEditorStateChange:function(_ref2){var messageText=_ref2.messageText;setMessageBodyText(messageText)},onPickEmoji:onUseEmoji,onSubmit:function(){var _inputApiRef$current;null===(_inputApiRef$current=inputApiRef.current)||void 0===_inputApiRef$current||_inputApiRef$current.reset(),shouldScrollToBottomRef.current=!0,onReply.apply(void 0,arguments)},onTextTooLong,placeholder:group?i18n("icu:StoryViewer__reply-group"):i18n("icu:StoryViewer__reply-placeholder",{firstName:authorTitle}),sendCounter:0,sortedGroupMembers,theme:_types_Util__WEBPACK_IMPORTED_MODULE_15__.f8.dark,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_emoji_EmojiButton__WEBPACK_IMPORTED_MODULE_7__.K,{className:"StoryViewsNRepliesModal__emoji-button",i18n,onPickEmoji:insertEmoji,onClose:focusComposer,recentEmojis,skinTone,onSetSkinTone})})})})]})),replies.length?repliesElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"StoryViewsNRepliesModal__replies",ref:containerElementRef,children:[replies.map((function(reply,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(ReplyOrReactionMessage,{containerElementRef,deleteGroupStoryReply:function(){return setDeleteReplyId(reply.id)},deleteGroupStoryReplyForEveryone:function(){return setDeleteForEveryoneReplyId(reply.id)},displayLimit:displayLimitById[reply.id],getPreferredBadge,i18n,platform,id:reply.id,isInternalUser,isSpoilerExpanded:revealedSpoilersById[reply.id]||!1,messageExpanded:function(messageId,displayLimit){var update=Object.assign({},displayLimitById,{[messageId]:displayLimit});setDisplayLimitById(update)},reply,shouldCollapseAbove:shouldCollapse(reply,replies[index-1]),shouldCollapseBelow:shouldCollapse(reply,replies[index+1]),showContactModal,showSpoiler:function(messageId){var update=Object.assign({},revealedSpoilersById,{[messageId]:!0});setRevealedSpoilersById(update)}},reply.id)})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{ref:bottomRef})]}):group&&(repliesElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__replies--none",children:i18n("icu:StoryViewsNRepliesModal__no-replies")})),hasViewsCapability&&!hasViewReceiptSetting?viewsElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__read-receipts-off",children:i18n("icu:StoryViewsNRepliesModal__read-receipts-off")}):views.length?viewsElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__views",children:views.map((function(view){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"StoryViewsNRepliesModal__view",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Avatar__WEBPACK_IMPORTED_MODULE_4__.qE,{acceptedMessageRequest:view.recipient.acceptedMessageRequest,avatarPath:view.recipient.avatarPath,badge:void 0,color:(0,_types_Colors__WEBPACK_IMPORTED_MODULE_17__.hx)(view.recipient.color),conversationType:"direct",i18n,isMe:Boolean(view.recipient.isMe),profileName:view.recipient.profileName,sharedGroupNames:view.recipient.sharedGroupNames||[],size:_Avatar__WEBPACK_IMPORTED_MODULE_4__.DZ.TWENTY_EIGHT,title:view.recipient.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("span",{className:"StoryViewsNRepliesModal__view--name",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_ContactName__WEBPACK_IMPORTED_MODULE_6__.K,{title:view.recipient.title})})]}),view.updatedAt&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_10__.i,{i18n,module:"StoryViewsNRepliesModal__view--timestamp",timestamp:view.updatedAt})]},view.recipient.id)}))}):hasViewsCapability&&(viewsElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__replies--none",children:i18n("icu:StoryViewsNRepliesModal__no-views")}));var tabsElement=viewsElement&&repliesElement?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Tabs__WEBPACK_IMPORTED_MODULE_13__.m,{selectedTab:currentTab,onTabChange:function(tab){onChangeViewTarget(tab===StoryViewsNRepliesTab.Replies?_types_Stories__WEBPACK_IMPORTED_MODULE_3__.Zk.Replies:_types_Stories__WEBPACK_IMPORTED_MODULE_3__.Zk.Views)},moduleClassName:"StoryViewsNRepliesModal__tabs",tabs:[{id:StoryViewsNRepliesTab.Views,label:i18n("icu:StoryViewsNRepliesModal__tab--views")},{id:StoryViewsNRepliesTab.Replies,label:i18n("icu:StoryViewsNRepliesModal__tab--replies")}],children:function(_ref3){var selectedTab=_ref3.selectedTab;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[selectedTab===StoryViewsNRepliesTab.Views&&viewsElement,selectedTab===StoryViewsNRepliesTab.Replies&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[repliesElement,composerElement]})]})}}):void 0;return tabsElement||viewsElement||repliesElement||composerElement?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_11__.u_,{modalName:"StoryViewsNRepliesModal",i18n,moduleClassName:"StoryViewsNRepliesModal",onClose,useFocusTrap:Boolean(composerElement),theme:_util_theme__WEBPACK_IMPORTED_MODULE_14__.Q.Dark,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()({"StoryViewsNRepliesModal--group":Boolean(group)}),children:tabsElement||(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[viewsElement||repliesElement,composerElement]})})}),deleteReplyId&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_20__.U,{i18n,theme:_util_theme__WEBPACK_IMPORTED_MODULE_14__.Q.Dark,dialogName:"confirmDialog",actions:[{text:i18n("icu:delete"),action:function(){return deleteGroupStoryReply(deleteReplyId)},style:"negative"}],title:i18n("icu:deleteWarning"),onClose:function(){return setDeleteReplyId(void 0)},onCancel:function(){return setDeleteReplyId(void 0)}}),deleteForEveryoneReplyId&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_20__.U,{i18n,theme:_util_theme__WEBPACK_IMPORTED_MODULE_14__.Q.Dark,dialogName:"confirmDialog",actions:[{text:i18n("icu:delete"),action:function(){return deleteGroupStoryReplyForEveryone(deleteForEveryoneReplyId)},style:"negative"}],title:i18n("icu:deleteWarning"),onClose:function(){return setDeleteForEveryoneReplyId(void 0)},onCancel:function(){return setDeleteForEveryoneReplyId(void 0)},children:i18n("icu:deleteForEveryoneWarning")})]}):null}function ReplyOrReactionMessage(_ref4){var containerElementRef=_ref4.containerElementRef,deleteGroupStoryReply=_ref4.deleteGroupStoryReply,deleteGroupStoryReplyForEveryone=_ref4.deleteGroupStoryReplyForEveryone,displayLimit=_ref4.displayLimit,getPreferredBadge=_ref4.getPreferredBadge,i18n=_ref4.i18n,id=_ref4.id,isInternalUser=_ref4.isInternalUser,isSpoilerExpanded=_ref4.isSpoilerExpanded,messageExpanded=_ref4.messageExpanded,platform=_ref4.platform,reply=_ref4.reply,shouldCollapseAbove=_ref4.shouldCollapseAbove,shouldCollapseBelow=_ref4.shouldCollapseBelow,showContactModal=_ref4.showContactModal,showSpoiler=_ref4.showSpoiler,renderContent=function(onContextMenu){return reply.reactionEmoji&&!reply.deletedForEveryone?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"StoryViewsNRepliesModal__reaction",onContextMenu,"data-id":id,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"StoryViewsNRepliesModal__reaction--container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_Avatar__WEBPACK_IMPORTED_MODULE_4__.qE,{acceptedMessageRequest:reply.author.acceptedMessageRequest,avatarPath:reply.author.avatarPath,badge:getPreferredBadge(reply.author.badges),color:(0,_types_Colors__WEBPACK_IMPORTED_MODULE_17__.hx)(reply.author.color),conversationType:"direct",i18n,isMe:Boolean(reply.author.isMe),profileName:reply.author.profileName,sharedGroupNames:reply.author.sharedGroupNames||[],size:_Avatar__WEBPACK_IMPORTED_MODULE_4__.DZ.TWENTY_EIGHT,theme:_types_Util__WEBPACK_IMPORTED_MODULE_15__.f8.dark,title:reply.author.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)("div",{className:"StoryViewsNRepliesModal__reaction--body",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__reply--title",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_ContactName__WEBPACK_IMPORTED_MODULE_6__.K,{contactNameColor:reply.contactNameColor,title:reply.author.isMe?i18n("icu:you"):reply.author.title})}),i18n("icu:StoryViewsNRepliesModal__reacted"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_10__.i,{i18n,isRelativeTime:!0,module:"StoryViewsNRepliesModal__reply--timestamp",timestamp:reply.timestamp})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_Emojify__WEBPACK_IMPORTED_MODULE_8__.u,{text:reply.reactionEmoji})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)("div",{className:"StoryViewsNRepliesModal__reply","data-id":id,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_conversation_Message__WEBPACK_IMPORTED_MODULE_9__.v0,Object.assign({},MESSAGE_DEFAULT_PROPS,{author:reply.author,bodyRanges:reply.bodyRanges,contactNameColor:reply.contactNameColor,containerElementRef,conversationColor:"ultramarine",conversationId:reply.conversationId,conversationTitle:reply.author.title,conversationType:"group",deletedForEveryone:reply.deletedForEveryone,direction:"incoming",displayLimit,getPreferredBadge,i18n,platform,id:reply.id,interactionMode:"mouse",isSpoilerExpanded,messageExpanded,onContextMenu,readStatus:reply.readStatus,renderingContext:"StoryViewsNRepliesModal",renderMenu:void 0,shouldCollapseAbove,shouldCollapseBelow,shouldHideMetadata:!1,showContactModal,showSpoiler,text:reply.body,textDirection:_conversation_Message__WEBPACK_IMPORTED_MODULE_9__.m5.Default,timestamp:reply.timestamp}))})},menuOptions=[{icon:"module-message__context--icon module-message__context__delete-message",label:i18n("icu:StoryViewsNRepliesModal__delete-reply"),onClick:function(){return deleteGroupStoryReply(reply.id)}},{icon:"module-message__context--icon module-message__context__delete-message-for-everyone",label:i18n("icu:StoryViewsNRepliesModal__delete-reply-for-everyone"),onClick:function(){return deleteGroupStoryReplyForEveryone(reply.id)}}];return isInternalUser&&menuOptions.push({icon:"module-message__context--icon module-message__context__copy-timestamp",label:i18n("icu:StoryViewsNRepliesModal__copy-reply-timestamp"),onClick:function(){window.navigator.clipboard.writeText(String(reply.timestamp))}}),reply.author.isMe&&!reply.deletedForEveryone?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsx)(_ContextMenu__WEBPACK_IMPORTED_MODULE_19__.x,{i18n,menuOptions,children:function(_ref5){var openMenu=_ref5.openMenu,menuNode=_ref5.menuNode;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_21__.Fragment,{children:[renderContent(openMenu),menuNode]})}},reply.id):renderContent()}!function(StoryViewsNRepliesTab){StoryViewsNRepliesTab.Replies="Replies",StoryViewsNRepliesTab.Views="Views"}(StoryViewsNRepliesTab||(StoryViewsNRepliesTab={}))},"./ts/components/Tabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>Tabs});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),assert=__webpack_require__("./ts/util/assert.ts"),getClassNamesFor=__webpack_require__("./ts/util/getClassNamesFor.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _excluded=["children"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Tabs(props){var children=props.children,_useTabs=function useTabs(options){(0,assert.q8)(options.tabs.length,"Tabs needs more than 1 tab present");var selectedTab,onChange,getClassName=(0,getClassNamesFor.h)("Tabs",options.moduleClassName);if("selectedTab"in options)selectedTab=options.selectedTab,onChange=options.onTabChange;else{var _useState2=_slicedToArray((0,react.useState)(options.initialSelectedTab||options.tabs[0].id),2),tabState=_useState2[0],setTabState=_useState2[1];selectedTab=tabState,onChange=function(newTab){var _options$onTabChange;setTabState(newTab),null===(_options$onTabChange=options.onTabChange)||void 0===_options$onTabChange||_options$onTabChange.call(options,newTab)}}var tabsHeaderElement=(0,jsx_runtime.jsx)("div",{className:getClassName(""),children:options.tabs.map((function(_ref){var id=_ref.id,label=_ref.label;return(0,jsx_runtime.jsx)("div",{className:classnames_default()(getClassName("__tab"),selectedTab===id&&getClassName("__tab--selected")),onClick:function(){onChange(id)},onKeyUp:function(e){e.target===e.currentTarget&&13===e.keyCode&&(onChange(id),e.preventDefault(),e.stopPropagation())},role:"tab",tabIndex:0,children:label},id)}))});return{selectedTab,tabsHeaderElement}}(_objectWithoutProperties(props,_excluded)),selectedTab=_useTabs.selectedTab,tabsHeaderElement=_useTabs.tabsHeaderElement;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tabsHeaderElement,children({selectedTab})]})}},"./ts/components/conversation/ReactionPicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>ReactionPicker});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_emoji_lib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/emoji/lib.ts"),_hooks_useRestoreFocus__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/hooks/useRestoreFocus.ts"),_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ReactionPickerPicker.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ReactionPicker=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function ReactionPickerInner(_ref,ref){var i18n=_ref.i18n,onClose=_ref.onClose,onPick=_ref.onPick,onSetSkinTone=_ref.onSetSkinTone,openCustomizePreferredReactionsModal=_ref.openCustomizePreferredReactionsModal,preferredReactionEmoji=_ref.preferredReactionEmoji,renderEmojiPicker=_ref.renderEmojiPicker,selected=_ref.selected,style=_ref.style,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),2),pickingOther=_React$useState2[0],setPickingOther=_React$useState2[1];react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){var handler=function(e){onClose&&"Escape"===e.key&&!pickingOther&&onClose()};return document.addEventListener("keydown",handler),function(){document.removeEventListener("keydown",handler)}}),[onClose,pickingOther]);var moreButton,onPickEmoji=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(_ref2){var shortName=_ref2.shortName,pickedSkinTone=_ref2.skinTone;onPick((0,_emoji_lib__WEBPACK_IMPORTED_MODULE_1__.nS)(shortName,pickedSkinTone))}),[onPick]),focusRef=_slicedToArray((0,_hooks_useRestoreFocus__WEBPACK_IMPORTED_MODULE_2__.e)(),1)[0];if(pickingOther)return renderEmojiPicker({onClickSettings:openCustomizePreferredReactionsModal,onClose,onPickEmoji,onSetSkinTone,ref,style});moreButton=selected&&!preferredReactionEmoji.includes(selected)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__.Ud,{emoji:selected,onClick:function(){onPick(selected)},isSelected:!0,title:i18n("icu:Reactions--remove")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__.JR,{i18n,onClick:function(){setPickingOther(!0)}});var hasSelectedSomething=!1;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__.V$,{isSomethingSelected:"number"==typeof selected,pickerStyle:_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__.S3.Picker,ref,style,children:[preferredReactionEmoji.map((function(emoji,index){var maybeFocusRef=0===index?focusRef:void 0,isSelected=!hasSelectedSomething&&emoji===selected;return isSelected&&(hasSelectedSomething=!0),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ReactionPickerPicker__WEBPACK_IMPORTED_MODULE_3__.Ud,{emoji,isSelected,onClick:function(){onPick(emoji)},ref:maybeFocusRef},index)})),moreButton]})}))},"./ts/messages/MessageSendState.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{fq:()=>SendStatus,gO:()=>isFailed,vB:()=>isSent,zR:()=>isPending});var SendStatus,_util_enum__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/enum.ts");!function(SendStatus){SendStatus.Failed="Failed",SendStatus.Pending="Pending",SendStatus.Sent="Sent",SendStatus.Delivered="Delivered",SendStatus.Read="Read",SendStatus.Viewed="Viewed"}(SendStatus||(SendStatus={}));(0,_util_enum__WEBPACK_IMPORTED_MODULE_0__.m)(SendStatus,SendStatus.Pending);var SendActionType,STATUS_NUMBERS={[SendStatus.Failed]:0,[SendStatus.Pending]:1,[SendStatus.Sent]:2,[SendStatus.Delivered]:3,[SendStatus.Read]:4,[SendStatus.Viewed]:5},isPending=function(status){return status===SendStatus.Pending},isSent=function(status){return STATUS_NUMBERS[status]>=STATUS_NUMBERS[SendStatus.Sent]},isFailed=function(status){return status===SendStatus.Failed};!function(SendActionType){SendActionType[SendActionType.Failed=0]="Failed",SendActionType[SendActionType.ManuallyRetried=1]="ManuallyRetried",SendActionType[SendActionType.Sent=2]="Sent",SendActionType[SendActionType.GotDeliveryReceipt=3]="GotDeliveryReceipt",SendActionType[SendActionType.GotReadReceipt=4]="GotReadReceipt",SendActionType[SendActionType.GotViewedReceipt=5]="GotViewedReceipt"}(SendActionType||(SendActionType={}));SendActionType.Failed,SendStatus.Failed,SendActionType.ManuallyRetried,SendStatus.Pending,SendActionType.Sent,SendStatus.Sent,SendActionType.GotDeliveryReceipt,SendStatus.Delivered,SendActionType.GotReadReceipt,SendStatus.Read,SendActionType.GotViewedReceipt,SendStatus.Viewed},"./ts/util/shouldNeverBeCalled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>shouldNeverBeCalled,q:()=>asyncShouldNeverBeCalled});var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/assert.ts");function shouldNeverBeCalled(){(0,_assert__WEBPACK_IMPORTED_MODULE_0__.q8)(!1,"This should never be called. Doing nothing")}async function asyncShouldNeverBeCalled(){shouldNeverBeCalled()}}}]);