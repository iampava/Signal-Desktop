/*! For license information please see 7006.6943953f.iframe.bundle.js.LICENSE.txt */
"use strict";(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[7006],{"./node_modules/@indutny/frameless-titlebar/dist/index.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ZP:()=>TitleBar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function createCommonjsModule(fn,module){return fn(module={exports:{}},module.exports),module.exports}var classnames=createCommonjsModule((function(module){!function(){var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg)){if(arg.length){var inner=classNames.apply(null,arg);inner&&classes.push(inner)}}else if("object"===argType)if(arg.toString===Object.prototype.toString)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key);else classes.push(arg.toString())}}return classes.join(" ")}module.exports?(classNames.default=classNames,module.exports=classNames):window.classNames=classNames}()})),b="function"==typeof Symbol&&Symbol.for,c=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(a){if("object"==typeof a&&null!==a){var u=a.$$typeof;switch(u){case c:switch(a=a.type){case l:case m:case e:case g:case f:case p:return a;default:switch(a=a&&a.$$typeof){case k:case n:case t:case r:case h:return a;default:return u}}case d:return u}}}function A(a){return z(a)===m}var reactIs_production_min={AsyncMode:l,ConcurrentMode:m,ContextConsumer:k,ContextProvider:h,Element:c,ForwardRef:n,Fragment:e,Lazy:t,Memo:r,Portal:d,Profiler:g,StrictMode:f,Suspense:p,isAsyncMode:function(a){return A(a)||z(a)===l},isConcurrentMode:A,isContextConsumer:function(a){return z(a)===k},isContextProvider:function(a){return z(a)===h},isElement:function(a){return"object"==typeof a&&null!==a&&a.$$typeof===c},isForwardRef:function(a){return z(a)===n},isFragment:function(a){return z(a)===e},isLazy:function(a){return z(a)===t},isMemo:function(a){return z(a)===r},isPortal:function(a){return z(a)===d},isProfiler:function(a){return z(a)===g},isStrictMode:function(a){return z(a)===f},isSuspense:function(a){return z(a)===p},isValidElementType:function(a){return"string"==typeof a||"function"==typeof a||a===e||a===m||a===g||a===f||a===p||a===q||"object"==typeof a&&null!==a&&(a.$$typeof===t||a.$$typeof===r||a.$$typeof===h||a.$$typeof===k||a.$$typeof===n||a.$$typeof===w||a.$$typeof===x||a.$$typeof===y||a.$$typeof===v)},typeOf:z},reactIs_development=createCommonjsModule((function(module,exports){0}));reactIs_development.AsyncMode,reactIs_development.ConcurrentMode,reactIs_development.ContextConsumer,reactIs_development.ContextProvider,reactIs_development.Element,reactIs_development.ForwardRef,reactIs_development.Fragment,reactIs_development.Lazy,reactIs_development.Memo,reactIs_development.Portal,reactIs_development.Profiler,reactIs_development.StrictMode,reactIs_development.Suspense,reactIs_development.isAsyncMode,reactIs_development.isConcurrentMode,reactIs_development.isContextConsumer,reactIs_development.isContextProvider,reactIs_development.isElement,reactIs_development.isForwardRef,reactIs_development.isFragment,reactIs_development.isLazy,reactIs_development.isMemo,reactIs_development.isPortal,reactIs_development.isProfiler,reactIs_development.isStrictMode,reactIs_development.isSuspense,reactIs_development.isValidElementType,reactIs_development.typeOf;createCommonjsModule((function(module){module.exports=reactIs_production_min}));var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}(function shouldUseNative(){try{if(!Object.assign)return!1;var test1=new String("abc");if(test1[5]="de","5"===Object.getOwnPropertyNames(test1)[0])return!1;for(var test2={},i=0;i<10;i++)test2["_"+String.fromCharCode(i)]=i;var order2=Object.getOwnPropertyNames(test2).map((function(n){return test2[n]}));if("0123456789"!==order2.join(""))return!1;var test3={};return"abcdefghijklmnopqrst".split("").forEach((function(letter){test3[letter]=letter})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},test3)).join("")}catch(err){return!1}})()&&Object.assign;var ReactPropTypesSecret_1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function checkPropTypes(typeSpecs,values,location,componentName,getStack){}checkPropTypes.resetWarningCache=function(){0};Function.call.bind(Object.prototype.hasOwnProperty);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var propTypes=createCommonjsModule((function(module){module.exports=function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret_1){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}function getShim(){return shim}shim.isRequired=shim;var ReactPropTypes={array:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes}()})),styles_Bar="style_Bar__nNJjZ",styles_Title="style_Title__3pWgw",styles_Logo="style_Logo__1AxaT",styles_Vertical="style_Vertical__1QXbd",styles_ResizeHandle="style_ResizeHandle__2Iivi",styles_Top="style_Top__xowfD",styles_Left="style_Left__3yF2k",styles_MenuBar="style_MenuBar__1Rm7F",styles_MenuOverlay="style_MenuOverlay__uwof3",styles_MenuButtonContainer="style_MenuButtonContainer__3d9pg",styles_MenuButtonLabel="style_MenuButtonLabel__uuUFw",styles_MenuButtonLabelWrapper="style_MenuButtonLabelWrapper__w7eBH",styles_MenuButton="style_MenuButton__1L_cT",styles_MenuButtonWrapper="style_MenuButtonWrapper__38r62",styles_MenuListContainer="style_MenuListContainer__9aIuk",styles_MenuListScrollView="style_MenuListScrollView__zHZyv",styles_MenuList="style_MenuList__1byLi",styles_MenuListVertical="style_MenuListVertical__24r-l",styles_MenuListItems="style_MenuListItems__BJ1Kq",styles_SubMenuLabel="style_SubMenuLabel__30vnk",styles_MenuItemContainer="style_MenuItemContainer__2XSTu",styles_MenuItemWrapper="style_MenuItemWrapper__1_gpb",styles_Accelerator="style_Accelerator__-ywU5",styles_MenuItemLabel="style_MenuItemLabel__2Qj9U",styles_SubMenuArrow="style_SubMenuArrow__213i8",styles_Separator="style_Separator__3qKSO",styles_MenuItemIcon="style_MenuItemIcon__vPvyA",styles_StatusIcon="style_StatusIcon__1JFrB",styles_ControlsWrapper="style_ControlsWrapper__1Sa4Y",styles_Control="style_Control__1Aquc";const MinimizeIcon=({isWin})=>isWin?react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{version:"1.1","aria-hidden":"true",width:"10",height:"10"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M 0,5 10,5 10,6 0,6 Z"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M7 3v4H4l3.156 4H4v2h8v-2H8.844L12 7H9V3z",style:{marker:"none"},overflow:"visible"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"613.992",y:"426.851",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-1401.69",y:"1250.896",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-474.763",y:"195.667",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"417.863",y:"-261.333",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"444.346",y:"-306.364",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-1204.137",y:"-314.333",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"410.171",y:"-616.333",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"2052.752",y:"76.336",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"2079.236",y:"31.305",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"430.752",y:"23.336",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"2045.06",y:"-278.664",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-605.797",y:"-29.818",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-2621.479",y:"794.227",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("text",{x:"-726.195",y:"896.876",fontSize:"14",fontWeight:"400",opacity:".8",fontFamily:"Bitstream Vera Sans",transform:"translate(-293 -188)"})),RestoreIcon=({isWin})=>isWin?react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{version:"1.1","aria-hidden":"true",width:"10",height:"10"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"m 2,1e-5 0,2 -2,0 0,8 8,0 0,-2 2,0 0,-8 z m 1,1 6,0 0,6 -1,0 0,-5 -5,0 z m -2,2 6,0 0,6 -6,0 z"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M14 8l-2.25-2.223 1.714-1.715c.013-.012.015-.013.027-.026.38-.42.379-1.068-.027-1.474a1.07 1.07 0 0 0-1.473-.053l-.214.214-1.554 1.527L8 2v6zM8 14V8H2l2.25 2.25-1.714 1.714-.027.027c-.38.42-.379 1.068.027 1.473.405.406 1.08.434 1.5.054l.187-.214 1.554-1.554z",style:{marker:"none"},overflow:"visible"}))),MaximizeIcon=({isWin})=>isWin?react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{version:"1.1","aria-hidden":"true",width:"10",height:"10"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M 0,0 0,10 10,10 10,0 Z M 1,1 9,1 9,9 1,9 Z"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M8 2l2.25 2.223-1.714 1.714-.027.027c-.38.42-.379 1.068.027 1.474a1.07 1.07 0 0 0 1.473.053l.214-.214 1.554-1.527L14 8V2zM2 8v6h6l-2.25-2.25 1.714-1.714.027-.027c.38-.42.379-1.068-.027-1.473-.405-.406-1.08-.434-1.5-.054l-.187.214-1.554 1.554z",style:{marker:"none"},overflow:"visible"})),CloseIcon=({isWin})=>isWin?react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{"aria-hidden":"true",version:"1.1",width:"10",height:"10"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M 0,0 0,0.7 4.3,5 0,9.3 0,10 0.7,10 5,5.7 9.3,10 10,10 10,9.3 5.7,5 10,0.7 10,0 9.3,0 5,4.3 0.7,0 Z"})):react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",width:"16"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M7.97 6.556L10.5 4 12 5.5 9.401 7.987 12 10.5 10.5 12 7.987 9.401 5.5 12 4 10.5 6.586 8 4 5.5 5.5 4l2.47 2.556z",style:{marker:"none"},overflow:"visible"}));var isMergeableObject=function isMergeableObject(value){return function isNonNullObject(value){return!!value&&"object"==typeof value}(value)&&!function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return"[object RegExp]"===stringValue||"[object Date]"===stringValue||function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}(value)}(value)};var REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(value,options){return!1!==options.clone&&options.isMergeableObject(value)?deepmerge(function emptyTarget(val){return Array.isArray(val)?[]:{}}(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map((function(element){return cloneUnlessOtherwiseSpecified(element,options)}))}function getKeys(target){return Object.keys(target).concat(function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter((function(symbol){return target.propertyIsEnumerable(symbol)})):[]}(target))}function propertyIsOnObject(object,property){try{return property in object}catch(_){return!1}}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach((function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)})),getKeys(source).forEach((function(key){(function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))})(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=function getMergeFunction(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return"function"==typeof customMerge?customMerge:deepmerge}(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))})),destination}function deepmerge(target,source,options){(options=options||{}).arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source);return sourceIsArray===Array.isArray(target)?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}deepmerge.all=function deepmergeAll(array,options){if(!Array.isArray(array))throw new Error("first argument should be an array");return array.reduce((function(prev,next){return deepmerge(prev,next,options)}),{})};var cjs=deepmerge;const menuTheme={dark:{palette:"dark",style:"default",item:{height:30,disabledOpacity:.3,default:{color:"inherit",background:"transparent"},active:{color:"#fff",background:"#0372ef"}},separator:{color:"#e1e4e8"},header:{show:!0,color:"#6a737d"},accelerator:{color:"#6a737d"},icon:{highlight:!0},list:{minWidth:200,maxWidth:400,marginBottom:10,background:"rgb(48, 48, 48)",boxShadow:"0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24)",borderRadius:"unset",zIndex:2001},overlay:{background:"black",opacity:.4,zIndex:2e3},marginRight:0},light:{palette:"light",item:{default:{color:"#24292e"}},list:{background:"#fff"}},vertical:{style:"vertical"},stacked:{style:"stacked",marginRight:200}},controlsTheme_dark={border:"none",layout:"right",borderRadius:0,normal:{default:{color:"inherit",background:"transparent"},hover:{color:"#fff",background:"rgba(255,255,255,0.3)"}},close:{default:{color:"inherit",background:"transparent"},hover:{color:"#fff",background:"#e81123"}}},controlsTheme_light={color:"#000",normal:{hover:{background:"rgba(0, 0, 0, 0.1)"}}},controlsTheme_linux={border:"1px solid rgba(0,0,0,0.06)",borderRadius:"50%",close:{hover:{background:"#c85458"}}},barTheme_dark={palette:"dark",height:"28px",color:"#fff",background:"#24292e",borderBottom:"1px solid #000",inActiveOpacity:.6,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif",icon:{color:"#0372ef",width:20,height:20},title:{color:"inherit",align:"center",fontFamily:"inherit",fontWeight:"normal"},button:{maxWidth:100,active:{color:"#fff",background:"rgb(48, 48, 48)"},default:{color:"inherit",background:"transparent"},hover:{color:"inherit",background:"rgba(255,255,255,0.3)"},disabledOpacity:.3}},barTheme_light={palette:"light",color:"#24292e",background:"#e8e8e8",borderBottom:"1px solid #d3d4d5",button:{active:{color:"#24292e",background:"#fff"},hover:{background:"rgba(0, 0, 0, 0.1)"}}},barTheme_darwin={height:"22px"},getMenuTheme=(palette,menuStyle="default")=>{let menu=menuTheme.dark;return"light"===palette&&(menu=cjs(menu,menuTheme.light)),"default"!==menuStyle&&(menu=cjs(menu,menuTheme[menuStyle])),menu},getBarTheme=(palette,platform)=>{let bar=barTheme_dark;return"light"===palette&&(bar=cjs(bar,barTheme_light)),"darwin"===platform&&(bar=cjs(bar,barTheme_darwin)),bar},mergeTheme=(overrides,platform="win32")=>{var _a,_b,_c;let theme={platform},paletteType="dark";(null==overrides?void 0:overrides.bar)?(paletteType=null!==(_a=overrides.bar.palette)&&void 0!==_a?_a:"dark",theme.bar=cjs(getBarTheme(paletteType,platform),overrides.bar)):theme.bar=getBarTheme(paletteType,platform),theme.controls=((palette,platform)=>{let controls=controlsTheme_dark;return"light"===palette&&(controls=cjs(controls,controlsTheme_light)),"linux"===platform&&(controls=cjs(controls,controlsTheme_linux)),controls})(paletteType,platform),(null==overrides?void 0:overrides.controls)&&(theme.controls=cjs(theme.controls,overrides.controls));let menuStyle="default";if(null==overrides?void 0:overrides.menu){let menuPalette=null!==(_b=overrides.menu.palette)&&void 0!==_b?_b:paletteType;menuStyle=null!==(_c=overrides.menu.style)&&void 0!==_c?_c:menuStyle,theme.menu=cjs(getMenuTheme(menuPalette,menuStyle),overrides.menu)}else theme.menu=getMenuTheme(paletteType,menuStyle);return void 0!==(null==overrides?void 0:overrides.enableOverflow)?theme.enableOverflow=overrides.enableOverflow:theme.enableOverflow=!0,(null==overrides?void 0:overrides.scalingFunction)?theme.scalingFunction=overrides.scalingFunction:theme.scalingFunction=x=>x,theme},ThemeContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(mergeTheme()),createRefs=children=>Array(children.length).fill(0).map((()=>(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)())),useChildRefs=children=>{const[refs,setRefs]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(createRefs(children));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setRefs(createRefs(children))}),[children]),refs};function useHoverWithRef(ref){const[hovered,setHovered]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const node=ref.current;if(node){const enter=()=>setHovered(!0),leave=()=>setHovered(!1);return node.addEventListener("mouseenter",enter),node.addEventListener("mouseleave",leave),node.addEventListener("focus",enter),node.addEventListener("blur",leave),()=>{node.removeEventListener("mouseenter",enter),node.removeEventListener("mouseleave",leave),node.removeEventListener("focus",enter),node.removeEventListener("blur",leave)}}}),[ref.current]),hovered}function useHover(){const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);return[ref,useHoverWithRef(ref)]}const modifiers=["CommandOrControl","CmdOrCtrl"],addEdge=(graph,fromEdge,toEdge)=>{graph.has(fromEdge)||graph.set(fromEdge,[]),graph.get(fromEdge).push(toEdge)},sortMenuItems=menu=>{const original=menu.map(((_item,i)=>i)),graph=new Map,idToIndex=new Map(menu.map(((item,i)=>[item.id,i])));menu.forEach(((item,i)=>{if(item.before){const to=idToIndex.get(item.before);null!=to&&addEdge(graph,to,i)}if(item.after){const to=idToIndex.get(item.after);null!=to&&addEdge(graph,i,to)}}));const sortedOrder=((original,graph)=>{const sorted=[],visited=new Set,visit=mark=>{if(visited.has(mark))return;visited.add(mark);const edges=graph.get(mark);null!=edges&&edges.forEach(visit),sorted.push(mark)};return original.forEach(visit),sorted})(original,graph);return sortedOrder.map((i=>menu[i]))},parseAccelerator=(accelerator,platform)=>{if(accelerator&&""!==accelerator){const re=new RegExp(modifiers.join("|"),"gi");return accelerator.replace(re,(()=>"darwin"===platform?"âŒ˜":"Ctrl"))}return""},sortMenu=(menu,platform)=>sortMenuItems(menu).map((item=>{if(!(item=>null!==item&&"object"==typeof item&&(item.hasOwnProperty("label")||"separator"===item.type))(item))throw new TypeError("MenuItem must have at least one of label, role or type");return Array.isArray(item.submenu)?Object.assign(Object.assign({},item),{submenu:sortMenu(item.submenu,platform)}):Object.assign(Object.assign({},item),{accelerator:parseAccelerator(null==item?void 0:item.accelerator,platform)})})),buildMenu=(menu,platform)=>{if(!Array.isArray(menu))throw new TypeError("Menu must be an array");return sortMenu(menu,platform)},usePrevious=value=>{const ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)();return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{ref.current=value}),[value]),ref.current};function getRect(element){let rect={bottom:0,height:0,left:0,right:0,top:0,width:0};return element&&(rect=element.getBoundingClientRect()),rect}function useRect(ref){const[rect,setRect]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(ref&&ref.current?getRect(ref.current):getRect()),handleResize=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{ref.current&&setRect(getRect(ref.current))}),[ref.current]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{const element=ref.current;if(!element)return;handleResize();let resizeObserver=new ResizeObserver((()=>handleResize()));return resizeObserver.observe(element),()=>{resizeObserver&&(resizeObserver.disconnect(),resizeObserver=void 0)}}),[ref.current]),rect}const getWidth=()=>window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,useWidth=()=>{const[width,setWidth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(getWidth());return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{let timeoutId=null;const resizeListener=()=>{timeoutId&&clearTimeout(timeoutId),timeoutId=setTimeout((()=>setWidth(getWidth())),150)};return window.addEventListener("resize",resizeListener),()=>{window.removeEventListener("resize",resizeListener)}}),[]),width},stopScrolling=e=>(e.preventDefault(),e.stopPropagation(),e.returnValue=!1,!1),getTopOffset=(depth,hasSubLabel)=>depth>1?hasSubLabel?20:5:0,isItemSubMenu=item=>{var _a;return null!==(_a=null==item?void 0:item.submenu)&&void 0!==_a&&_a&&Array.isArray(item.submenu)},isItemSeparator=item=>item&&item.type&&"separator"===item.type.toLowerCase(),toggleCheckedState=(menu,index,radio=!1)=>{radio?menu.forEach(((item,idx)=>{"radio"===item.type&&(item.checked=index===idx)})):menu[index].checked=!menu[index].checked},menuItemClick=(e,idx,item,menu,dispatch,currentWindow)=>{if(!0!==item.disabled&&item.click){switch(item.type){case"submenu":break;case"radio":toggleCheckedState(menu,idx,!0),item.click(item,currentWindow,e);break;case"checkbox":toggleCheckedState(menu,idx),item.click(item,currentWindow,e);break;default:item.click(item,currentWindow,e)}dispatch({type:"reset"})}else e.stopPropagation()},currentSelected=(selectedPath,depth)=>depth<selectedPath.length?selectedPath[depth]:-2,getSelectedItem=(menu,selected)=>{const[m,d]=((menu,selected)=>{let m=menu;for(let i=0;i<selected.length;i+=1){const level=m[selected[i]];if(!(isItemSubMenu(level)&&i<selected.length-1))return[m,i];m=level.submenu}return[[],-1]})(menu,selected);return[m[selected[d]],selected[d],m,d]},validNext=(menu,start,maxIndex)=>{const current=start+1,max=null!=maxIndex?maxIndex:menu.length;for(let index=0;index<max;index+=1){const i=(current+index)%max;if(!menu[i].disabled&&!isItemSeparator(menu[i]))return i}return start},validPrevious=(menu,start,maxIndex)=>{const current=start-1,max=null!=maxIndex?maxIndex:menu.length;for(let index=max;index>=0;index-=1){const i=(index+current)%max;if(!menu[i].disabled&&!isItemSeparator(menu[i]))return i}return start},getValidItem=(menu,selected,prev=!1)=>{const[,itemIdx,m,d]=getSelectedItem(menu,selected);return[prev?validPrevious(m,itemIdx):validNext(m,itemIdx),d]},immutableSplice=(arr,start,deleteCount,...items)=>[...arr.slice(0,start),...items,...arr.slice(start+deleteCount)],LABEL_CACHE=new Map,splitLabel=l=>{if(void 0===l)return{};const cached=LABEL_CACHE.get(l);if(cached)return cached;const letters=[...l],index=l.indexOf("&"),result={before:letters.slice(0,Math.max(0,index)).join(""),letter:letters[index+1],after:letters.slice(index+2).join("")};return LABEL_CACHE.set(l,result),result},useAccessibility=(menu,childRefs,selectedPath,dispatch,overflowRef,overflow,currentWindow)=>{const resetKeys=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{dispatch({type:"alt",altKey:!1})}),[dispatch]),onKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{var _a;if(e.altKey){if(dispatch({type:"alt",altKey:!0}),"Alt"!==e.key){let firstIndex=menu.findIndex((x=>!x.disabled&&((e,str)=>{const{letter}=splitLabel(str);return!!e.altKey&&e.key===(null==letter?void 0:letter.toLowerCase())})(e,x.label)));if(firstIndex>=0){e.preventDefault();const maxIndex=Math.min(firstIndex,overflow&&overflow.hide?menu.length-1:menu.length);dispatch({type:"button-set",depth:0,selected:maxIndex})}}return}const current=selectedPath[0];if(!(current<0))switch(e.key){case"Enter":{e.preventDefault(),e.stopImmediatePropagation();const[selectedItem,selectedIndex,selectedMenu]=getSelectedItem(menu,selectedPath);if(isItemSubMenu(selectedItem)){dispatch({type:"set",depth:selectedPath.length+1,selected:validNext(selectedItem.submenu,-1)});break}menuItemClick(e,selectedIndex,selectedItem,selectedMenu,dispatch,currentWindow);break}case"Escape":{e.preventDefault();const currRef=((childRefs,index,overflow,overflowRef)=>overflow?overflow.index===index?overflowRef:childRefs[index>overflow.index?index-1:index]:childRefs[index])(childRefs,current,overflow,overflowRef);null===(_a=null==currRef?void 0:currRef.current)||void 0===_a||_a.blur(),dispatch({type:"reset"});break}case"ArrowDown":{e.preventDefault();const[next,selectedDepth]=getValidItem(menu,selectedPath);dispatch({type:"set",depth:selectedDepth,selected:next});break}case"ArrowRight":{e.preventDefault();const[selectedItem]=getSelectedItem(menu,selectedPath);if(isItemSubMenu(selectedItem)){dispatch({type:"set",depth:selectedPath.length+1,selected:validNext(selectedItem.submenu,-1)});break}const next=validNext(menu,current,overflow&&overflow.hide?menu.length-1:overflow.index+1);dispatch({type:"button-set",depth:0,selected:next});break}case"ArrowUp":{e.preventDefault();const[prev,selectedDepth]=getValidItem(menu,selectedPath,!0);dispatch({type:"set",depth:selectedDepth,selected:prev});break}case"ArrowLeft":if(e.preventDefault(),selectedPath.length<=2){const prev=validPrevious(menu,current,overflow&&overflow.hide?menu.length-1:overflow.index+1);dispatch({type:"button-set",depth:0,selected:prev});break}dispatch({type:"del",depth:selectedPath.length-1})}}),[menu,overflow,childRefs,overflowRef,selectedPath,currentWindow,dispatch]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(window.addEventListener("keydown",onKeyDown),window.addEventListener("keyup",resetKeys),()=>{window.removeEventListener("keydown",onKeyDown),window.removeEventListener("keyup",resetKeys)})),[onKeyDown,resetKeys])},defaultEvents=["click"],WindowButton=({children,onClick,close,controls,platform})=>{const[ref,hovering]=useHover();let config;config=close?hovering?controls.close.hover:controls.close.default:hovering?controls.normal.hover:controls.normal.default;const width="win32"===platform?"100%":"20px",height="win32"===platform?"100%":"20px";return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref,className:styles_Control},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{style:{width,height,color:config.color,background:config.background,borderRadius:controls.borderRadius,border:controls.border},onClick},children))},WindowControls=({onMinimize,onMaximize,onClose,maximized,disableMinimize,disableMaximize,focused,hideControls})=>{const{platform,bar,controls}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),isWin="win32"===platform,width=(isWin?48:40)*(3-(disableMaximize?1:0)-(disableMinimize?1:0)),children=((isWin,maximized,onMinimize,onMaximize,onClose)=>[{type:"minimize",onClick:onMinimize,icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(MinimizeIcon,{isWin})},{type:"maximize",onClick:onMaximize,icon:maximized?react__WEBPACK_IMPORTED_MODULE_0__.createElement(RestoreIcon,{isWin}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(MaximizeIcon,{isWin})},{type:"close",onClick:onClose,icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(CloseIcon,{isWin})}])(isWin,null!=maximized&&maximized,onMinimize,onMaximize,onClose).filter((x=>!(disableMaximize&&"maximize"==x.type||disableMinimize&&"minimize"==x.type))).map((b=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(WindowButton,{key:b.type,platform,close:"close"===b.type,onClick:b.onClick,controls},b.icon)));return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_ControlsWrapper,style:{opacity:focused?1:bar.inActiveOpacity,width}},hideControls?null:children)};WindowControls.propTypes={focused:propTypes.bool,onMinimize:propTypes.func,onMaximize:propTypes.func,onClose:propTypes.func};const Checked=react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"})),Unchecked=react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null),RadioUnchecked=react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M896 352q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),RadioChecked=react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M1152 896q0 106-75 181t-181 75-181-75-75-181 75-181 181-75 181 75 75 181zm-256-544q-148 0-273 73t-198 198-73 273 73 273 198 198 273 73 273-73 198-198 73-273-73-273-198-198-273-73zm768 544q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"})),Arrow=react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{version:"1.1",width:"24px",height:"24px"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("g",{id:"Rounded"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M9.29,6.71L9.29,6.71c-0.39,0.39-0.39,1.02,0,1.41L13.17,12l-3.88,3.88c-0.39,0.39-0.39,1.02,0,1.41l0,0c0.39,0.39,1.02,0.39,1.41,0l4.59-4.59c0.39-0.39,0.39-1.02,0-1.41l-4.59-4.59C10.32,6.32,9.68,6.32,9.29,6.71z"}))),MenuIcon=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement("svg",{version:"1.1",width:"24px",height:"24px",viewBox:"0 0 32 32"},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M 4 7 L 4 9 L 28 9 L 28 7 Z M 4 15 L 4 17 L 28 17 L 28 15 Z M 4 23 L 4 25 L 28 25 L 28 23 Z "})),MenuItemComponent=({item,onClick,currentWindow,depth,dispatch,selectedPath,idx})=>{var _a,_b,_c;if(!0===item.hidden)return null;const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext);if(isItemSeparator(item))return react__WEBPACK_IMPORTED_MODULE_0__.createElement("hr",{className:styles_Separator,style:{borderBottom:`1px solid ${theme.menu.separator.color}`}});const isSubMenu=isItemSubMenu(item),[ref,hovering]=useHover();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{hovering&&dispatch({type:isSubMenu?"hover-sub":"set",depth,selected:idx})}),[hovering,depth]);const selected=currentSelected(selectedPath,depth)===idx,selectedSub=selected&&currentSelected(selectedPath,depth+1)>=-1,textColor=((item,hovering,theme)=>hovering&&!item.disabled?theme.menu.item.active.color:theme.menu.item.default.color)(item,selected,theme),iconColor=((item,hovering,theme)=>hovering&&!item.disabled?theme.menu.item.active.color:theme.menu.icon.highlight?theme.menu.item.active.background:theme.menu.item.default.color)(item,selected,theme),acceleratedColor=((item,hovering,theme)=>hovering&&!item.disabled?theme.menu.item.active.color:theme.menu.accelerator.color)(item,selected,theme),backgroundColor=((hovering,item,theme)=>hovering&&!item.disabled?theme.menu.item.active.background:"")(selected,item,theme);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("li",{className:styles_MenuItemContainer,ref,style:{color:textColor,opacity:item.disabled?.3:1,backgroundColor},role:"option",tabIndex:0,onClick},react__WEBPACK_IMPORTED_MODULE_0__.createElement("a",{className:styles_MenuItemWrapper,style:{height:theme.menu.item.height,maxWidth:null===(_a=theme.menu.list)||void 0===_a?void 0:_a.maxWidth,minWidth:null===(_b=theme.menu.list)||void 0===_b?void 0:_b.minWidth}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_StatusIcon,style:{color:iconColor}},(item=>{switch(item.type){case"radio":return item.checked?RadioChecked:RadioUnchecked;case"checkbox":return item.checked?Checked:Unchecked;default:return(null==item?void 0:item.icon)?react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuItemIcon,style:{backgroundImage:`url(${item.icon})`}}):react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",null)}})(item)),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:styles_MenuItemLabel},item.label),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:styles_Accelerator,style:{color:acceleratedColor}},item.accelerator),isSubMenu&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_SubMenuArrow},Arrow)),!item.disabled&&isSubMenu&&selectedSub&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuList$1,{key:depth,menu:null!==(_c=item.submenu)&&void 0!==_c?_c:[],ref,currentWindow,depth:depth+1,selectedPath,dispatch,subLabel:item.label}))},MenuList=({menu,parentRef,currentWindow,depth,selectedPath,dispatch,subLabel})=>{var _a;const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),menuRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),scrollRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),parentBounds=useRect(parentRef),bounds=useRect(menuRef),[maxHeight,maxWidth]=((bounds,theme)=>[Math.max(0,window.innerHeight-bounds.top-theme.menu.list.marginBottom),Math.min(window.innerWidth,window.innerWidth-bounds.left)])(bounds,theme),hasSubLabel=!(!subLabel||""===subLabel||!theme.menu.header.show),layout=((bounds,depth,hasSubLabel)=>{const[layout,setLayout]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({top:bounds.bottom-getTopOffset(depth,hasSubLabel)+"px",left:`${bounds.left}px`});return(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{depth>1&&(window.innerWidth<=bounds.right+200?setLayout({top:bounds.bottom-getTopOffset(depth,hasSubLabel)+"px",left:`${bounds.left+24}px`}):setLayout({top:bounds.top-getTopOffset(depth,hasSubLabel)+"px",left:`${bounds.right}px`}))}),[bounds,depth,hasSubLabel]),layout})(parentBounds,depth,hasSubLabel),handleScroll=(scrollRef=>(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{const{scrollTop,scrollHeight,clientHeight}=scrollRef.current,wheelDelta=e.deltaY,isDeltaPositive=wheelDelta>0;return isDeltaPositive&&wheelDelta>scrollHeight-clientHeight-scrollTop?(scrollRef.current.scrollTop=scrollHeight,stopScrolling(e)):!isDeltaPositive&&-wheelDelta>scrollTop?(scrollRef.current.scrollTop=0,stopScrolling(e)):(scrollRef.current.scrollTop+=wheelDelta>0?10:-10,stopScrolling(e))}),[scrollRef.current]))(scrollRef);return((currentIndex,menuItemHeight,parentBounds,scrollRef)=>{(0,react__WEBPACK_IMPORTED_MODULE_0__.useLayoutEffect)((()=>{if(currentIndex>=0&&scrollRef.current){const menuItemBounds=menuItemHeight*currentIndex+menuItemHeight,{scrollTop,clientHeight}=scrollRef.current;menuItemBounds>clientHeight?scrollRef.current.scrollTop=menuItemBounds:menuItemBounds<scrollTop&&(scrollRef.current.scrollTop=menuItemBounds-menuItemHeight)}}),[currentIndex,menuItemHeight,parentBounds,scrollRef.current])})(currentSelected(selectedPath,depth),theme.menu.item.height,parentBounds,scrollRef),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuListContainer,style:{color:theme.menu.item.default.color,top:theme.scalingFunction(layout.top),left:theme.scalingFunction(layout.left),zIndex:theme.menu.list.zIndex,background:theme.menu.list.background,boxShadow:theme.menu.list.boxShadow,borderRadius:theme.menu.list.borderRadius},ref:menuRef},hasSubLabel&&react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_SubMenuLabel,style:{color:null===(_a=theme.menu.header)||void 0===_a?void 0:_a.color}},subLabel),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuListScrollView},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuList,style:{maxHeight,maxWidth},onWheel:handleScroll,ref:scrollRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuListVertical,style:{padding:hasSubLabel?"0px 0px 5px 0px":"5px 0px"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement("ul",{className:styles_MenuListItems},menu&&menu.map(((item,idx)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuItemComponent,{key:`${item.label}-${depth}-${idx}`,idx,item,currentWindow,depth,selectedPath,dispatch,onClick:e=>menuItemClick(e,idx,item,menu,dispatch,currentWindow)}))))))))};var MenuList$1=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuList,Object.assign({},props,{parentRef:ref}))));const Overlay=({top,onClick})=>{const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),click=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{onClick&&onClick(e)}),[onClick]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuOverlay,style:{background:theme.menu.overlay.background,opacity:theme.menu.overlay.opacity,top,zIndex:theme.menu.overlay.zIndex},onClick:click})},Button=({myRef,onOverlayClick,theme,label,ariaLabel,children,open,inactiveOpacity,focused,onClick,style,disabled,hideOverlay,onHover})=>{const bounds=useRect(myRef=null!=myRef?myRef:(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null)),hovering=useHoverWithRef(myRef);((ref,onClickAway,events=defaultEvents)=>{const savedCallback=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(onClickAway);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{savedCallback.current=onClickAway}),[onClickAway]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handler=event=>{const{current:el}=ref;el&&!el.contains(event.target)&&savedCallback.current(event)};for(const eventName of events)document.addEventListener(eventName,handler);return()=>{for(const eventName of events)document.removeEventListener(eventName,handler)}}),[events,ref])})(myRef,(()=>{open&&onOverlayClick()})),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{onHover&&onHover(hovering)}),[hovering]);const backgroundColor=((disabled,selected,hovering,theme)=>{if(!disabled){if(selected)return theme.active.background;if(hovering)return theme.hover.background}return theme.default.background})(disabled,open,hovering,theme),color=((disabled,open,theme)=>open&&!disabled?theme.active.color:theme.default.color)(disabled,open,theme),opacity=((disabled,focused,inActiveOpacity,theme)=>focused?disabled?theme.disabledOpacity:1:inActiveOpacity)(disabled,focused,inactiveOpacity,theme);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuButtonContainer,style:Object.assign(Object.assign({},null!=style?style:{}),{backgroundColor})},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuButtonWrapper},react__WEBPACK_IMPORTED_MODULE_0__.createElement("button",{className:styles_MenuButton,ref:myRef,style:{color,maxWidth:theme.maxWidth},onClick,tabIndex:0,"aria-haspopup":!0,"aria-label":ariaLabel},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuButtonLabelWrapper,style:{opacity,maxWidth:theme.maxWidth}},label))),open&&!hideOverlay&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Overlay,{top:bounds.bottom}),open&&children)};var Button$1=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button,Object.assign({},props,{myRef:ref}))));const MenuButton=({focused,currentWindow,item,altKey,myRef,style,idx,depth,selectedPath,dispatch,icon})=>{var _a,_b,_c,_d;const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),label=(l=>{const[label,setLabel]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(splitLabel(l));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setLabel(splitLabel(l))}),[l]),label})(item.label),onClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{myRef.current&&myRef.current.blur(),dispatch({type:"set",depth,selected:-1})}),[myRef.current]),onClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{item.disabled||dispatch({type:"button-set",depth,selected:idx})}),[idx,item.disabled]),onHover=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((hovering=>{dispatch({type:"hovering",hovering}),currentSelected(selectedPath,depth)>=0&&hovering&&onClick()}),[myRef.current,selectedPath,depth,onClick]),selected=currentSelected(selectedPath,depth)===idx,isSubMenu=isItemSubMenu(item),open=!(null!==(_a=null==item?void 0:item.disabled)&&void 0!==_a&&_a)&&isSubMenu&&selected,textDecoration=!item.disabled&&altKey?"underline":"none";return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Button$1,{ref:myRef,disabled:null!==(_b=item.disabled)&&void 0!==_b&&_b,open,theme:Object.assign({},theme.bar.button),focused,style,inactiveOpacity:theme.bar.inActiveOpacity,onClick,ariaLabel:null===(_c=item.label)||void 0===_c?void 0:_c.replace("&",""),label:null!=icon?icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:styles_MenuButtonLabel,"aria-hidden":"true"},label.before),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:styles_MenuButtonLabel,style:{textDecoration},"aria-hidden":"true"},label.letter),react__WEBPACK_IMPORTED_MODULE_0__.createElement("span",{className:styles_MenuButtonLabel,"aria-hidden":"true"},label.after)),onOverlayClick:onClose,onHover},react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuList$1,{key:depth,menu:null!==(_d=item.submenu)&&void 0!==_d?_d:[],ref:myRef,currentWindow,depth:depth+1,selectedPath,dispatch}))};var MenuButton$1=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuButton,Object.assign({},props,{myRef:ref}))));const initialState={selectedPath:[-1],altKey:!1,hovering:!1},menuReducer=(state,action)=>{switch(action.type){case"alt":return Object.assign(Object.assign({},state),{altKey:action.altKey});case"reset":return Object.assign(Object.assign({},state),{selectedPath:[-1]});case"set":return Object.assign(Object.assign({},state),{selectedPath:[...state.selectedPath.slice(0,action.depth),action.selected]});case"del":return Object.assign(Object.assign({},state),{selectedPath:state.selectedPath.slice(0,action.depth)});case"hovering":return Object.assign(Object.assign({},state),{hovering:action.hovering});case"button-set":case"hover-sub":return state.selectedPath[action.depth]===action.selected?Object.assign(Object.assign({},state),{selectedPath:[...state.selectedPath.slice(0,action.depth),-1]}):Object.assign(Object.assign({},state),{selectedPath:[...state.selectedPath.slice(0,action.depth),action.selected,-1]});default:return state}},overflowItem=menu=>({label:"...",submenu:menu}),HorizontalMenu=({menu,focused,currentWindow,menuBar,onOpen,onButtonHover})=>{var _a;const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),overflowRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),childRefs=useChildRefs(menu),overflow=((menu,menuBar,refs,overflowRef,isEnabled=!0)=>{var _a;const[overflow,setOverflow]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({menu:[],index:menu.length,hide:!0}),activeMenus=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null!==(_a=null==menu?void 0:menu.length)&&void 0!==_a?_a:0),menuBarRect=useRect(menuBar);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const availableSize=isEnabled?menuBarRect.width:1/0;let currentSize=0,full=!1;const prevMenusShown=activeMenus.current;let numMenusShown=0;if(null==refs||refs.forEach((mItem=>{const node=null==mItem?void 0:mItem.current;if(node)if(full)node.style.visibility="hidden";else{const size=node.offsetWidth;currentSize+size>availableSize?(full=!0,node.style.visibility="hidden"):(currentSize+=size,numMenusShown+=1,numMenusShown>prevMenusShown&&(node.style.visibility="visible"))}})),full){const overflowNode=null==overflowRef?void 0:overflowRef.current;if(overflowNode)for(;currentSize+overflowNode.offsetWidth>availableSize&&numMenusShown>0;){numMenusShown-=1;const item=refs[numMenusShown].current;currentSize-=item.offsetWidth,item.style.visibility="hidden"}setOverflow({menu:[...menu.slice(numMenusShown,menu.length)],index:numMenusShown,hide:!1})}else setOverflow({menu:[],index:menu.length,hide:!0});activeMenus.current=numMenusShown}),[menuBarRect.width,refs]),overflow})(menu,menuBar,childRefs,overflowRef,theme.enableOverflow),[fixedMenu,updateFixedMenu]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(immutableSplice(menu,overflow.index,0,overflowItem(overflow.menu))),width=useWidth(),prevWidth=usePrevious(width),[{selectedPath,altKey,hovering},dispatch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(menuReducer,initialState),isOpen=selectedPath[0]>=0;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{updateFixedMenu(immutableSplice(menu,overflow.index,0,overflowItem(overflow.menu)))}),[overflow]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{(!focused&&selectedPath[0]>=0||prevWidth!==width)&&dispatch({type:"reset"})}),[focused,width]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{null==onOpen||onOpen(isOpen)}),[isOpen,onOpen]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{null==onButtonHover||onButtonHover(hovering||altKey)}),[hovering,altKey,onButtonHover]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{let isSingleKeyPressed=!0,keysPressed=0,lastActive=null;const restoreFocus=()=>{var _a,_b,_c;return document.activeElement===(null===(_a=childRefs[0])||void 0===_a?void 0:_a.current)&&(null===(_c=null===(_b=childRefs[0])||void 0===_b?void 0:_b.current)||void 0===_c||_c.blur(),null==lastActive||lastActive.focus(),lastActive=null,!0)},onKeyDown=()=>{keysPressed+=1,isSingleKeyPressed=isSingleKeyPressed&&1===keysPressed},onKeyUp=e=>{var _a,_b;const isLastKeyReleased=1===keysPressed;if(keysPressed=Math.max(0,keysPressed-1),isLastKeyReleased)if(isSingleKeyPressed)if("Escape"!==e.key){if("Alt"===e.key){if(restoreFocus())return;return lastActive=document.activeElement,void(null===(_b=null===(_a=childRefs[0])||void 0===_a?void 0:_a.current)||void 0===_b||_b.focus())}}else restoreFocus();else isSingleKeyPressed=!0};return window.addEventListener("keydown",onKeyDown,true),window.addEventListener("keyup",onKeyUp,true),()=>{window.removeEventListener("keydown",onKeyDown,true),window.removeEventListener("keyup",onKeyUp,true)}}),[null===(_a=childRefs[0])||void 0===_a?void 0:_a.current,dispatch]),useAccessibility(fixedMenu,childRefs,selectedPath,dispatch,overflowRef,overflow,currentWindow),react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,fixedMenu.map(((menuItem,i)=>{const overflowButton=overflow.index===i,overflowedItem=i>overflow.index,currRef=overflowButton?overflowRef:childRefs[overflowedItem?i-1:i],style=overflowButton?{visibility:overflow.hide?"hidden":"visible"}:{};return react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuButton$1,{key:`${menuItem.label}-0-${i}`,ref:currRef,focused,idx:i,item:menuItem,currentWindow,style,depth:0,selectedPath,dispatch,altKey})})))},menuButton=menu=>({id:"menu-button",label:"Menu",submenu:menu}),VerticalMenu=({menu,focused,currentWindow,onOpen,onButtonHover})=>{var _a,_b;const[fixedMenu,updateFixedMenu]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([menuButton(menu)]),childRefs=useChildRefs(fixedMenu),width=useWidth(),prevWidth=usePrevious(width),[{selectedPath,hovering},dispatch]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(menuReducer,initialState),isOpen=selectedPath[0]>=0;return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{(!focused&&selectedPath[0]>=0||prevWidth!==width)&&dispatch({type:"reset"})}),[focused,width]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{updateFixedMenu([menuButton(menu)])}),[menu]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{null==onOpen||onOpen(isOpen)}),[isOpen,onOpen]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{null==onButtonHover||onButtonHover(hovering)}),[hovering,onButtonHover]),useAccessibility(fixedMenu,childRefs,selectedPath,dispatch,void 0,void 0,currentWindow),0===(null!==(_b=null===(_a=fixedMenu[0].submenu)||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0)?null:react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuButton$1,{ref:childRefs[0],focused,idx:0,item:fixedMenu[0],currentWindow,depth:0,selectedPath,dispatch,icon:react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuIcon,null),altKey:!1})},MenuBar=({menu,focused,currentWindow})=>{const{platform,menu:{style,autoHide}}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),menuBar=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),currentMenu=((platform,menu)=>{const[currentMenu,setMenu]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(buildMenu([...null!=menu?menu:[]],platform));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setMenu(buildMenu([...null!=menu?menu:[]],platform))}),[menu,platform]),currentMenu})(platform,menu),[open,setOpen]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),[hovering,setHovering]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),onOpen=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((open=>{setOpen(open)}),[setOpen]),onButtonHover=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((hovering=>{setHovering(hovering)}),[setHovering]);return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_MenuBar,role:"menubar",ref:menuBar,style:{opacity:!autoHide||hovering||open?1:0}},"vertical"===style?react__WEBPACK_IMPORTED_MODULE_0__.createElement(VerticalMenu,{menu:currentMenu,focused,currentWindow,onOpen,onButtonHover}):react__WEBPACK_IMPORTED_MODULE_0__.createElement(HorizontalMenu,{menu:currentMenu,menuBar,focused,currentWindow,onOpen,onButtonHover}))},getMargin=(margin,align,hasIcon,hasMenu,style)=>"left"===align?"left"===margin?"0px":"auto":"right"===align?"left"===margin?!hasIcon||"vertical"!==style&&hasMenu?"auto":"0px":"right"===margin?"0px":"auto":"center"===align?"left"!==margin||!hasIcon||hasMenu&&"vertical"!==style?"auto":"0px":"auto",Title=({focused,children,hasIcon,hasMenu})=>{const{bar:{height,title,inActiveOpacity},menu:{style}}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),{color,align,fontFamily,fontWeight}=title,marginLeft=getMargin("left",align,hasIcon,hasMenu,style),marginRight=getMargin("right",align,hasIcon,hasMenu,style),padding=((marginLeft,hasIcon,hasMenu,style)=>{if("0px"===marginLeft){if(!(hasIcon||hasMenu&&"stacked"!==style))return"0px 10px";if(!(hasIcon||hasMenu&&"stacked"!==style))return"0px 8px"}return"0px 6px"})(marginLeft,hasIcon,hasMenu,style),lineHeight="number"==typeof height?`${height}px`:height;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:styles_Title,style:{opacity:focused?1:inActiveOpacity,marginLeft,marginRight,padding,lineHeight,color,fontFamily,fontWeight}},children)};Title.propTypes={isWin:propTypes.bool,focused:propTypes.bool,children:propTypes.node};const Bar=({onDoubleClick,children,bottomBar,className})=>{const{platform,bar:{height,borderBottom,background,fontFamily,color},menu:{style}}=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),ref=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),dblClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e=>{e.target==ref.current&&onDoubleClick&&onDoubleClick(e)}),[ref.current,onDoubleClick]),isDarwin="darwin"===platform;return react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames(styles_Bar,className),ref,style:Object.assign({borderBottom:"stacked"!==style||bottomBar?borderBottom:"",background,color,height,fontFamily},isDarwin?{paddingLeft:"70px",paddingRight:"70px"}:{}),onDoubleClick:dblClick},children)},getMarginLeft=(vertical,hasTitle,align,platform)=>{if((vertical||"darwin"===platform)&&hasTitle&&("center"===align||"right"===align))return"auto"},Logo=({children,src,hasTitle})=>{var _a;const theme=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ThemeContext),vertical="vertical"===theme.menu.style,className=classnames({[styles_Logo]:!0,[styles_Vertical]:vertical}),style={width:theme.bar.icon.width,height:theme.bar.icon.height,marginLeft:getMarginLeft(vertical,hasTitle,null===(_a=theme.bar.title)||void 0===_a?void 0:_a.align,theme.platform)};return src&&""!==src?react__WEBPACK_IMPORTED_MODULE_0__.createElement("img",{className,src,style}):react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className,style},children)},TitleBar=({onMinimize,onMaximize,onClose,onDoubleClick,className,disableMaximize,disableMinimize,hideControls,platform,children,theme,menu,icon,iconSrc,title,maximized,currentWindow})=>{var _a,_b,_c,_d,_e;const focused=(()=>{const[focused,setFocused]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(document.hasFocus());return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const handleFocus=()=>{setFocused(!0)},handleBlur=()=>{setFocused(!1)};return window.addEventListener("focus",handleFocus),window.addEventListener("blur",handleBlur),()=>{window.removeEventListener("focus",handleFocus),window.removeEventListener("blur",handleBlur)}}),[]),focused})(),currentTheme=((overrides,platform="win32")=>{const[currentTheme,setTheme]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(mergeTheme(overrides,platform));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{setTheme(mergeTheme(overrides,platform))}),[overrides,platform]),currentTheme})(theme,platform),isDarwin="darwin"===platform,stacked="stacked"===(null===(_a=null==currentTheme?void 0:currentTheme.menu)||void 0===_a?void 0:_a.style),vertical="vertical"===(null===(_b=null==currentTheme?void 0:currentTheme.menu)||void 0===_b?void 0:_b.style),controlsRight="right"===(null===(_c=null==currentTheme?void 0:currentTheme.controls)||void 0===_c?void 0:_c.layout),hasIcon=!!icon||!!iconSrc,hasMenu=!isDarwin&&(null!==(_d=null==menu?void 0:menu.length)&&void 0!==_d?_d:0)>0,hasTitle=!(!title||""===title);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(ThemeContext.Provider,{value:currentTheme},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bar,{onDoubleClick,className},react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames(styles_ResizeHandle,styles_Top)}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{className:classnames(styles_ResizeHandle,styles_Left),style:{height:null===(_e=null==theme?void 0:theme.bar)||void 0===_e?void 0:_e.height}}),!isDarwin&&!controlsRight&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(WindowControls,{hideControls,focused,disableMaximize,disableMinimize,maximized,onMinimize,onMaximize,onClose}),!vertical&&hasIcon&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Logo,{src:iconSrc,hasTitle},icon),!isDarwin&&!stacked&&hasMenu&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuBar,{focused,menu,currentWindow}),vertical&&hasIcon&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Logo,{src:iconSrc,hasTitle},icon),react__WEBPACK_IMPORTED_MODULE_0__.createElement(Title,{focused,hasIcon,hasMenu},title),children,!isDarwin&&controlsRight&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(WindowControls,{hideControls,focused,disableMaximize,disableMinimize,maximized,onMinimize,onMaximize,onClose})),!isDarwin&&stacked&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(Bar,{bottomBar:!0},hasMenu&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(MenuBar,{focused,menu,currentWindow}))))}}}]);