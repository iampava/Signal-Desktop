(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[2606],{"./ts/components/CompositionArea.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AnnouncementsOnlyGroup:()=>AnnouncementsOnlyGroup,Attachments:()=>Attachments,Default:()=>Default,MessageRequest:()=>MessageRequest,NoFormatting:()=>NoFormatting,NoSpoilerFormatting:()=>NoSpoilerFormatting,PendingApproval:()=>PendingApproval,Quote:()=>CompositionArea_stories_Quote,QuoteWithPayment:()=>QuoteWithPayment,SmsOnly:()=>SmsOnly,SmsOnlyFetchingUuid:()=>SmsOnlyFetchingUuid,StartingText:()=>StartingText,StickerButton:()=>CompositionArea_stories_StickerButton,__namedExportsOrder:()=>__namedExportsOrder,default:()=>CompositionArea_stories});var react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/index.js"),MIME=__webpack_require__("./ts/types/MIME.ts"),get=__webpack_require__("./node_modules/lodash/get.js"),get_default=__webpack_require__.n(get),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),AudioRecorder=__webpack_require__("./ts/types/AudioRecorder.ts"),Spinner=__webpack_require__("./ts/components/Spinner.tsx"),EmojiButton=__webpack_require__("./ts/components/emoji/EmojiButton.tsx"),StickerButton=__webpack_require__("./ts/components/stickers/StickerButton.tsx"),CompositionInput=__webpack_require__("./ts/components/CompositionInput.tsx"),MessageRequestActions=__webpack_require__("./ts/components/conversation/MessageRequestActions.tsx"),GroupV1DisabledActions=__webpack_require__("./ts/components/conversation/GroupV1DisabledActions.tsx"),GroupV2PendingApprovalActions=__webpack_require__("./ts/components/conversation/GroupV2PendingApprovalActions.tsx"),Intl=__webpack_require__("./ts/components/Intl.tsx"),Modal=__webpack_require__("./ts/components/Modal.tsx"),ConversationListItem=__webpack_require__("./ts/components/conversationList/ConversationListItem.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AnnouncementsOnlyGroupBanner(_ref){var groupAdmins=_ref.groupAdmins,i18n=_ref.i18n,showConversation=_ref.showConversation,theme=_ref.theme,_useState2=_slicedToArray((0,react.useState)(!1),2),isShowingAdmins=_useState2[0],setIsShowingAdmins=_useState2[1];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[isShowingAdmins&&(0,jsx_runtime.jsx)(Modal.u_,{modalName:"AnnouncmentsOnlyGroupBanner",i18n,onClose:function(){return setIsShowingAdmins(!1)},title:i18n("icu:AnnouncementsOnlyGroupBanner--modal"),children:groupAdmins.map((function(admin){return(0,jsx_runtime.jsx)(ConversationListItem.X,Object.assign({},admin,{draftPreview:void 0,i18n,lastMessage:void 0,lastUpdated:void 0,onClick:function(){showConversation({conversationId:admin.id})},theme}))}))}),(0,jsx_runtime.jsx)("div",{className:"AnnouncementsOnlyGroupBanner__banner",children:(0,jsx_runtime.jsx)(Intl.R,{i18n,id:"icu:AnnouncementsOnlyGroupBanner--announcements-only",components:{admins:(0,jsx_runtime.jsx)("button",{className:"AnnouncementsOnlyGroupBanner__banner--admins",type:"button",onClick:function(){return setIsShowingAdmins(!0)},children:i18n("icu:AnnouncementsOnlyGroupBanner--admins")})}})})]})}var AttachmentList=__webpack_require__("./ts/components/conversation/AttachmentList.tsx"),Attachment=__webpack_require__("./ts/types/Attachment.ts"),ToastVoiceNoteMustBeOnlyAttachment=__webpack_require__("./ts/components/ToastVoiceNoteMustBeOnlyAttachment.tsx"),useKeyboardShortcuts=__webpack_require__("./ts/hooks/useKeyboardShortcuts.tsx");function AudioCapture_slicedToArray(arr,i){return function AudioCapture_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AudioCapture_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AudioCapture_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AudioCapture_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AudioCapture_arrayLikeToArray(o,minLen)}(arr,i)||function AudioCapture_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AudioCapture_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AudioCapture(_ref){var conversationId=_ref.conversationId,draftAttachments=_ref.draftAttachments,i18n=_ref.i18n,startRecording=_ref.startRecording,_useState2=AudioCapture_slicedToArray((0,react.useState)(!1),2),showOnlyAttachmentToast=_useState2[0],setShowOnlyAttachmentToast=_useState2[1],recordConversation=(0,react.useCallback)((function(){return startRecording(conversationId)}),[conversationId,startRecording]),startRecordingShortcut=(0,useKeyboardShortcuts.py)(recordConversation);(0,useKeyboardShortcuts.aL)(startRecordingShortcut);var handleCloseToast=(0,react.useCallback)((function(){setShowOnlyAttachmentToast(!1)}),[]),handleClick=(0,react.useCallback)((function(){draftAttachments.length?setShowOnlyAttachmentToast(!0):startRecording(conversationId)}),[conversationId,draftAttachments,setShowOnlyAttachmentToast,startRecording]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"AudioCapture",children:(0,jsx_runtime.jsx)("button",{"aria-label":i18n("icu:voiceRecording--start"),className:"AudioCapture__microphone",onClick:handleClick,title:i18n("icu:voiceRecording--start"),type:"button"})}),showOnlyAttachmentToast&&(0,jsx_runtime.jsx)(ToastVoiceNoteMustBeOnlyAttachment.$,{i18n,onClose:handleCloseToast})]})}var GoogleChrome=__webpack_require__("./ts/util/GoogleChrome.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return CompositionUpload_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function CompositionUpload_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CompositionUpload_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CompositionUpload_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CompositionUpload_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var CompositionUpload=(0,react.forwardRef)((function CompositionUploadInner(_ref,ref){var conversationId=_ref.conversationId,draftAttachments=_ref.draftAttachments,processAttachments=_ref.processAttachments,acceptContentTypes=draftAttachments.some((function(attachment){return(0,Attachment.VV)(attachment)||(0,Attachment.fr)(attachment)}))?[].concat(_toConsumableArray((0,GoogleChrome.Do)()),_toConsumableArray((0,GoogleChrome.E0)())):null;return(0,jsx_runtime.jsx)("input",{hidden:!0,multiple:!0,onChange:async function(event){var files=event.target.files||[];await processAttachments({conversationId,files:Array.from(files)})},ref,type:"file",accept:null==acceptContentTypes?void 0:acceptContentTypes.join(",")})})),MandatoryProfileSharingActions=__webpack_require__("./ts/components/conversation/MandatoryProfileSharingActions.tsx"),MediaQualitySelector=__webpack_require__("./ts/components/MediaQualitySelector.tsx"),Quote=__webpack_require__("./ts/components/conversation/Quote.tsx"),lib=__webpack_require__("./ts/components/stickers/lib.ts"),MediaEditor=__webpack_require__("./ts/components/MediaEditor.tsx"),keyboardLayout=__webpack_require__("./ts/services/keyboardLayout.ts"),usePrevious=__webpack_require__("./ts/hooks/usePrevious.ts"),Panels=__webpack_require__("./ts/types/Panels.ts"),useEscapeHandling=__webpack_require__("./ts/hooks/useEscapeHandling.ts"),Toast=__webpack_require__("./ts/types/Toast.tsx");function SelectModeActions(_ref){var selectedMessageIds=_ref.selectedMessageIds,onExitSelectMode=_ref.onExitSelectMode,onDeleteMessages=_ref.onDeleteMessages,onForwardMessages=_ref.onForwardMessages,showToast=_ref.showToast,i18n=_ref.i18n,hasSelectedMessages=selectedMessageIds.length>=1,tooManyMessagesToForward=selectedMessageIds.length>30,canForward=hasSelectedMessages&&!tooManyMessagesToForward,canDelete=hasSelectedMessages;return(0,jsx_runtime.jsxs)("div",{className:"SelectModeActions",children:[(0,jsx_runtime.jsx)("button",{type:"button",className:"SelectModeActions__button",onClick:onExitSelectMode,"aria-label":i18n("icu:SelectModeActions--exitSelectMode"),children:(0,jsx_runtime.jsx)("span",{role:"presentation",className:"SelectModeActions__icon SelectModeActions__icon--exitSelectMode"})}),(0,jsx_runtime.jsx)("div",{className:"SelectModeActions__selectedMessages",children:i18n("icu:SelectModeActions--selectedMessages",{count:selectedMessageIds.length})}),(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("SelectModeActions__button",{"SelectModeActions__button--disabled":!canDelete}),disabled:!canDelete,onClick:onDeleteMessages,"aria-label":i18n("icu:SelectModeActions--deleteSelectedMessages"),children:(0,jsx_runtime.jsx)("span",{role:"presentation",className:"SelectModeActions__icon SelectModeActions__icon--deleteSelectedMessages"})}),(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("SelectModeActions__button",{"SelectModeActions__button--disabled":!canForward}),"aria-disabled":!canForward,onClick:function(){canForward?onForwardMessages():tooManyMessagesToForward&&showToast({toastType:Toast.p.TooManyMessagesToForward})},"aria-label":i18n("icu:SelectModeActions--forwardSelectedMessages"),children:(0,jsx_runtime.jsx)("span",{role:"presentation",className:"SelectModeActions__icon SelectModeActions__icon--forwardSelectedMessages"})})]})}function CompositionArea_slicedToArray(arr,i){return function CompositionArea_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CompositionArea_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function CompositionArea_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CompositionArea_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CompositionArea_arrayLikeToArray(o,minLen)}(arr,i)||function CompositionArea_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CompositionArea_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function CompositionArea(_ref){var addAttachment=_ref.addAttachment,conversationId=_ref.conversationId,discardEditMessage=_ref.discardEditMessage,draftEditMessage=_ref.draftEditMessage,focusCounter=_ref.focusCounter,i18n=_ref.i18n,imageToBlurHash=_ref.imageToBlurHash,isDisabled=_ref.isDisabled,isSignalConversation=_ref.isSignalConversation,messageCompositionId=_ref.messageCompositionId,showToast=_ref.showToast,pushPanelForConversation=_ref.pushPanelForConversation,processAttachments=_ref.processAttachments,removeAttachment=_ref.removeAttachment,sendEditedMessage=_ref.sendEditedMessage,sendMultiMediaMessage=_ref.sendMultiMediaMessage,setComposerFocus=_ref.setComposerFocus,setQuoteByMessageId=_ref.setQuoteByMessageId,theme=_ref.theme,draftAttachments=_ref.draftAttachments,onClearAttachments=_ref.onClearAttachments,recordingState=_ref.recordingState,startRecording=_ref.startRecording,linkPreviewLoading=_ref.linkPreviewLoading,linkPreviewResult=_ref.linkPreviewResult,onCloseLinkPreview=_ref.onCloseLinkPreview,quotedMessageId=_ref.quotedMessageId,quotedMessageProps=_ref.quotedMessageProps,quotedMessageAuthorUuid=_ref.quotedMessageAuthorUuid,quotedMessageSentAt=_ref.quotedMessageSentAt,scrollToMessage=_ref.scrollToMessage,setMediaQualitySetting=_ref.setMediaQualitySetting,shouldSendHighQualityAttachments=_ref.shouldSendHighQualityAttachments,clearQuotedMessage=_ref.clearQuotedMessage,draftBodyRanges=_ref.draftBodyRanges,draftText=_ref.draftText,getPreferredBadge=_ref.getPreferredBadge,getQuotedMessage=_ref.getQuotedMessage,isFormattingSpoilersEnabled=_ref.isFormattingSpoilersEnabled,isFormattingEnabled=_ref.isFormattingEnabled,onEditorStateChange=_ref.onEditorStateChange,onTextTooLong=_ref.onTextTooLong,sendCounter=_ref.sendCounter,sortedGroupMembers=_ref.sortedGroupMembers,onPickEmoji=_ref.onPickEmoji,onSetSkinTone=_ref.onSetSkinTone,recentEmojis=_ref.recentEmojis,skinTone=_ref.skinTone,knownPacks=_ref.knownPacks,receivedPacks=_ref.receivedPacks,installedPack=_ref.installedPack,installedPacks=_ref.installedPacks,blessedPacks=_ref.blessedPacks,recentStickers=_ref.recentStickers,clearInstalledStickerPack=_ref.clearInstalledStickerPack,sendStickerMessage=_ref.sendStickerMessage,clearShowIntroduction=_ref.clearShowIntroduction,showPickerHint=_ref.showPickerHint,clearShowPickerHint=_ref.clearShowPickerHint,acceptedMessageRequest=_ref.acceptedMessageRequest,areWePending=_ref.areWePending,areWePendingApproval=_ref.areWePendingApproval,conversationType=_ref.conversationType,groupVersion=_ref.groupVersion,isBlocked=_ref.isBlocked,isMissingMandatoryProfileSharing=_ref.isMissingMandatoryProfileSharing,left=_ref.left,messageRequestsEnabled=_ref.messageRequestsEnabled,removalStage=_ref.removalStage,acceptConversation=_ref.acceptConversation,blockConversation=_ref.blockConversation,blockAndReportSpam=_ref.blockAndReportSpam,deleteConversation=_ref.deleteConversation,title=_ref.title,isGroupV1AndDisabled=_ref.isGroupV1AndDisabled,showGV2MigrationDialog=_ref.showGV2MigrationDialog,announcementsOnly=_ref.announcementsOnly,areWeAdmin=_ref.areWeAdmin,groupAdmins=_ref.groupAdmins,cancelJoinRequest=_ref.cancelJoinRequest,showConversation=_ref.showConversation,isSMSOnly=_ref.isSMSOnly,isFetchingUUID=_ref.isFetchingUUID,renderSmartCompositionRecording=_ref.renderSmartCompositionRecording,renderSmartCompositionRecordingDraft=_ref.renderSmartCompositionRecordingDraft,selectedMessageIds=_ref.selectedMessageIds,toggleSelectMode=_ref.toggleSelectMode,toggleForwardMessagesModal=_ref.toggleForwardMessagesModal,_useState2=CompositionArea_slicedToArray((0,react.useState)(!1),2),dirty=_useState2[0],setDirty=_useState2[1],_useState4=CompositionArea_slicedToArray((0,react.useState)(!1),2),large=_useState4[0],setLarge=_useState4[1],_useState6=CompositionArea_slicedToArray((0,react.useState)(),2),attachmentToEdit=_useState6[0],setAttachmentToEdit=_useState6[1],inputApiRef=(0,react.useRef)(),emojiButtonRef=(0,react.useRef)(),fileInputRef=(0,react.useRef)(null),handleForceSend=(0,react.useCallback)((function(){setLarge(!1),inputApiRef.current&&inputApiRef.current.submit()}),[inputApiRef,setLarge]),draftEditMessageBody=null==draftEditMessage?void 0:draftEditMessage.body,editedMessageId=null==draftEditMessage?void 0:draftEditMessage.targetMessageId,handleSubmit=(0,react.useCallback)((function(message,bodyRanges,timestamp){var _emojiButtonRef$curre;null===(_emojiButtonRef$curre=emojiButtonRef.current)||void 0===_emojiButtonRef$curre||_emojiButtonRef$curre.close(),editedMessageId?sendEditedMessage(conversationId,{bodyRanges,message,quoteSentAt:quotedMessageSentAt,quoteAuthorUuid:quotedMessageAuthorUuid,targetMessageId:editedMessageId}):sendMultiMediaMessage(conversationId,{draftAttachments,bodyRanges,message,timestamp}),setLarge(!1)}),[conversationId,draftAttachments,editedMessageId,quotedMessageSentAt,quotedMessageAuthorUuid,sendEditedMessage,sendMultiMediaMessage,setLarge]),launchAttachmentPicker=(0,react.useCallback)((function(){var fileInput=fileInputRef.current;fileInput&&(fileInput.value="",fileInput.click())}),[]);var attachFileShortcut=(0,useKeyboardShortcuts.dn)(launchAttachmentPicker);(0,useKeyboardShortcuts.aL)(attachFileShortcut);var previousFocusCounter=(0,usePrevious.D)(focusCounter,focusCounter);(0,react.useEffect)((function(){inputApiRef.current&&inputApiRef.current.focus()}),[]),(0,react.useEffect)((function(){focusCounter!==previousFocusCounter&&inputApiRef.current&&inputApiRef.current.focus()}),[inputApiRef,focusCounter,previousFocusCounter]);var withStickers=(0,lib.Q)({knownPacks,blessedPacks,installedPacks,receivedPacks})>0,previousMessageCompositionId=(0,usePrevious.D)(messageCompositionId,messageCompositionId),previousSendCounter=(0,usePrevious.D)(sendCounter,sendCounter);(0,react.useEffect)((function(){inputApiRef.current&&(previousMessageCompositionId===messageCompositionId&&previousSendCounter===sendCounter||inputApiRef.current.reset())}),[messageCompositionId,sendCounter,previousMessageCompositionId,previousSendCounter]);var insertEmoji=(0,react.useCallback)((function(e){inputApiRef.current&&(inputApiRef.current.insertEmoji(e),onPickEmoji(e))}),[inputApiRef,onPickEmoji]),previousConversationId=(0,usePrevious.D)(conversationId,conversationId);(0,react.useEffect)((function(){var _inputApiRef$current2,_inputApiRef$current;conversationId!==previousConversationId&&(draftText?null===(_inputApiRef$current2=inputApiRef.current)||void 0===_inputApiRef$current2||_inputApiRef$current2.setContents(draftText,draftBodyRanges,!0):null===(_inputApiRef$current=inputApiRef.current)||void 0===_inputApiRef$current||_inputApiRef$current.setContents(""))}),[conversationId,draftBodyRanges,draftText,previousConversationId]);var editHistoryLength=null==draftEditMessage?void 0:draftEditMessage.editHistoryLength,hasEditHistoryChanged=(0,usePrevious.D)(editHistoryLength,editHistoryLength)!==editHistoryLength,hasEditedMessageChanged=(0,usePrevious.D)(editedMessageId,editedMessageId)!==editedMessageId,hasEditDraftChanged=hasEditHistoryChanged||hasEditedMessageChanged;(0,react.useEffect)((function(){var _inputApiRef$current3;hasEditDraftChanged&&(null===(_inputApiRef$current3=inputApiRef.current)||void 0===_inputApiRef$current3||_inputApiRef$current3.setContents(null!=draftEditMessageBody?draftEditMessageBody:"",draftBodyRanges,!0))}),[draftBodyRanges,draftEditMessageBody,hasEditDraftChanged]);var handleToggleLarge=(0,react.useCallback)((function(){setLarge((function(l){return!l}))}),[setLarge]),shouldShowMicrophone=!(large||draftAttachments.length||draftText||draftEditMessage),showMediaQualitySelector=draftAttachments.some(Attachment.VV),leftHandSideButtonsFragment=(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)(EmojiButton.K,{emojiButtonApi:emojiButtonRef,i18n,doSend:handleForceSend,onPickEmoji:insertEmoji,onClose:function(){return setComposerFocus(conversationId)},recentEmojis,skinTone,onSetSkinTone})}),showMediaQualitySelector?(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)(MediaQualitySelector.i,{conversationId,i18n,isHighQuality:shouldSendHighQualityAttachments,onSelectQuality:setMediaQualitySetting})}):null]}),micButtonFragment=shouldShowMicrophone?(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)(AudioCapture,{conversationId,draftAttachments,i18n,startRecording})}):null,editMessageFragment=draftEditMessage?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[large&&(0,jsx_runtime.jsx)("div",{className:"CompositionArea__placeholder"}),(0,jsx_runtime.jsxs)("div",{className:"CompositionArea__button-cell",children:[(0,jsx_runtime.jsx)("button",{"aria-label":i18n("icu:CompositionArea__edit-action--discard"),className:"CompositionArea__edit-button CompositionArea__edit-button--discard",onClick:function(){return discardEditMessage(conversationId)},type:"button"}),(0,jsx_runtime.jsx)("button",{"aria-label":i18n("icu:CompositionArea__edit-action--send"),className:"CompositionArea__edit-button CompositionArea__edit-button--accept",onClick:function(){var _inputApiRef$current4;return null===(_inputApiRef$current4=inputApiRef.current)||void 0===_inputApiRef$current4?void 0:_inputApiRef$current4.submit()},type:"button"})]})]}):null,isRecording=recordingState===AudioRecorder.S.Recording,attButton=draftEditMessage||linkPreviewResult||isRecording?void 0:(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)("button",{type:"button",className:"CompositionArea__attach-file",onClick:launchAttachmentPicker,"aria-label":i18n("icu:CompositionArea--attach-file")})}),sendButtonFragment=draftEditMessage?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"CompositionArea__placeholder"}),(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)("button",{type:"button",className:"CompositionArea__send-button",onClick:handleForceSend,"aria-label":i18n("icu:sendMessageToContact")})})]}),stickerButtonPlacement=large?"top-start":"top-end",stickerButtonFragment=!draftEditMessage&&withStickers?(0,jsx_runtime.jsx)("div",{className:"CompositionArea__button-cell",children:(0,jsx_runtime.jsx)(StickerButton.q,{i18n,knownPacks,receivedPacks,installedPack,installedPacks,blessedPacks,recentStickers,clearInstalledStickerPack,onClickAddPack:function(){return pushPanelForConversation({type:Panels.w.StickerManager})},onPickSticker:function(packId,stickerId){return sendStickerMessage(conversationId,{packId,stickerId})},clearShowIntroduction,showPickerHint,clearShowPickerHint,position:stickerButtonPlacement})}):null;(0,react.useEffect)((function(){var handler=function(e){var shiftKey=e.shiftKey,ctrlKey=e.ctrlKey,metaKey=e.metaKey,key=keyboardLayout.P(e),targetKey="k"===key||"K"===key,commandKey="darwin"===get_default()(window,"platform")&&metaKey,controlKey="darwin"!==get_default()(window,"platform")&&ctrlKey;targetKey&&shiftKey&&(commandKey||controlKey)&&(e.preventDefault(),setLarge((function(x){return!x})))};return document.addEventListener("keydown",handler),function(){document.removeEventListener("keydown",handler)}}),[setLarge]);var handleRecordingBeforeSend=(0,react.useCallback)((function(){var _emojiButtonRef$curre2;null===(_emojiButtonRef$curre2=emojiButtonRef.current)||void 0===_emojiButtonRef$curre2||_emojiButtonRef$curre2.close()}),[emojiButtonRef]),clearQuote=(0,react.useCallback)((function(){quotedMessageId&&setQuoteByMessageId(conversationId,void 0),draftEditMessage&&discardEditMessage(conversationId)}),[conversationId,discardEditMessage,draftEditMessage,quotedMessageId,setQuoteByMessageId]);if((0,useEscapeHandling.w)(clearQuote),isSignalConversation)return(0,jsx_runtime.jsx)("div",{});if(null!=selectedMessageIds)return(0,jsx_runtime.jsx)(SelectModeActions,{i18n,selectedMessageIds,onExitSelectMode:function(){toggleSelectMode(!1)},onDeleteMessages:function(){window.reduxActions.globalModals.toggleDeleteMessagesModal({conversationId,messageIds:selectedMessageIds,onDelete:function(){toggleSelectMode(!1)}})},onForwardMessages:function(){selectedMessageIds.length>0&&toggleForwardMessagesModal(selectedMessageIds,(function(){toggleSelectMode(!1)}))},showToast});if(isBlocked||areWePending||messageRequestsEnabled&&!acceptedMessageRequest&&"justNotification"!==removalStage)return(0,jsx_runtime.jsx)(MessageRequestActions.r,{acceptConversation,blockAndReportSpam,blockConversation,conversationId,conversationType,deleteConversation,i18n,isBlocked,isHidden:void 0!==removalStage,title});if("direct"===conversationType&&isSMSOnly)return(0,jsx_runtime.jsx)("div",{className:classnames_default()(["CompositionArea","CompositionArea--sms-only",isFetchingUUID?"CompositionArea--pending":null]),children:isFetchingUUID?(0,jsx_runtime.jsx)(Spinner.$j,{ariaLabel:i18n("icu:CompositionArea--sms-only__spinner-label"),role:"presentation",moduleClassName:"module-image-spinner",svgSize:"small"}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("h2",{className:"CompositionArea--sms-only__title",children:i18n("icu:CompositionArea--sms-only__title")}),(0,jsx_runtime.jsx)("p",{className:"CompositionArea--sms-only__body",children:i18n("icu:CompositionArea--sms-only__body")})]})});if(!left&&("direct"===conversationType&&"justNotification"!==removalStage||"group"===conversationType&&1===groupVersion)&&isMissingMandatoryProfileSharing)return(0,jsx_runtime.jsx)(MandatoryProfileSharingActions.O,{acceptConversation,blockAndReportSpam,blockConversation,conversationId,conversationType,deleteConversation,i18n,title});if(!left&&isGroupV1AndDisabled)return(0,jsx_runtime.jsx)(GroupV1DisabledActions.r,{conversationId,i18n,showGV2MigrationDialog});if(areWePendingApproval)return(0,jsx_runtime.jsx)(GroupV2PendingApprovalActions.A,{cancelJoinRequest,conversationId,i18n});if(announcementsOnly&&!areWeAdmin)return(0,jsx_runtime.jsx)(AnnouncementsOnlyGroupBanner,{groupAdmins,i18n,showConversation,theme});if(isRecording)return renderSmartCompositionRecording({onBeforeSend:handleRecordingBeforeSend});if(1===draftAttachments.length&&(0,Attachment.CZ)(draftAttachments[0])){var voiceNoteAttachment=draftAttachments[0];if(!voiceNoteAttachment.pending&&voiceNoteAttachment.url)return renderSmartCompositionRecordingDraft({voiceNoteAttachment})}return(0,jsx_runtime.jsxs)("div",{className:"CompositionArea",children:[attachmentToEdit&&"url"in attachmentToEdit&&attachmentToEdit.url&&(0,jsx_runtime.jsx)(MediaEditor.W,{i18n,imageSrc:attachmentToEdit.url,imageToBlurHash,isSending:!1,onClose:function(){return setAttachmentToEdit(void 0)},onDone:function(_ref2){var data=_ref2.data,contentType=_ref2.contentType,blurHash=_ref2.blurHash,newAttachment=Object.assign({},attachmentToEdit,{contentType,blurHash,data,size:data.byteLength});addAttachment(conversationId,newAttachment),setAttachmentToEdit(void 0)},installedPacks,recentStickers}),(0,jsx_runtime.jsx)("div",{className:"CompositionArea__toggle-large",children:(0,jsx_runtime.jsx)("button",{type:"button",className:classnames_default()("CompositionArea__toggle-large__button",large?"CompositionArea__toggle-large__button--large-active":null),tabIndex:-1,onClick:handleToggleLarge,"aria-label":i18n("icu:CompositionArea--expand")})}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("CompositionArea__row","CompositionArea__row--column"),children:[quotedMessageProps&&(0,jsx_runtime.jsx)("div",{className:"quote-wrapper",children:(0,jsx_runtime.jsx)(Quote.p,Object.assign({isCompose:!0},quotedMessageProps,{i18n,onClick:quotedMessageId?function(){return scrollToMessage(conversationId,quotedMessageId)}:void 0,onClose:function(){setQuoteByMessageId(conversationId,void 0)}}))}),draftAttachments.length?(0,jsx_runtime.jsx)("div",{className:"CompositionArea__attachment-list",children:(0,jsx_runtime.jsx)(AttachmentList.f,{attachments:draftAttachments,canEditImages:!0,i18n,onAddAttachment:launchAttachmentPicker,onClickAttachment:function maybeEditAttachment(attachment){(0,GoogleChrome.T)(attachment.contentType)&&setAttachmentToEdit(attachment)},onClose:function(){return onClearAttachments(conversationId)},onCloseAttachment:function(attachment){attachment.path&&removeAttachment(conversationId,attachment.path)}})}):null]}),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("CompositionArea__row",large?"CompositionArea__row--padded":null),children:[large?null:leftHandSideButtonsFragment,(0,jsx_runtime.jsx)("div",{className:classnames_default()("CompositionArea__input",large?"CompositionArea__input--padded":null),children:(0,jsx_runtime.jsx)(CompositionInput.D,{clearQuotedMessage,conversationId,disabled:isDisabled,draftBodyRanges,draftEditMessage,draftText,getPreferredBadge,getQuotedMessage,i18n,inputApi:inputApiRef,isFormattingSpoilersEnabled,isFormattingEnabled,large,linkPreviewLoading,linkPreviewResult,onCloseLinkPreview,onDirtyChange:setDirty,onEditorStateChange,onPickEmoji,onSubmit:handleSubmit,onTextTooLong,sendCounter,skinTone,sortedGroupMembers,theme})}),large?null:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[stickerButtonFragment,dirty?null:micButtonFragment,editMessageFragment,attButton]})]}),large?(0,jsx_runtime.jsxs)("div",{className:classnames_default()("CompositionArea__row","CompositionArea__row--control-row"),children:[leftHandSideButtonsFragment,stickerButtonFragment,attButton,dirty?null:micButtonFragment,editMessageFragment,dirty||!shouldShowMicrophone?sendButtonFragment:null]}):null,(0,jsx_runtime.jsx)(CompositionUpload,{conversationId,draftAttachments,i18n,processAttachments,ref:fileInputRef})]})}SelectModeActions.displayName="SelectModeActions",CompositionArea.displayName="CompositionArea";var setupI18n=__webpack_require__("./ts/util/setupI18n.ts"),messages=__webpack_require__("./_locales/en/messages.json"),StorybookThemeContext=__webpack_require__("./.storybook/StorybookThemeContext.js"),fakeAttachment=__webpack_require__("./ts/test-both/helpers/fakeAttachment.ts"),Fixtures=__webpack_require__("./ts/storybook/Fixtures.ts"),Colors=__webpack_require__("./ts/types/Colors.ts"),getDefaultConversation=__webpack_require__("./ts/test-both/helpers/getDefaultConversation.ts"),Payment=__webpack_require__("./ts/types/Payment.ts"),i18n=(0,setupI18n.E5)("en",messages);const CompositionArea_stories={title:"Components/CompositionArea",decorators:[function(storyFn){return(0,jsx_runtime.jsx)("div",{className:"file-input",children:storyFn()})}]};var useProps=function(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{addAttachment:(0,esm.action)("addAttachment"),conversationId:"123",discardEditMessage:(0,esm.action)("discardEditMessage"),focusCounter:0,sendCounter:0,i18n,isDisabled:!1,isFormattingSpoilersEnabled:!1!==overrideProps.isFormattingSpoilersEnabled||overrideProps.isFormattingSpoilersEnabled,isFormattingEnabled:!1!==overrideProps.isFormattingEnabled||overrideProps.isFormattingEnabled,messageCompositionId:"456",sendEditedMessage:(0,esm.action)("sendEditedMessage"),sendMultiMediaMessage:(0,esm.action)("sendMultiMediaMessage"),processAttachments:(0,esm.action)("processAttachments"),removeAttachment:(0,esm.action)("removeAttachment"),theme:react.useContext(StorybookThemeContext.x),setComposerFocus:(0,esm.action)("setComposerFocus"),setQuoteByMessageId:(0,esm.action)("setQuoteByMessageId"),showToast:(0,esm.action)("showToast"),draftAttachments:overrideProps.draftAttachments||[],onClearAttachments:(0,esm.action)("onClearAttachments"),cancelRecording:(0,esm.action)("cancelRecording"),completeRecording:(0,esm.action)("completeRecording"),errorRecording:(0,esm.action)("errorRecording"),recordingState:(0,dist.select)("recordingState",AudioRecorder.S,overrideProps.recordingState||AudioRecorder.S.Idle),startRecording:(0,esm.action)("startRecording"),linkPreviewLoading:Boolean(overrideProps.linkPreviewLoading),linkPreviewResult:overrideProps.linkPreviewResult,onCloseLinkPreview:(0,esm.action)("onCloseLinkPreview"),quotedMessageProps:overrideProps.quotedMessageProps,scrollToMessage:(0,esm.action)("scrollToMessage"),imageToBlurHash:async function(){return"LDA,FDBnm+I=p{tkIUI;~UkpELV]"},setMediaQualitySetting:(0,esm.action)("setMediaQualitySetting"),shouldSendHighQualityAttachments:Boolean(overrideProps.shouldSendHighQualityAttachments),onEditorStateChange:(0,esm.action)("onEditorStateChange"),onTextTooLong:(0,esm.action)("onTextTooLong"),draftText:overrideProps.draftText||void 0,clearQuotedMessage:(0,esm.action)("clearQuotedMessage"),getPreferredBadge:function(){},getQuotedMessage:(0,esm.action)("getQuotedMessage"),sortedGroupMembers:[],onPickEmoji:(0,esm.action)("onPickEmoji"),onSetSkinTone:(0,esm.action)("onSetSkinTone"),recentEmojis:[],skinTone:1,knownPacks:overrideProps.knownPacks||[],receivedPacks:[],installedPacks:[],blessedPacks:[],recentStickers:[],clearInstalledStickerPack:(0,esm.action)("clearInstalledStickerPack"),pushPanelForConversation:(0,esm.action)("pushPanelForConversation"),sendStickerMessage:(0,esm.action)("sendStickerMessage"),clearShowIntroduction:(0,esm.action)("clearShowIntroduction"),showPickerHint:!1,clearShowPickerHint:(0,esm.action)("clearShowPickerHint"),conversationType:"direct",acceptConversation:(0,esm.action)("acceptConversation"),blockConversation:(0,esm.action)("blockConversation"),blockAndReportSpam:(0,esm.action)("blockAndReportSpam"),deleteConversation:(0,esm.action)("deleteConversation"),messageRequestsEnabled:(0,dist.boolean)("messageRequestsEnabled",overrideProps.messageRequestsEnabled||!1),title:"",showGV2MigrationDialog:(0,esm.action)("showGV2MigrationDialog"),announcementsOnly:(0,dist.boolean)("announcementsOnly",Boolean(overrideProps.announcementsOnly)),areWeAdmin:(0,dist.boolean)("areWeAdmin",Boolean(overrideProps.areWeAdmin)),areWePendingApproval:(0,dist.boolean)("areWePendingApproval",Boolean(overrideProps.areWePendingApproval)),groupAdmins:[],cancelJoinRequest:(0,esm.action)("cancelJoinRequest"),showConversation:(0,esm.action)("showConversation"),isSMSOnly:overrideProps.isSMSOnly||!1,isFetchingUUID:overrideProps.isFetchingUUID||!1,renderSmartCompositionRecording:function(_){return(0,jsx_runtime.jsx)("div",{children:"RECORDING"})},renderSmartCompositionRecordingDraft:function(_){return(0,jsx_runtime.jsx)("div",{children:"RECORDING DRAFT"})},selectedMessageIds:void 0,toggleSelectMode:(0,esm.action)("toggleSelectMode"),toggleForwardMessagesModal:(0,esm.action)("toggleForwardMessagesModal")}};function Default(){var props=useProps();return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function StartingText(){var props=useProps({draftText:"here's some starting text"});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function CompositionArea_stories_StickerButton(){var props=useProps({knownPacks:[{}]});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function MessageRequest(){var props=useProps({messageRequestsEnabled:!0});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function SmsOnlyFetchingUuid(){var props=useProps({isSMSOnly:!0,isFetchingUUID:!0});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function SmsOnly(){var props=useProps({isSMSOnly:!0});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function Attachments(){var props=useProps({draftAttachments:[(0,fakeAttachment.C4)({contentType:MIME._l,url:Fixtures.L$})]});return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},props))}function PendingApproval(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({areWePendingApproval:!0})))}function AnnouncementsOnlyGroup(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({announcementsOnly:!0,areWeAdmin:!1})))}function CompositionArea_stories_Quote(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({quotedMessageProps:{text:"something",conversationColor:Colors.cU[10],conversationTitle:(0,getDefaultConversation.E$)().title,isGiftBadge:!1,isViewOnce:!1,referencedMessageNotFound:!1,authorTitle:"Someone",isFromMe:!1}})))}function QuoteWithPayment(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({quotedMessageProps:{text:"",conversationColor:Colors.cU[10],conversationTitle:(0,getDefaultConversation.E$)().title,isGiftBadge:!1,isViewOnce:!1,referencedMessageNotFound:!1,authorTitle:"Someone",isFromMe:!1,payment:{kind:Payment.s.Notification,note:"Thanks"}}})))}function NoFormatting(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({isFormattingEnabled:!1})))}function NoSpoilerFormatting(){return(0,jsx_runtime.jsx)(CompositionArea,Object.assign({},useProps({isFormattingSpoilersEnabled:!1})))}Default.displayName="Default",StartingText.displayName="StartingText",CompositionArea_stories_StickerButton.displayName="StickerButton",MessageRequest.displayName="MessageRequest",SmsOnlyFetchingUuid.displayName="SmsOnlyFetchingUuid",SmsOnlyFetchingUuid.story={name:"SMS-only fetching UUID"},SmsOnly.displayName="SmsOnly",SmsOnly.story={name:"SMS-only"},Attachments.displayName="Attachments",PendingApproval.displayName="PendingApproval",AnnouncementsOnlyGroup.story={name:"Announcements Only group"},AnnouncementsOnlyGroup.displayName="AnnouncementsOnlyGroup",AnnouncementsOnlyGroup.story={name:"Announcements Only group"},CompositionArea_stories_Quote.displayName="Quote",QuoteWithPayment.displayName="QuoteWithPayment",QuoteWithPayment.story={name:"Quote with payment"},NoFormatting.displayName="NoFormatting",NoSpoilerFormatting.displayName="NoSpoilerFormatting";var __namedExportsOrder=["Default","StartingText","StickerButton","MessageRequest","SmsOnlyFetchingUuid","SmsOnly","Attachments","PendingApproval","AnnouncementsOnlyGroup","Quote","QuoteWithPayment","NoFormatting","NoSpoilerFormatting"]},"./ts/components/MediaQualitySelector.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>MediaQualitySelector});var lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-dom/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_3__),react_popper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-popper/lib/esm/Manager.js"),react_popper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-popper/lib/esm/Reference.js"),react_popper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-popper/lib/esm/Popper.js"),_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/hooks/useRefMerger.ts"),_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/util/handleOutsideClick.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MediaQualitySelector(_ref){var conversationId=_ref.conversationId,i18n=_ref.i18n,isHighQuality=_ref.isHighQuality,onSelectQuality=_ref.onSelectQuality,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),menuShowing=_useState2[0],setMenuShowing=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),2),popperRoot=_useState4[0],setPopperRoot=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),2),focusedOption=_useState6[0],setFocusedOption=_useState6[1],buttonRef=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),refMerger=(0,_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_4__.T)(),handleClick=function(){setMenuShowing(!0)},handleKeyDown=function(ev){popperRoot?("ArrowDown"!==ev.key&&"ArrowUp"!==ev.key||(setFocusedOption((function(oldFocusedOption){return 1===oldFocusedOption?0:1})),ev.stopPropagation(),ev.preventDefault()),"Enter"===ev.key&&(onSelectQuality(conversationId,Boolean(focusedOption)),setMenuShowing(!1),ev.stopPropagation(),ev.preventDefault())):"Enter"===ev.key&&setFocusedOption(isHighQuality?1:0)},handleClose=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){setMenuShowing(!1),setFocusedOption(void 0)}),[setMenuShowing]);return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){if(menuShowing){var root=document.createElement("div");return setPopperRoot(root),document.body.appendChild(root),function(){document.body.removeChild(root),setPopperRoot(null)}}return lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}),[menuShowing,setPopperRoot,handleClose]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){return menuShowing?(0,_util_handleOutsideClick__WEBPACK_IMPORTED_MODULE_5__.p)((function(){return handleClose(),!0}),{containerElements:[popperRoot,buttonRef],name:"MediaQualitySelector"}):lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}),[menuShowing,popperRoot,handleClose]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_popper__WEBPACK_IMPORTED_MODULE_7__.dK,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_popper__WEBPACK_IMPORTED_MODULE_8__.s,{children:function(_ref2){var ref=_ref2.ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{"aria-label":i18n("icu:MediaQualitySelector--button"),className:classnames__WEBPACK_IMPORTED_MODULE_3___default()({MediaQualitySelector__button:!0,"MediaQualitySelector__button--hq":isHighQuality,"MediaQualitySelector__button--active":menuShowing}),onClick:handleClick,onKeyDown:handleKeyDown,ref:refMerger(buttonRef,ref),type:"button"})}}),menuShowing&&popperRoot?(0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(react_popper__WEBPACK_IMPORTED_MODULE_9__.r,{placement:"top-start",strategy:"fixed",children:function(_ref3){var ref=_ref3.ref,style=_ref3.style,placement=_ref3.placement;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:"MediaQualitySelector__popper","data-placement":placement,ref,style,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"MediaQualitySelector__title",children:i18n("icu:MediaQualitySelector--title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("button",{"aria-label":i18n("icu:MediaQualitySelector--standard-quality-title"),className:classnames__WEBPACK_IMPORTED_MODULE_3___default()({MediaQualitySelector__option:!0,"MediaQualitySelector__option--focused":0===focusedOption}),type:"button",onClick:function(){onSelectQuality(conversationId,!1),setMenuShowing(!1)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()({"MediaQualitySelector__option--checkmark":!0,"MediaQualitySelector__option--selected":!isHighQuality})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"MediaQualitySelector__option--title",children:i18n("icu:MediaQualitySelector--standard-quality-title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"MediaQualitySelector__option--description",children:i18n("icu:MediaQualitySelector--standard-quality-description")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("button",{"aria-label":i18n("icu:MediaQualitySelector--high-quality-title"),className:classnames__WEBPACK_IMPORTED_MODULE_3___default()({MediaQualitySelector__option:!0,"MediaQualitySelector__option--focused":1===focusedOption}),type:"button",onClick:function(){onSelectQuality(conversationId,!0),setMenuShowing(!1)},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_3___default()({"MediaQualitySelector__option--checkmark":!0,"MediaQualitySelector__option--selected":isHighQuality})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"MediaQualitySelector__option--title",children:i18n("icu:MediaQualitySelector--high-quality-title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:"MediaQualitySelector__option--description",children:i18n("icu:MediaQualitySelector--high-quality-description")})]})]})]})}}),popperRoot):null]})}MediaQualitySelector.displayName="MediaQualitySelector"},"./ts/components/Toast.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>Toast});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-dom/index.js"),_hooks_useRestoreFocus__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/hooks/useRestoreFocus.ts"),_util_clearTimeoutIfNecessary__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/util/clearTimeoutIfNecessary.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Toast=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((function ToastInner(_ref){var _ref$autoDismissDisab=_ref.autoDismissDisabled,autoDismissDisabled=void 0!==_ref$autoDismissDisab&&_ref$autoDismissDisab,children=_ref.children,_ref$align=_ref.align,align=void 0===_ref$align?"center":_ref$align,className=_ref.className,_ref$disableCloseOnCl=_ref.disableCloseOnClick,disableCloseOnClick=void 0!==_ref$disableCloseOnCl&&_ref$disableCloseOnCl,onClose=_ref.onClose,style=_ref.style,_ref$timeout=_ref.timeout,timeout=void 0===_ref$timeout?8e3:_ref$timeout,toastAction=_ref.toastAction,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(null),2),root=_React$useState2[0],setRoot=_React$useState2[1],focusRef=_slicedToArray((0,_hooks_useRestoreFocus__WEBPACK_IMPORTED_MODULE_3__.H)(),1)[0];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var div=document.createElement("div");return document.body.appendChild(div),setRoot(div),function(){document.body.removeChild(div),setRoot(null)}}),[]),(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(root&&!autoDismissDisabled){var timeoutId=setTimeout(onClose,timeout);return function(){(0,_util_clearTimeoutIfNecessary__WEBPACK_IMPORTED_MODULE_5__.S)(timeoutId)}}}),[autoDismissDisabled,onClose,root,timeout]),root?(0,react_dom__WEBPACK_IMPORTED_MODULE_2__.createPortal)((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{"aria-live":"assertive",className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("Toast",`Toast--align-${align}`,className),onClick:function(){disableCloseOnClick||onClose()},onKeyDown:function(ev){"Enter"!==ev.key&&" "!==ev.key||disableCloseOnClick||onClose()},role:"button",tabIndex:0,style,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"Toast__content",children}),toastAction&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"Toast__button",onClick:function(ev){ev.stopPropagation(),ev.preventDefault(),toastAction.onClick(),onClose()},onKeyDown:function(ev){"Enter"!==ev.key&&" "!==ev.key||(ev.stopPropagation(),ev.preventDefault(),toastAction.onClick(),onClose())},ref:focusRef,role:"button",tabIndex:0,children:toastAction.label})]}),root):null}))},"./ts/components/ToastVoiceNoteMustBeOnlyAttachment.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>ToastVoiceNoteMustBeOnlyAttachment});__webpack_require__("./node_modules/react/index.js");var _Toast__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Toast.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ToastVoiceNoteMustBeOnlyAttachment(_ref){var i18n=_ref.i18n,onClose=_ref.onClose;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Toast__WEBPACK_IMPORTED_MODULE_1__.F,{onClose,children:i18n("icu:voiceNoteMustBeOnlyAttachment")})}ToastVoiceNoteMustBeOnlyAttachment.displayName="ToastVoiceNoteMustBeOnlyAttachment"},"./ts/components/conversation/AttachmentList.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>AttachmentList});__webpack_require__("./node_modules/react/index.js");var _Image__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/Image.tsx"),_StagedGenericAttachment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/conversation/StagedGenericAttachment.tsx"),_StagedPlaceholderAttachment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/conversation/StagedPlaceholderAttachment.tsx"),_types_Attachment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/types/Attachment.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function AttachmentList(_ref){var attachments=_ref.attachments,canEditImages=_ref.canEditImages,i18n=_ref.i18n,onAddAttachment=_ref.onAddAttachment,onClickAttachment=_ref.onClickAttachment,onCloseAttachment=_ref.onCloseAttachment,onClose=_ref.onClose;if(!attachments.length)return null;var allVisualAttachments=(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_4__.pU)(attachments);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-attachments",children:[onClose&&attachments.length>1?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"module-attachments__header",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("button",{type:"button",onClick:onClose,className:"module-attachments__close-button","aria-label":i18n("icu:close")})}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-attachments__rail",children:[(attachments||[]).map((function(attachment,index){var url=function getUrl(attachment){var _attachment$screensho;if(!attachment.pending)return"screenshot"in attachment&&(null===(_attachment$screensho=attachment.screenshot)||void 0===_attachment$screensho?void 0:_attachment$screensho.url)||attachment.url}(attachment),key=url||attachment.path||attachment.fileName||index,isImage=(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_4__.VV)(attachment),isVideo=(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_4__.fr)(attachment),closeAttachment=function(){return onCloseAttachment(attachment)};if(isImage&&(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_4__.cR)([attachment])||isVideo||attachment.pending){var isDownloaded=!attachment.pending,imageUrl=url||(isVideo?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAACklEQVR42mNiAAAABgADm78GJQAAAABJRU5ErkJggg==":void 0),clickAttachment=onClickAttachment?function(){return onClickAttachment(attachment)}:void 0,imgElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Image__WEBPACK_IMPORTED_MODULE_1__.E,{alt:i18n("icu:stagedImageAttachment",{path:attachment.fileName||url||index.toString()}),className:"module-staged-attachment",i18n,attachment,isDownloaded,curveBottomLeft:_Image__WEBPACK_IMPORTED_MODULE_1__.v.Tiny,curveBottomRight:_Image__WEBPACK_IMPORTED_MODULE_1__.v.Tiny,curveTopLeft:_Image__WEBPACK_IMPORTED_MODULE_1__.v.Tiny,curveTopRight:_Image__WEBPACK_IMPORTED_MODULE_1__.v.Tiny,playIconOverlay:isVideo,height:120,width:120,url:imageUrl,closeButton:!0,onClick:clickAttachment,onClickClose:closeAttachment,onError:closeAttachment},key);return isImage&&canEditImages?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-attachments--editable",children:[imgElement,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"module-attachments__edit-icon"})]}):imgElement}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_StagedGenericAttachment__WEBPACK_IMPORTED_MODULE_2__.S,{attachment,i18n,onClose:closeAttachment},key)})),allVisualAttachments&&onAddAttachment?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_StagedPlaceholderAttachment__WEBPACK_IMPORTED_MODULE_3__.D,{onClick:onAddAttachment,i18n}):null]})]})}AttachmentList.displayName="AttachmentList"},"./ts/components/conversation/GroupV1DisabledActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>GroupV1DisabledActions});__webpack_require__("./node_modules/react/index.js");var _Intl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Intl.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function GroupV1DisabledActions(_ref){var conversationId=_ref.conversationId,i18n=_ref.i18n,showGV2MigrationDialog=_ref.showGV2MigrationDialog;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"module-group-v1-disabled-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{className:"module-group-v1-disabled-actions__message",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_1__.R,{i18n,id:"icu:GroupV1--Migration--disabled--link",components:{learnMoreLink:function(){for(var _len=arguments.length,parts=new Array(_len),_key=0;_key<_len;_key++)parts[_key]=arguments[_key];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("a",{href:"https://support.signal.org/hc/articles/360007319331",target:"_blank",rel:"noreferrer",className:"module-group-v1-disabled-actions__message__learn-more",children:parts})}}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"module-group-v1-disabled-actions__buttons",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",onClick:function(){return showGV2MigrationDialog(conversationId)},tabIndex:0,className:"module-group-v1-disabled-actions__buttons__button",children:i18n("icu:MessageRequests--continue")})})]})}GroupV1DisabledActions.displayName="GroupV1DisabledActions"},"./ts/components/conversation/GroupV2PendingApprovalActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>GroupV2PendingApprovalActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function GroupV2PendingApprovalActions(_ref){var cancelJoinRequest=_ref.cancelJoinRequest,conversationId=_ref.conversationId,i18n=_ref.i18n,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),2),isConfirming=_React$useState2[0],setIsConfirming=_React$useState2[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"module-group-v2-pending-approval-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("p",{className:"module-group-v2-pending-approval-actions__message",children:i18n("icu:GroupV2--join--requested")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"module-group-v2-pending-approval-actions__buttons",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",onClick:function(){return setIsConfirming(!0)},tabIndex:0,className:"module-group-v2-pending-approval-actions__buttons__button",children:i18n("icu:GroupV2--join--cancel-request-to-join")})}),isConfirming?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_1__.U,{actions:[{text:i18n("icu:GroupV2--join--cancel-request-to-join--yes"),style:"negative",action:function(){return cancelJoinRequest(conversationId)}}],cancelText:i18n("icu:GroupV2--join--cancel-request-to-join--no"),dialogName:"GroupV2CancelRequestToJoin",i18n,onClose:function(){return setIsConfirming(!1)},children:i18n("icu:GroupV2--join--cancel-request-to-join--confirmation")}):void 0]})}GroupV2PendingApprovalActions.displayName="GroupV2PendingApprovalActions"},"./ts/components/conversation/MandatoryProfileSharingActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>MandatoryProfileSharingActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ContactName__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Button.tsx"),_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/conversation/MessageRequestActionsConfirmation.tsx"),_Intl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/Intl.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var learnMoreLink=function(parts){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("a",{href:"https://support.signal.org/hc/articles/360007459591",target:"_blank",rel:"noreferrer",className:"module-message-request-actions__message__learn-more",children:parts})};function MandatoryProfileSharingActions(_ref){var acceptConversation=_ref.acceptConversation,blockAndReportSpam=_ref.blockAndReportSpam,blockConversation=_ref.blockConversation,conversationId=_ref.conversationId,conversationType=_ref.conversationType,deleteConversation=_ref.deleteConversation,firstName=_ref.firstName,i18n=_ref.i18n,title=_ref.title,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.default),2),mrState=_React$useState2[0],setMrState=_React$useState2[1],firstNameContact=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("strong",{className:"module-message-request-actions__message__name",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{firstName,title,preferFirstName:!0})},"name");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[mrState!==_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.default?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.D,{acceptConversation:function(){throw new Error("Should not be able to unblock from MandatoryProfileSharingActions")},blockConversation,conversationId,deleteConversation,i18n,blockAndReportSpam,title,conversationType,state:mrState,onChangeState:setMrState}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-message-request-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{className:"module-message-request-actions__message",children:"direct"===conversationType?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--profile-sharing--direct--link",components:{firstName:firstNameContact,learnMoreLink}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--profile-sharing--group--link",components:{learnMoreLink}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-message-request-actions__buttons",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){setMrState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.blocking)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryDestructive,children:i18n("icu:MessageRequests--block")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){setMrState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.deleting)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryDestructive,children:i18n("icu:MessageRequests--delete")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){return acceptConversation(conversationId)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryAffirmative,children:i18n("icu:MessageRequests--continue")})]})]})]})}learnMoreLink.displayName="learnMoreLink"},"./ts/components/conversation/MessageRequestActions.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>MessageRequestActions});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_ContactName__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Button.tsx"),_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/conversation/MessageRequestActionsConfirmation.tsx"),_Intl__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/Intl.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MessageRequestActions(_ref){var message,acceptConversation=_ref.acceptConversation,blockAndReportSpam=_ref.blockAndReportSpam,blockConversation=_ref.blockConversation,conversationId=_ref.conversationId,conversationType=_ref.conversationType,deleteConversation=_ref.deleteConversation,firstName=_ref.firstName,i18n=_ref.i18n,isHidden=_ref.isHidden,isBlocked=_ref.isBlocked,title=_ref.title,_React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.default),2),mrState=_React$useState2[0],setMrState=_React$useState2[1],name=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("strong",{className:"module-message-request-actions__message__name",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{firstName,title,preferFirstName:!0})},"name");return"direct"===conversationType?message=isBlocked?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--message-direct-blocked",components:{name}}):isHidden?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--message-direct-hidden",components:{name}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--message-direct",components:{name}}):"group"===conversationType&&(message=isBlocked?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--message-group-blocked"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_4__.R,{i18n,id:"icu:MessageRequests--message-group"})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[mrState!==_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.default?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.D,{acceptConversation,blockAndReportSpam,blockConversation,conversationId,conversationType,deleteConversation,i18n,onChangeState:setMrState,state:mrState,title}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-message-request-actions",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("p",{className:"module-message-request-actions__message",children:message}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div",{className:"module-message-request-actions__buttons",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){setMrState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.deleting)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryDestructive,children:i18n("icu:MessageRequests--delete")}),isBlocked?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){setMrState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.unblocking)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryAffirmative,children:i18n("icu:MessageRequests--unblock")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){setMrState(_MessageRequestActionsConfirmation__WEBPACK_IMPORTED_MODULE_3__.L.blocking)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryDestructive,children:i18n("icu:MessageRequests--block")}),isBlocked?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:function(){return acceptConversation(conversationId)},variant:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.SecondaryAffirmative,children:i18n("icu:MessageRequests--accept")})]})]})]})}},"./ts/components/conversation/MessageRequestActionsConfirmation.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>MessageRequestActionsConfirmation,L:()=>MessageRequestState});__webpack_require__("./node_modules/react/index.js");var MessageRequestState,_ContactName__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),_Intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/Intl.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MessageRequestActionsConfirmation(_ref){var acceptConversation=_ref.acceptConversation,blockAndReportSpam=_ref.blockAndReportSpam,blockConversation=_ref.blockConversation,conversationId=_ref.conversationId,conversationType=_ref.conversationType,deleteConversation=_ref.deleteConversation,i18n=_ref.i18n,onChangeState=_ref.onChangeState,state=_ref.state,title=_ref.title;return state===MessageRequestState.blocking?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__.U,{dialogName:"messageRequestActionsConfirmation.blocking",i18n,onClose:function(){onChangeState(MessageRequestState.default)},title:"direct"===conversationType?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_3__.R,{i18n,id:"icu:MessageRequests--block-direct-confirm-title",components:{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{title},"name")}}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_3__.R,{i18n,id:"icu:MessageRequests--block-group-confirm-title",components:{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{title},"name")}}),actions:[].concat(_toConsumableArray("direct"===conversationType?[{text:i18n("icu:MessageRequests--block-and-report-spam"),action:function(){return blockAndReportSpam(conversationId)},style:"negative"}]:[]),[{text:i18n("icu:MessageRequests--block"),action:function(){return blockConversation(conversationId)},style:"negative"}]),children:i18n("direct"===conversationType?"icu:MessageRequests--block-direct-confirm-body":"icu:MessageRequests--block-group-confirm-body")}):state===MessageRequestState.unblocking?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__.U,{dialogName:"messageRequestActionsConfirmation.unblocking",i18n,onClose:function(){onChangeState(MessageRequestState.default)},title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_3__.R,{i18n,id:"icu:MessageRequests--unblock-direct-confirm-title",components:{name:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{title},"name")}}),actions:[{text:i18n("icu:MessageRequests--unblock"),action:function(){return acceptConversation(conversationId)},style:"affirmative"}],children:i18n("direct"===conversationType?"icu:MessageRequests--unblock-direct-confirm-body":"icu:MessageRequests--unblock-group-confirm-body")}):state===MessageRequestState.deleting?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__.U,{dialogName:"messageRequestActionsConfirmation.deleting",i18n,onClose:function(){onChangeState(MessageRequestState.default)},title:"direct"===conversationType?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_3__.R,{i18n,id:"icu:MessageRequests--delete-direct-confirm-title"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_Intl__WEBPACK_IMPORTED_MODULE_3__.R,{i18n,id:"icu:MessageRequests--delete-group-confirm-title",components:{title:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{title},"name")}}),actions:[{text:i18n("direct"===conversationType?"icu:MessageRequests--delete-direct":"icu:MessageRequests--delete-group"),action:function(){return deleteConversation(conversationId)},style:"negative"}],children:i18n("direct"===conversationType?"icu:MessageRequests--delete-direct-confirm-body":"icu:MessageRequests--delete-group-confirm-body")}):null}!function(MessageRequestState){MessageRequestState[MessageRequestState.blocking=0]="blocking",MessageRequestState[MessageRequestState.deleting=1]="deleting",MessageRequestState[MessageRequestState.unblocking=2]="unblocking",MessageRequestState[MessageRequestState.default=3]="default"}(MessageRequestState||(MessageRequestState={}))},"./ts/components/conversation/StagedGenericAttachment.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>StagedGenericAttachment});__webpack_require__("./node_modules/react/index.js");var _types_Attachment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Attachment.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function StagedGenericAttachment(_ref){var attachment=_ref.attachment,i18n=_ref.i18n,onClose=_ref.onClose,fileName=attachment.fileName,contentType=attachment.contentType,extension=(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_1__.Gq)({contentType,fileName});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"module-staged-attachment module-staged-generic-attachment",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{type:"button",className:"module-staged-generic-attachment__close-button","aria-label":i18n("icu:close"),onClick:function(){onClose&&onClose(attachment)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"module-staged-generic-attachment__icon",children:extension?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"module-staged-generic-attachment__icon__extension",children:extension}):null}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"module-staged-generic-attachment__filename",children:fileName})]})}StagedGenericAttachment.displayName="StagedGenericAttachment"},"./ts/components/conversation/StagedPlaceholderAttachment.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>StagedPlaceholderAttachment});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function StagedPlaceholderAttachment(_ref){var i18n=_ref.i18n,onClick=_ref.onClick;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{type:"button",className:"module-staged-placeholder-attachment",onClick,title:i18n("icu:addImageOrVideoattachment"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"module-staged-placeholder-attachment__plus-icon"})})}StagedPlaceholderAttachment.displayName="StagedPlaceholderAttachment"},"./ts/hooks/useKeyboardShortcuts.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Al:()=>useActiveCallShortcuts,Gu:()=>useStartCallShortcuts,aL:()=>useKeyboardShortcuts,dn:()=>useAttachFileShortcut,oN:()=>useIncomingCallShortcuts,py:()=>useStartRecordingShortcut,sP:()=>useToggleReactionPicker});var lodash_get__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/get.js"),lodash_get__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_get__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/services/keyboardLayout.ts");function isCmdOrCtrl(ev){var ctrlKey=ev.ctrlKey,metaKey=ev.metaKey,commandKey="darwin"===lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(window,"platform")&&metaKey,controlKey="darwin"!==lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(window,"platform")&&ctrlKey;return commandKey||controlKey}function isCtrlOrAlt(ev){var altKey=ev.altKey,ctrlKey=ev.ctrlKey,controlKey="darwin"===lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(window,"platform")&&ctrlKey,theAltKey="darwin"!==lodash_get__WEBPACK_IMPORTED_MODULE_0___default()(window,"platform")&&altKey;return controlKey||theAltKey}function useActiveCallShortcuts(hangUp){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return!(!isCtrlOrAlt(ev)||!shiftKey||"e"!==key&&"E"!==key)&&(ev.preventDefault(),ev.stopPropagation(),hangUp("Keyboard shortcut"),!0)}),[hangUp])}function useIncomingCallShortcuts(acceptAudioCall,acceptVideoCall,declineCall){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return isCtrlOrAlt(ev)&&shiftKey&&("v"===key||"V"===key)?(ev.preventDefault(),ev.stopPropagation(),acceptVideoCall(),!0):isCtrlOrAlt(ev)&&shiftKey&&("a"===key||"A"===key)?(ev.preventDefault(),ev.stopPropagation(),acceptAudioCall(),!0):!(!isCtrlOrAlt(ev)||!shiftKey||"d"!==key&&"D"!==key)&&(ev.preventDefault(),ev.stopPropagation(),declineCall(),!0)}),[acceptAudioCall,acceptVideoCall,declineCall])}function useStartCallShortcuts(startAudioCall,startVideoCall){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return isCtrlOrAlt(ev)&&shiftKey&&("c"===key||"C"===key)?(ev.preventDefault(),ev.stopPropagation(),startAudioCall(),!0):!(!isCtrlOrAlt(ev)||!shiftKey||"y"!==key&&"Y"!==key)&&(ev.preventDefault(),ev.stopPropagation(),startVideoCall(),!0)}),[startAudioCall,startVideoCall])}function useStartRecordingShortcut(startAudioRecording){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return!(!isCmdOrCtrl(ev)||!shiftKey||"v"!==key&&"V"!==key)&&(ev.preventDefault(),ev.stopPropagation(),startAudioRecording(),!0)}),[startAudioRecording])}function useAttachFileShortcut(attachFile){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return!(!isCmdOrCtrl(ev)||shiftKey||"u"!==key&&"U"!==key)&&(ev.preventDefault(),ev.stopPropagation(),attachFile(),!0)}),[attachFile])}function useToggleReactionPicker(handleReact){return(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(ev){var shiftKey=ev.shiftKey,key=_services_keyboardLayout__WEBPACK_IMPORTED_MODULE_2__.P(ev);return!(!isCmdOrCtrl(ev)||!shiftKey||"e"!==key&&"E"!==key)&&(ev.preventDefault(),ev.stopPropagation(),handleReact(),!0)}),[handleReact])}function useKeyboardShortcuts(){for(var _len=arguments.length,eventHandlers=new Array(_len),_key=0;_key<_len;_key++)eventHandlers[_key]=arguments[_key];(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){function handleKeydown(ev){eventHandlers.some((function(eventHandler){return eventHandler(ev)}))}return document.addEventListener("keydown",handleKeydown),function(){document.removeEventListener("keydown",handleKeydown)}}),[eventHandlers])}},"./ts/storybook/Fixtures.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Yl:()=>gifUrl,L$:()=>landscapeGreenUrl,UJ:()=>pngUrl,K$:()=>portraitTealUrl,e7:()=>squareStickerUrl});const giphy_GVNvOUpeYmI7e_namespaceObject=__webpack_require__.p+"static/media/giphy-GVNvOUpeYmI7e.5fb55e50.gif",freepngs_2cd43b_bed7d1327e88454487397574d87b64dc_mv2_namespaceObject=__webpack_require__.p+"static/media/freepngs-2cd43b_bed7d1327e88454487397574d87b64dc_mv2.f13513c6.png",_1000x50_green_namespaceObject=__webpack_require__.p+"static/media/1000x50-green.221b1d06.jpeg",_50x1000_teal_namespaceObject=(__webpack_require__.p,__webpack_require__.p+"static/media/50x1000-teal.e07215d6.jpeg"),_512x515_thumbs_up_lincoln_namespaceObject=__webpack_require__.p+"static/media/512x515-thumbs-up-lincoln.1e1e8fb6.webp";var gifUrl=`/${giphy_GVNvOUpeYmI7e_namespaceObject}`,pngUrl=`/${freepngs_2cd43b_bed7d1327e88454487397574d87b64dc_mv2_namespaceObject}`,landscapeGreenUrl=`/${_1000x50_green_namespaceObject}`,portraitTealUrl=`/${_50x1000_teal_namespaceObject}`,squareStickerUrl=`/${_512x515_thumbs_up_lincoln_namespaceObject}`},"./ts/test-both/helpers/fakeAttachment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C4:()=>fakeDraftAttachment,Jh:()=>fakeThumbnail,dh:()=>fakeAttachment});var _types_MIME__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/types/MIME.ts"),fakeAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,width:800,height:600,size:10304},overrides)},fakeThumbnail=function(url){return{contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,height:100,path:url,url,width:100}},fakeDraftAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({pending:!1,contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,path:"file.jpg",size:10304},overrides)}},"./ts/types/AudioRecorder.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var ErrorDialogAudioRecorderType,RecordingState;__webpack_require__.d(__webpack_exports__,{H:()=>ErrorDialogAudioRecorderType,S:()=>RecordingState}),function(ErrorDialogAudioRecorderType){ErrorDialogAudioRecorderType[ErrorDialogAudioRecorderType.ErrorRecording=0]="ErrorRecording",ErrorDialogAudioRecorderType[ErrorDialogAudioRecorderType.Timeout=1]="Timeout"}(ErrorDialogAudioRecorderType||(ErrorDialogAudioRecorderType={})),function(RecordingState){RecordingState.Recording="recording",RecordingState.Initializing="initializing",RecordingState.Idle="idle"}(RecordingState||(RecordingState={}))},"./ts/types/Toast.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var ToastType;__webpack_require__.d(__webpack_exports__,{p:()=>ToastType}),function(ToastType){ToastType.AddingUserToGroup="AddingUserToGroup",ToastType.AlreadyGroupMember="AlreadyGroupMember",ToastType.AlreadyRequestedToJoin="AlreadyRequestedToJoin",ToastType.Blocked="Blocked",ToastType.BlockedGroup="BlockedGroup",ToastType.CannotEditMessage="CannotEditMessage",ToastType.CannotForwardEmptyMessage="CannotForwardEmptyMessage",ToastType.CannotMixMultiAndNonMultiAttachments="CannotMixMultiAndNonMultiAttachments",ToastType.CannotOpenGiftBadgeIncoming="CannotOpenGiftBadgeIncoming",ToastType.CannotOpenGiftBadgeOutgoing="CannotOpenGiftBadgeOutgoing",ToastType.CannotStartGroupCall="CannotStartGroupCall",ToastType.ConversationArchived="ConversationArchived",ToastType.ConversationMarkedUnread="ConversationMarkedUnread",ToastType.ConversationRemoved="ConversationRemoved",ToastType.ConversationUnarchived="ConversationUnarchived",ToastType.CopiedUsername="CopiedUsername",ToastType.CopiedUsernameLink="CopiedUsernameLink",ToastType.DangerousFileType="DangerousFileType",ToastType.DeleteForEveryoneFailed="DeleteForEveryoneFailed",ToastType.Error="Error",ToastType.Expired="Expired",ToastType.FailedToDeleteUsername="FailedToDeleteUsername",ToastType.FileSaved="FileSaved",ToastType.FileSize="FileSize",ToastType.InvalidConversation="InvalidConversation",ToastType.LeftGroup="LeftGroup",ToastType.MaxAttachments="MaxAttachments",ToastType.MessageBodyTooLong="MessageBodyTooLong",ToastType.OriginalMessageNotFound="OriginalMessageNotFound",ToastType.PinnedConversationsFull="PinnedConversationsFull",ToastType.ReactionFailed="ReactionFailed",ToastType.ReportedSpamAndBlocked="ReportedSpamAndBlocked",ToastType.StoryMuted="StoryMuted",ToastType.StoryReact="StoryReact",ToastType.StoryReply="StoryReply",ToastType.StoryVideoError="StoryVideoError",ToastType.StoryVideoUnsupported="StoryVideoUnsupported",ToastType.TapToViewExpiredIncoming="TapToViewExpiredIncoming",ToastType.TapToViewExpiredOutgoing="TapToViewExpiredOutgoing",ToastType.TooManyMessagesToDeleteForEveryone="TooManyMessagesToDeleteForEveryone",ToastType.TooManyMessagesToForward="TooManyMessagesToForward",ToastType.UnableToLoadAttachment="UnableToLoadAttachment",ToastType.UnsupportedMultiAttachment="UnsupportedMultiAttachment",ToastType.UnsupportedOS="UnsupportedOS",ToastType.UserAddedToGroup="UserAddedToGroup"}(ToastType||(ToastType={}))},"./node_modules/lodash/find.js":(module,__unused_webpack_exports,__webpack_require__)=>{var find=__webpack_require__("./node_modules/lodash/_createFind.js")(__webpack_require__("./node_modules/lodash/findIndex.js"));module.exports=find},"./node_modules/lodash/findIndex.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseFindIndex=__webpack_require__("./node_modules/lodash/_baseFindIndex.js"),baseIteratee=__webpack_require__("./node_modules/lodash/_baseIteratee.js"),toInteger=__webpack_require__("./node_modules/lodash/toInteger.js"),nativeMax=Math.max;module.exports=function findIndex(array,predicate,fromIndex){var length=null==array?0:array.length;if(!length)return-1;var index=null==fromIndex?0:toInteger(fromIndex);return index<0&&(index=nativeMax(length+index,0)),baseFindIndex(array,baseIteratee(predicate,3),index)}},"./node_modules/lodash/first.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":module=>{module.exports=function head(array){return array&&array.length?array[0]:void 0}},"./node_modules/lodash/isBoolean.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function isBoolean(value){return!0===value||!1===value||isObjectLike(value)&&"[object Boolean]"==baseGetTag(value)}}}]);