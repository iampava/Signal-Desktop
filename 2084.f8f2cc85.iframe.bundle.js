(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[2084],{"./ts/components/Alert.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>Alert});__webpack_require__("./node_modules/react/index.js");var _Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Button.tsx"),_Modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Modal.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Alert(_ref){var body=_ref.body,i18n=_ref.i18n,onClose=_ref.onClose,theme=_ref.theme,title=_ref.title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_2__.u_,{i18n,modalFooter:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_1__.zx,{onClick:onClose,children:i18n("icu:Confirmation--confirm")}),modalName:"Alert",onClose,theme,title,children:body})}Alert.displayName="Alert"},"./ts/components/MyStories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>MyStories});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),_ContextMenu__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ContextMenu.tsx"),_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/conversation/MessageTimestamp.tsx"),_StoryDistributionListName__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/components/StoryDistributionListName.tsx"),_StoryImage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/StoryImage.tsx"),_util_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/theme.ts"),_util_resolveStorySendStatus__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/util/resolveStorySendStatus.ts"),_hooks_useRetryStorySend__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/hooks/useRetryStorySend.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MyStories(_ref){var i18n=_ref.i18n,myStories=_ref.myStories,onBack=_ref.onBack,onDelete=_ref.onDelete,onForward=_ref.onForward,onSave=_ref.onSave,queueStoryDownload=_ref.queueStoryDownload,retryMessageSend=_ref.retryMessageSend,viewStory=_ref.viewStory,hasViewReceiptSetting=_ref.hasViewReceiptSetting,onMediaPlaybackStart=_ref.onMediaPlaybackStart,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),2),confirmDeleteStory=_useState2[0],setConfirmDeleteStory=_useState2[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[confirmDeleteStory&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__.U,{dialogName:"MyStories.delete",actions:[{text:i18n("icu:delete"),action:function(){return onDelete(confirmDeleteStory)},style:"negative"}],i18n,onClose:function(){return setConfirmDeleteStory(void 0)},children:i18n("icu:MyStories__delete")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"Stories__pane__header Stories__pane__header--centered",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{"aria-label":i18n("icu:back"),className:"Stories__pane__header--back",onClick:onBack,type:"button"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__header--title",children:i18n("icu:MyStories__title")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__list",children:myStories.map((function(list){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__distribution",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__distribution__title",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_StoryDistributionListName__WEBPACK_IMPORTED_MODULE_5__.e,{i18n,id:list.id,name:list.name})}),list.stories.map((function(story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(StorySent,{hasViewReceiptSetting,i18n,onForward,onSave,onMediaPlaybackStart,queueStoryDownload,retryMessageSend,setConfirmDeleteStory,story,viewStory},story.messageId)}))]},list.id)}))}),!myStories.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__list--empty",children:i18n("icu:Stories__list-empty")})]})}function StorySent(_ref2){var _story$sendState,_story$views,hasViewReceiptSetting=_ref2.hasViewReceiptSetting,i18n=_ref2.i18n,onForward=_ref2.onForward,onSave=_ref2.onSave,onMediaPlaybackStart=_ref2.onMediaPlaybackStart,queueStoryDownload=_ref2.queueStoryDownload,retryMessageSend=_ref2.retryMessageSend,setConfirmDeleteStory=_ref2.setConfirmDeleteStory,story=_ref2.story,viewStory=_ref2.viewStory,sendStatus=(0,_util_resolveStorySendStatus__WEBPACK_IMPORTED_MODULE_8__.Z)(null!==(_story$sendState=story.sendState)&&void 0!==_story$sendState?_story$sendState:[]),_useRetryStorySend=(0,_hooks_useRetryStorySend__WEBPACK_IMPORTED_MODULE_9__.X)(i18n,sendStatus),renderAlert=_useRetryStorySend.renderAlert,setWasManuallyRetried=_useRetryStorySend.setWasManuallyRetried,wasManuallyRetried=_useRetryStorySend.wasManuallyRetried;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__story",children:[renderAlert(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("button",{"aria-label":i18n("icu:MyStories__story"),className:"StoryListItem__button MyStories__story-button",onClick:function(){if(!wasManuallyRetried&&(sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Failed||sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.PartiallySent))return setWasManuallyRetried(!0),void retryMessageSend(story.messageId);viewStory({storyId:story.messageId,storyViewMode:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.bX.MyStories})},type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"StoryListItem__previews",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_StoryImage__WEBPACK_IMPORTED_MODULE_6__.s,{attachment:story.attachment,firstName:i18n("icu:you"),i18n,isMe:!0,isThumbnail:!0,label:i18n("icu:MyStories__story"),moduleClassName:"StoryListItem__previews--image",queueStoryDownload,storyId:story.messageId,onMediaPlaybackStart})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__story__details",children:[sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Sending&&i18n("icu:Stories__list--sending"),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Failed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[i18n("icu:Stories__list--send_failed"),!wasManuallyRetried&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed__button",children:i18n("icu:Stories__list--retry-send")})]})}),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.PartiallySent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[i18n("icu:Stories__list--partially-sent"),!wasManuallyRetried&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed__button",children:i18n("icu:Stories__list--retry-send")})]})}),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Sent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[hasViewReceiptSetting?i18n("icu:MyStories__views",{views:null!==(_story$views=story.views)&&void 0!==_story$views?_story$views:0}):i18n("icu:MyStories__views-off"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_4__.i,{i18n,isRelativeTime:!0,module:"MyStories__story__timestamp",timestamp:story.timestamp})]})]})]}),story.attachment&&(story.attachment.path||story.attachment.data)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{"aria-label":i18n("icu:MyStories__download"),className:"MyStories__story__download",onClick:function(){onSave(story)},type:"button"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ContextMenu__WEBPACK_IMPORTED_MODULE_3__.x,{i18n,menuOptions:[{icon:"MyStories__icon--forward",label:i18n("icu:forward"),onClick:function(){onForward(story.messageId)}},{icon:"StoryListItem__icon--info",label:i18n("icu:StoryListItem__info"),onClick:function(){viewStory({storyId:story.messageId,storyViewMode:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.bX.MyStories,viewTarget:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Zk.Details})}},{icon:"MyStories__icon--delete",label:i18n("icu:delete"),onClick:function(){setConfirmDeleteStory(story)}}],moduleClassName:"MyStories__story__more",theme:_util_theme__WEBPACK_IMPORTED_MODULE_7__.Q.Dark})]},story.timestamp)}StorySent.displayName="StorySent"},"./ts/components/SearchInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>SearchInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SearchInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function SearchInputInner(_ref,ref){var children=_ref.children,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$hasSearchIcon=_ref.hasSearchIcon,hasSearchIcon=void 0===_ref$hasSearchIcon||_ref$hasSearchIcon,i18n=_ref.i18n,label=_ref.label,moduleClassName=_ref.moduleClassName,onClear=_ref.onClear,onBlur=_ref.onBlur,onChange=_ref.onChange,onKeyDown=_ref.onKeyDown,placeholder=_ref.placeholder,value=_ref.value,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("module-SearchInput",moduleClassName);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:getClassName("__container"),"data-supertab":!0,children:[hasSearchIcon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("i",{className:getClassName("__icon")}),children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{"aria-label":label||i18n("icu:search"),className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__input"),value&&getClassName("__input--with-text"),children&&getClassName("__input--with-children")),dir:"auto",disabled,onBlur,onChange,onKeyDown:function(event){var ctrlKey=event.ctrlKey,key=event.key;"linux"===window.platform&&ctrlKey&&"/"===key?(event.preventDefault(),event.stopPropagation()):"Escape"===key&&onClear&&(onClear(),event.preventDefault(),event.stopPropagation()),null==onKeyDown||onKeyDown(event)},placeholder,ref,type:"text",value}),value&&onClear&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{"aria-label":i18n("icu:cancel"),className:getClassName("__cancel"),onClick:onClear,tabIndex:-1,type:"button"})]})}))},"./ts/components/Stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>STORIES_COLOR_THEME,f:()=>Stories});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),MyStories=__webpack_require__("./ts/components/MyStories.tsx"),fuse_esm=__webpack_require__("./node_modules/fuse.js/dist/fuse.esm.js"),ContextMenu=__webpack_require__("./ts/components/ContextMenu.tsx"),MyStoryButton=__webpack_require__("./ts/components/MyStoryButton.tsx"),SearchInput=__webpack_require__("./ts/components/SearchInput.tsx"),StoriesAddStoryButton=__webpack_require__("./ts/components/StoriesAddStoryButton.tsx"),StoryListItem=__webpack_require__("./ts/components/StoryListItem.tsx"),theme=__webpack_require__("./ts/util/theme.ts"),isNotNil=__webpack_require__("./ts/util/isNotNil.ts"),useRestoreFocus=__webpack_require__("./ts/hooks/useRestoreFocus.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var FUSE_OPTIONS={getFn:function(story,path){var _story$group$title,_story$group;return"searchNames"===path[0]||"searchNames"===path?[story.storyView.sender.title,story.storyView.sender.name].filter(isNotNil.D):null!==(_story$group$title=null===(_story$group=story.group)||void 0===_story$group?void 0:_story$group.title)&&void 0!==_story$group$title?_story$group$title:""},keys:[{name:"searchNames",weight:1},{name:"group",weight:1}],threshold:.1};function StoriesPane(_ref){var getPreferredBadge=_ref.getPreferredBadge,hiddenStories=_ref.hiddenStories,i18n=_ref.i18n,maxAttachmentSizeInKb=_ref.maxAttachmentSizeInKb,me=_ref.me,myStories=_ref.myStories,onAddStory=_ref.onAddStory,onMyStoriesClicked=_ref.onMyStoriesClicked,onStoriesSettings=_ref.onStoriesSettings,onMediaPlaybackStart=_ref.onMediaPlaybackStart,queueStoryDownload=_ref.queueStoryDownload,showConversation=_ref.showConversation,showToast=_ref.showToast,stories=_ref.stories,toggleHideStories=_ref.toggleHideStories,toggleStoriesView=_ref.toggleStoriesView,viewUserStories=_ref.viewUserStories,_useState2=_slicedToArray((0,react.useState)(""),2),searchTerm=_useState2[0],setSearchTerm=_useState2[1],_useState4=_slicedToArray((0,react.useState)(!1),2),isShowingHiddenStories=_useState4[0],setIsShowingHiddenStories=_useState4[1],_useState6=_slicedToArray((0,react.useState)(stories),2),renderedStories=_useState6[0],setRenderedStories=_useState6[1];(0,react.useEffect)((function(){setRenderedStories(searchTerm?function search(stories,searchTerm){return new fuse_esm.Z(stories,FUSE_OPTIONS).search(searchTerm).map((function(result){return result.item}))}(stories,searchTerm):stories)}),[searchTerm,stories]);var focusRef=_slicedToArray((0,useRestoreFocus.H)(),1)[0];return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"Stories__pane__header",children:[(0,jsx_runtime.jsx)("button",{ref:focusRef,"aria-label":i18n("icu:back"),className:"Stories__pane__header--back",onClick:toggleStoriesView,tabIndex:0,type:"button"}),(0,jsx_runtime.jsx)("div",{className:"Stories__pane__header--title",children:i18n("icu:Stories__title")}),(0,jsx_runtime.jsx)(StoriesAddStoryButton.v,{i18n,maxAttachmentSizeInKb,moduleClassName:"Stories__pane__add-story",onAddStory,showToast}),(0,jsx_runtime.jsx)(ContextMenu.x,{i18n,menuOptions:[{label:i18n("icu:StoriesSettings__context-menu"),onClick:function(){return onStoriesSettings()}}],moduleClassName:"Stories__pane__settings",popperOptions:{placement:"bottom",strategy:"absolute"},theme:theme.Q.Dark})]}),(0,jsx_runtime.jsx)(SearchInput.M,{i18n,moduleClassName:"Stories__search",onChange:function(event){setSearchTerm(event.target.value)},placeholder:i18n("icu:search"),value:searchTerm}),(0,jsx_runtime.jsxs)("div",{className:"Stories__pane__list",children:[(0,jsx_runtime.jsx)(MyStoryButton.X,{i18n,maxAttachmentSizeInKb,me,myStories,onAddStory,onClick:onMyStoriesClicked,queueStoryDownload,showToast,onMediaPlaybackStart}),renderedStories.map((function(story){return(0,jsx_runtime.jsx)(StoryListItem.B,{conversationId:story.conversationId,getPreferredBadge,hasReplies:story.hasReplies,hasRepliesFromSelf:story.hasRepliesFromSelf,group:story.group,i18n,onGoToConversation:function(conversationId){showConversation({conversationId}),toggleStoriesView()},onHideStory:toggleHideStories,onMediaPlaybackStart,queueStoryDownload,story:story.storyView,viewUserStories},story.storyView.timestamp)})),Boolean(hiddenStories.length)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{className:classnames_default()("Stories__hidden-stories",{"Stories__hidden-stories--expanded":isShowingHiddenStories}),onClick:function(){return setIsShowingHiddenStories(!isShowingHiddenStories)},type:"button",children:i18n("icu:Stories__hidden-stories")}),isShowingHiddenStories&&hiddenStories.map((function(story){return(0,jsx_runtime.jsx)(StoryListItem.B,{conversationId:story.conversationId,getPreferredBadge,group:story.group,i18n,isHidden:!0,onGoToConversation:function(conversationId){showConversation({conversationId}),toggleStoriesView()},onHideStory:toggleHideStories,onMediaPlaybackStart,queueStoryDownload,story:story.storyView,viewUserStories},story.storyView.timestamp)}))]}),!stories.length&&(0,jsx_runtime.jsx)("div",{className:"Stories__pane__list--empty",children:i18n("icu:Stories__list-empty")})]})]})}var leftPaneWidth=__webpack_require__("./ts/util/leftPaneWidth.ts"),useEscapeHandling=__webpack_require__("./ts/hooks/useEscapeHandling.ts");function Stories_slicedToArray(arr,i){return function Stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function Stories_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function Stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return Stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Stories_arrayLikeToArray(o,minLen)}(arr,i)||function Stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var STORIES_COLOR_THEME=theme.Q.Dark;function Stories(_ref){var addStoryData=_ref.addStoryData,deleteStoryForEveryone=_ref.deleteStoryForEveryone,getPreferredBadge=_ref.getPreferredBadge,hasViewReceiptSetting=_ref.hasViewReceiptSetting,hiddenStories=_ref.hiddenStories,i18n=_ref.i18n,isStoriesSettingsVisible=_ref.isStoriesSettingsVisible,isViewingStory=_ref.isViewingStory,maxAttachmentSizeInKb=_ref.maxAttachmentSizeInKb,me=_ref.me,myStories=_ref.myStories,onForwardStory=_ref.onForwardStory,onSaveStory=_ref.onSaveStory,onMediaPlaybackStart=_ref.onMediaPlaybackStart,preferredWidthFromStorage=_ref.preferredWidthFromStorage,queueStoryDownload=_ref.queueStoryDownload,renderStoryCreator=_ref.renderStoryCreator,retryMessageSend=_ref.retryMessageSend,setAddStoryData=_ref.setAddStoryData,showConversation=_ref.showConversation,showStoriesSettings=_ref.showStoriesSettings,showToast=_ref.showToast,stories=_ref.stories,toggleHideStories=_ref.toggleHideStories,toggleStoriesView=_ref.toggleStoriesView,viewStory=_ref.viewStory,viewUserStories=_ref.viewUserStories,width=(0,leftPaneWidth.T1)(preferredWidthFromStorage,{requiresFullWidth:!0}),_useState2=Stories_slicedToArray((0,react.useState)(!1),2),isMyStories=_useState2[0],setIsMyStories=_useState2[1];return(0,useEscapeHandling.w)(isMyStories&&myStories.length||isViewingStory||isStoriesSettingsVisible||addStoryData?void 0:toggleStoriesView),(0,jsx_runtime.jsxs)("div",{className:classnames_default()("Stories",(0,theme.j)(STORIES_COLOR_THEME)),children:[addStoryData&&renderStoryCreator(),(0,jsx_runtime.jsx)("div",{className:"Stories__pane",style:{width},children:isMyStories&&myStories.length?(0,jsx_runtime.jsx)(MyStories.g,{hasViewReceiptSetting,i18n,myStories,onBack:function(){return setIsMyStories(!1)},onDelete:deleteStoryForEveryone,onForward:onForwardStory,onSave:onSaveStory,onMediaPlaybackStart,queueStoryDownload,retryMessageSend,viewStory}):(0,jsx_runtime.jsx)(StoriesPane,{getPreferredBadge,hiddenStories,i18n,maxAttachmentSizeInKb,me,myStories,onAddStory:function(file){return setAddStoryData(file?{type:"Media",file}:{type:"Text"})},onMyStoriesClicked:function(){myStories.length?setIsMyStories(!0):setAddStoryData({type:"Text"})},onStoriesSettings:showStoriesSettings,onMediaPlaybackStart,queueStoryDownload,showConversation,showToast,stories,toggleHideStories,toggleStoriesView,viewUserStories})}),(0,jsx_runtime.jsxs)("div",{className:"Stories__placeholder",children:[(0,jsx_runtime.jsx)("div",{className:"Stories__placeholder__stories"}),i18n("icu:Stories__placeholder--text")]})]})}Stories.displayName="Stories"},"./ts/components/StoryDistributionListName.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>StoryDistributionListName});__webpack_require__("./node_modules/react/index.js");var _types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_UserText__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/UserText.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function StoryDistributionListName(_ref){var i18n=_ref.i18n,id=_ref.id,name=_ref.name;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_UserText__WEBPACK_IMPORTED_MODULE_2__.a,{text:(0,_types_Stories__WEBPACK_IMPORTED_MODULE_1__.HH)(i18n,id,name)})}StoryDistributionListName.displayName="StoryDistributionListName"},"./ts/components/StoryListItem.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>StoryListItem});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_Avatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Avatar.tsx"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),_ContextMenu__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/ContextMenu.tsx"),_types_SignalConversation__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/types/SignalConversation.ts"),_types_Stories__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/types/Stories.ts"),_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/components/conversation/MessageTimestamp.tsx"),_StoryImage__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/components/StoryImage.tsx"),_types_Util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/types/Util.ts"),_types_Colors__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ts/types/Colors.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function StoryListItemAvatar(_ref){var acceptedMessageRequest=_ref.acceptedMessageRequest,avatarPath=_ref.avatarPath,avatarStoryRing=_ref.avatarStoryRing,badges=_ref.badges,color=_ref.color,getPreferredBadge=_ref.getPreferredBadge,i18n=_ref.i18n,isMe=_ref.isMe,profileName=_ref.profileName,sharedGroupNames=_ref.sharedGroupNames,title=_ref.title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Avatar__WEBPACK_IMPORTED_MODULE_2__.qE,{acceptedMessageRequest,avatarPath,badge:badges?getPreferredBadge(badges):void 0,color:(0,_types_Colors__WEBPACK_IMPORTED_MODULE_10__.hx)(color),conversationType:"direct",i18n,isMe:Boolean(isMe),profileName,sharedGroupNames,size:_Avatar__WEBPACK_IMPORTED_MODULE_2__.DZ.FORTY_EIGHT,storyRing:avatarStoryRing,theme:_types_Util__WEBPACK_IMPORTED_MODULE_9__.f8.dark,title})}function StoryListItem(_ref2){var avatarStoryRing,repliesElement,conversationId=_ref2.conversationId,getPreferredBadge=_ref2.getPreferredBadge,group=_ref2.group,hasReplies=_ref2.hasReplies,hasRepliesFromSelf=_ref2.hasRepliesFromSelf,i18n=_ref2.i18n,isHidden=_ref2.isHidden,onGoToConversation=_ref2.onGoToConversation,onHideStory=_ref2.onHideStory,onMediaPlaybackStart=_ref2.onMediaPlaybackStart,queueStoryDownload=_ref2.queueStoryDownload,story=_ref2.story,viewUserStories=_ref2.viewUserStories,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),hasConfirmHideStory=_useState2[0],setHasConfirmHideStory=_useState2[1],attachment=story.attachment,isUnread=story.isUnread,sender=story.sender,timestamp=story.timestamp,firstName=sender.firstName,title=sender.title,isSignalOfficial=sender.uuid===_types_SignalConversation__WEBPACK_IMPORTED_MODULE_5__._;attachment&&(avatarStoryRing=isUnread?_types_Stories__WEBPACK_IMPORTED_MODULE_6__.$q.Unread:_types_Stories__WEBPACK_IMPORTED_MODULE_6__.$q.Read),void 0===group&&hasRepliesFromSelf?repliesElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"StoryListItem__info--replies--self"}):group&&(hasReplies||hasRepliesFromSelf)&&(repliesElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"StoryListItem__info--replies--others"}));var menuOptions=[{icon:"StoryListItem__icon--hide",label:i18n(isHidden?"icu:StoryListItem__unhide":"icu:StoryListItem__hide"),onClick:function(){isHidden?onHideStory(conversationId):setHasConfirmHideStory(!0)}}];return isSignalOfficial||(menuOptions.push({icon:"StoryListItem__icon--info",label:i18n("icu:StoryListItem__info"),onClick:function(){return viewUserStories({conversationId,viewTarget:_types_Stories__WEBPACK_IMPORTED_MODULE_6__.Zk.Details})}}),menuOptions.push({icon:"StoryListItem__icon--chat",label:i18n("icu:StoryListItem__go-to-chat"),onClick:function(){return onGoToConversation(conversationId)}})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)(_ContextMenu__WEBPACK_IMPORTED_MODULE_4__.x,{"aria-label":i18n("icu:StoryListItem__label"),i18n,menuOptions,moduleClassName:classnames__WEBPACK_IMPORTED_MODULE_1___default()("StoryListItem",{"StoryListItem--hidden":isHidden}),onClick:function(){return viewUserStories({conversationId})},popperOptions:{placement:"bottom",strategy:"absolute"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(StoryListItemAvatar,Object.assign({avatarStoryRing,getPreferredBadge,i18n},group||sender)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"StoryListItem__info",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsxs)("div",{className:"StoryListItem__info--title",children:[group?group.title:title,isSignalOfficial&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("span",{className:"StoryListItem__signal-official"})]}),!isSignalOfficial&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_7__.i,{i18n,isRelativeTime:!0,module:"StoryListItem__info--timestamp",timestamp}),repliesElement]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)("div",{className:"StoryListItem__previews",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_StoryImage__WEBPACK_IMPORTED_MODULE_8__.s,{attachment,firstName:firstName||title,i18n,isThumbnail:!0,label:"",moduleClassName:"StoryListItem__previews--image",queueStoryDownload,storyId:story.messageId,onMediaPlaybackStart})})]}),hasConfirmHideStory&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_3__.U,{dialogName:"StoryListItem.hideStory",actions:[{action:function(){return onHideStory(conversationId)},style:"affirmative",text:i18n("icu:StoryListItem__hide-modal--confirm")}],i18n,onClose:function(){setHasConfirmHideStory(!1)},children:i18n("icu:StoryListItem__hide-modal--body",{name:String(firstName)})})]})}StoryListItemAvatar.displayName="StoryListItemAvatar"},"./ts/components/UserText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>UserText});__webpack_require__("./node_modules/react/index.js");var _conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UserText(_ref){var text=_ref.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{dir:"auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__.u,{text})})}UserText.displayName="UserText"},"./ts/hooks/useRestoreFocus.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>useRestoreFocus,e:()=>useDelayedRestoreFocus});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]},useDelayedRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){var timeout=setTimeout((function setFocus(){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),250);return function(){clearTimeout(timeout)}}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]}},"./ts/hooks/useRetryStorySend.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>useRetryStorySend});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components_Alert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Alert.tsx"),_types_Stories__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/Stories.ts"),_usePrevious__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/hooks/usePrevious.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRetryStorySend(i18n,sendStatus){var _useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),hasSendFailedAlert=_useState2[0],setHasSendFailedAlert=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),wasManuallyRetried=_useState4[0],setWasManuallyRetried=_useState4[1],previousSendStatus=(0,_usePrevious__WEBPACK_IMPORTED_MODULE_3__.D)(sendStatus,sendStatus);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){wasManuallyRetried&&previousSendStatus!==sendStatus&&(sendStatus!==_types_Stories__WEBPACK_IMPORTED_MODULE_2__.Ox.Failed&&sendStatus!==_types_Stories__WEBPACK_IMPORTED_MODULE_2__.Ox.PartiallySent||setHasSendFailedAlert(!0))}),[previousSendStatus,sendStatus,wasManuallyRetried]),{renderAlert:function renderAlert(){return hasSendFailedAlert?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_components_Alert__WEBPACK_IMPORTED_MODULE_1__.b,{body:i18n("icu:Stories__failed-send"),i18n,onClose:function(){return setHasSendFailedAlert(!1)}}):null},setWasManuallyRetried,wasManuallyRetried}}},"./ts/util/isNotNil.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isNotNil(value){return null!=value}__webpack_require__.d(__webpack_exports__,{D:()=>isNotNil})},"./ts/util/leftPaneWidth.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>MAX_WIDTH,rv:()=>MIN_FULL_WIDTH,FL:()=>MIN_WIDTH,D8:()=>SNAP_WIDTH,T1:()=>getWidthFromPreferredWidth});var clamp=__webpack_require__("./node_modules/lodash/clamp.js"),clamp_default=__webpack_require__.n(clamp);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var assert=__webpack_require__("./ts/util/assert.ts"),MIN_WIDTH=97,SNAP_WIDTH=200,MIN_FULL_WIDTH=280,MAX_WIDTH=380;function getWidthFromPreferredWidth(preferredWidth,_ref){var requiresFullWidth=_ref.requiresFullWidth,clampedWidth=clamp_default()(preferredWidth,MIN_WIDTH,MAX_WIDTH);return requiresFullWidth||clampedWidth>=SNAP_WIDTH?Math.max(clampedWidth,MIN_FULL_WIDTH):MIN_WIDTH}(0,assert.Yj)(function isSorted(list){var previousItem,_step,_iterator=_createForOfIteratorHelper(list);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(void 0!==previousItem&&item<previousItem)return!1;previousItem=item}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!0}([MIN_WIDTH,SNAP_WIDTH,MIN_FULL_WIDTH,MAX_WIDTH]),"Expected widths to be in the right order")},"./node_modules/lodash/_baseClamp.js":module=>{module.exports=function baseClamp(number,lower,upper){return number==number&&(void 0!==upper&&(number=number<=upper?number:upper),void 0!==lower&&(number=number>=lower?number:lower)),number}},"./node_modules/lodash/_baseFindIndex.js":module=>{module.exports=function baseFindIndex(array,predicate,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?1:-1);fromRight?index--:++index<length;)if(predicate(array[index],index,array))return index;return-1}},"./node_modules/lodash/clamp.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseClamp=__webpack_require__("./node_modules/lodash/_baseClamp.js"),toNumber=__webpack_require__("./node_modules/lodash/toNumber.js");module.exports=function clamp(number,lower,upper){return void 0===upper&&(upper=lower,lower=void 0),void 0!==upper&&(upper=(upper=toNumber(upper))==upper?upper:0),void 0!==lower&&(lower=(lower=toNumber(lower))==lower?lower:0),baseClamp(toNumber(number),lower,upper)}},"./node_modules/lodash/first.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":module=>{module.exports=function head(array){return array&&array.length?array[0]:void 0}}}]);