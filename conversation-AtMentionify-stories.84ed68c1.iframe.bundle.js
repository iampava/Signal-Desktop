/*! For license information please see conversation-AtMentionify-stories.84ed68c1.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[690,3905],{"./ts/components/conversation/AtMention.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>AtMention});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),_Emojify__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./ts/components/conversation/Emojify.tsx")),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function AtMention(_ref){var direction=_ref.direction,id=_ref.id,isInvisible=_ref.isInvisible,name=_ref.name,onClick=_ref.onClick,onKeyUp=_ref.onKeyUp;return isInvisible?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("MessageBody__at-mention","MessageBody__at-mention--invisible"),"data-id":id,"data-title":name,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("bdi",{children:["@",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Emojify__WEBPACK_IMPORTED_MODULE_2__.u,{isInvisible,text:name})]})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("MessageBody__at-mention",`MessageBody__at-mention--${direction}`),onClick,onKeyUp,tabIndex:0,role:"link","data-id":id,"data-title":name,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("bdi",{children:["@",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Emojify__WEBPACK_IMPORTED_MODULE_2__.u,{isInvisible,text:name})]})})}AtMention.displayName="AtMention"},"./ts/components/conversation/AtMentionify.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ComplexMentions:()=>ComplexMentions,MultipleMentions:()=>MultipleMentions,NoMentions:()=>NoMentions,WithOddCharacter:()=>WithOddCharacter,__namedExportsOrder:()=>__namedExportsOrder,default:()=>AtMentionify_stories});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),sortBy=__webpack_require__("./node_modules/lodash/sortBy.js"),sortBy_default=__webpack_require__.n(sortBy),AtMention=__webpack_require__("./ts/components/conversation/AtMention.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function AtMentionify(_ref){var mentions=_ref.mentions,direction=_ref.direction,showConversation=_ref.showConversation,text=_ref.text;if(!mentions)return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:text});var MENTIONS_REGEX=/(\uFFFC@(\d+))/g,match=MENTIONS_REGEX.exec(text),last=0,rangeStarts=new Map;mentions.forEach((function(range){rangeStarts.set(range.start,range)}));for(var results=[],_loop=function(){if(last<match.index){var textWithNoMentions=text.slice(last,match.index);results.push(textWithNoMentions)}var rangeStart=Number(match[2]),range=rangeStarts.get(rangeStart);range&&results.push((0,jsx_runtime.jsx)(AtMention.Q,{direction,isInvisible:!1,onClick:function(){showConversation&&showConversation({conversationId:range.conversationID})},onKeyUp:function(e){e.target===e.currentTarget&&13===e.keyCode&&showConversation&&showConversation({conversationId:range.conversationID})},id:range.conversationID,name:range.replacementText},range.start)),last=MENTIONS_REGEX.lastIndex,match=MENTIONS_REGEX.exec(text)};match;)_loop();return last<text.length&&results.push(text.slice(last)),(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:results})}AtMentionify.preprocessMentions=function(text,mentions){return mentions&&mentions.length?sortBy_default()(mentions,"start").reduceRight((function(str,range){return`${str.substr(0,range.start)}${`￼@${range.start}`}${str.substr(range.start+range.length,str.length)}`}),text):text};const AtMentionify_stories={title:"Components/Conversation/AtMentionify"};var createProps=function(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{mentions:overrideProps.mentions,direction:overrideProps.direction||"incoming",showConversation:(0,esm.action)("showConversation"),text:overrideProps.text||""}};function NoMentions(){var props=createProps({text:"Hello World"});return(0,jsx_runtime.jsx)(AtMentionify,Object.assign({},props))}function MultipleMentions(){var mentions=[{start:4,length:1,mentionUuid:"abc",replacementText:"Professor Farnsworth",conversationID:"x"},{start:2,length:1,mentionUuid:"def",replacementText:"Philip J Fry",conversationID:"x"},{start:0,length:1,mentionUuid:"xyz",replacementText:"Yancy Fry",conversationID:"x"}],props=createProps({mentions,direction:"outgoing",text:AtMentionify.preprocessMentions("￼ ￼ ￼",mentions)});return(0,jsx_runtime.jsx)(AtMentionify,Object.assign({},props))}function ComplexMentions(){var mentions=[{start:80,length:1,mentionUuid:"ioe",replacementText:"Cereal Killer",conversationID:"x"},{start:78,length:1,mentionUuid:"fdr",replacementText:"Acid Burn",conversationID:"x"},{start:4,length:1,mentionUuid:"ope",replacementText:"Zero Cool",conversationID:"x"}],props=createProps({mentions,text:AtMentionify.preprocessMentions("Hey ￼\nCheck out https://www.signal.org I think you will really like it 😍\n\ncc ￼ ￼",mentions)});return(0,jsx_runtime.jsx)(AtMentionify,Object.assign({},props))}function WithOddCharacter(){var mentions=[{start:4,length:1,mentionUuid:"ope",replacementText:"Zero Cool",conversationID:"x"}],props=createProps({mentions,text:AtMentionify.preprocessMentions("Hey ￼ - Check out │https://www.signal.org│",mentions)});return(0,jsx_runtime.jsx)(AtMentionify,Object.assign({},props))}NoMentions.displayName="NoMentions",MultipleMentions.displayName="MultipleMentions",ComplexMentions.displayName="ComplexMentions",WithOddCharacter.displayName="WithOddCharacter";var __namedExportsOrder=["NoMentions","MultipleMentions","ComplexMentions","WithOddCharacter"]},"./node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?module.exports=classNames:void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);