/*! For license information please see ShortcutGuide-stories.316fa82b.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[9448,3905],{"./ts/components/ShortcutGuide.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,HasStickers:()=>HasStickers,Mac:()=>Mac,NoFormatting:()=>NoFormatting,NoSpoilerFormatting:()=>NoSpoilerFormatting,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ShortcutGuide_stories});__webpack_require__("./node_modules/react/index.js");var esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),setupI18n=__webpack_require__("./ts/util/setupI18n.ts"),messages=__webpack_require__("./_locales/en/messages.json"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),useRestoreFocus=__webpack_require__("./ts/hooks/useRestoreFocus.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getNavigationShortcuts(i18n){return[{id:"Keyboard--navigate-by-section",description:i18n("icu:Keyboard--navigate-by-section"),keys:[["commandOrCtrl","T"],["commandOrCtrl","F6"]]},{id:"Keyboard--previous-conversation",description:i18n("icu:Keyboard--previous-conversation"),keys:[["optionOrAlt","↑"],["ctrl","shift","tab"]]},{id:"Keyboard--next-conversation",description:i18n("icu:Keyboard--next-conversation"),keys:[["optionOrAlt","↓"],["ctrl","tab"]]},{id:"Keyboard--previous-unread-conversation",description:i18n("icu:Keyboard--previous-unread-conversation"),keys:[["optionOrAlt","shift","↑"]]},{id:"Keyboard--next-unread-conversation",description:i18n("icu:Keyboard--next-unread-conversation"),keys:[["optionOrAlt","shift","↓"]]},{id:"Keyboard--conversation-by-index",description:i18n("icu:Keyboard--conversation-by-index"),keys:[["commandOrCtrl","1 to 9"]]},{id:"Keyboard--most-recent-message",description:i18n("icu:Keyboard--focus-most-recent-message"),keys:[["commandOrCtrl","J"]]},{id:"Keyboard--preferences",description:i18n("icu:Keyboard--preferences"),keys:[["commandOrCtrl",","]]},{id:"Keyboard--open-conversation-menu",description:i18n("icu:Keyboard--open-conversation-menu"),keys:[["commandOrCtrl","shift","L"]]},{id:"Keyboard--new-conversation",description:i18n("icu:Keyboard--new-conversation"),keys:[["commandOrCtrl","N"]]},{id:"Keyboard--search",description:i18n("icu:Keyboard--search"),keys:[["commandOrCtrl","F"]]},{id:"Keyboard--search-in-conversation",description:i18n("icu:Keyboard--search-in-conversation"),keys:[["commandOrCtrl","shift","F"]]},{id:"Keyboard--focus-composer",description:i18n("icu:Keyboard--focus-composer"),keys:[["commandOrCtrl","shift","T"]]},{id:"Keyboard--open-all-media-view",description:i18n("icu:Keyboard--open-all-media-view"),keys:[["commandOrCtrl","shift","M"]]},{id:"Keyboard--open-emoji-chooser",description:i18n("icu:Keyboard--open-emoji-chooser"),keys:[["commandOrCtrl","shift","J"]]},{id:"Keyboard--open-sticker-chooser",description:i18n("icu:Keyboard--open-sticker-chooser"),keys:[["commandOrCtrl","shift","G"]]},{id:"Keyboard--begin-recording-voice-note",description:i18n("icu:Keyboard--begin-recording-voice-note"),keys:[["commandOrCtrl","shift","V"]]},{id:"Keyboard--archive-conversation",description:i18n("icu:Keyboard--archive-conversation"),keys:[["commandOrCtrl","shift","A"]]},{id:"Keyboard--unarchive-conversation",description:i18n("icu:Keyboard--unarchive-conversation"),keys:[["commandOrCtrl","shift","U"]]},{id:"Keyboard--scroll-to-top",description:i18n("icu:Keyboard--scroll-to-top"),keys:[["commandOrCtrl","↑"]]},{id:"Keyboard--scroll-to-bottom",description:i18n("icu:Keyboard--scroll-to-bottom"),keys:[["commandOrCtrl","↓"]]},{id:"Keyboard--close-curent-conversation",description:i18n("icu:Keyboard--close-curent-conversation"),keys:[["commandOrCtrl","shift","C"]]}]}function getMessageShortcuts(i18n){return[{id:"Keyboard--default-message-action",description:i18n("icu:Keyboard--default-message-action"),keys:[["enter"]]},{id:"Keyboard--view-details-for-selected-message",description:i18n("icu:Keyboard--view-details-for-selected-message"),keys:[["commandOrCtrl","D"]]},{id:"Keyboard--toggle-reply",description:i18n("icu:Keyboard--toggle-reply"),keys:[["commandOrCtrl","shift","R"]]},{id:"Keyboard--toggle-reaction-picker",description:i18n("icu:Keyboard--toggle-reaction-picker"),keys:[["commandOrCtrl","shift","E"]]},{id:"Keyboard--save-attachment",description:i18n("icu:Keyboard--save-attachment"),keys:[["commandOrCtrl","S"]]},{id:"Keyboard--delete-messages",description:i18n("icu:Keyboard--delete-messages"),keys:[["commandOrCtrl","shift","D"]]},{id:"Keyboard--forward-messages",description:i18n("icu:Keyboard--forward-messages"),keys:[["commandOrCtrl","shift","S"]]}]}function getComposerShortcuts(i18n,isFormattingFlagEnabled,isFormattingSpoilersFlagEnabled){var shortcuts=[{id:"Keyboard--add-newline",description:i18n("icu:Keyboard--add-newline"),keys:[["shift","enter"]]},{id:"Keyboard--expand-composer",description:i18n("icu:Keyboard--expand-composer"),keys:[["commandOrCtrl","shift","K"]]},{id:"Keyboard--send-in-expanded-composer",description:i18n("icu:Keyboard--send-in-expanded-composer"),keys:[["commandOrCtrl","enter"]]},{id:"Keyboard--attach-file",description:i18n("icu:Keyboard--attach-file"),keys:[["commandOrCtrl","U"]]},{id:"Keyboard--remove-draft-link-preview",description:i18n("icu:Keyboard--remove-draft-link-preview"),keys:[["commandOrCtrl","P"]]},{id:"Keyboard--remove-draft-attachments",description:i18n("icu:Keyboard--remove-draft-attachments"),keys:[["commandOrCtrl","shift","P"]]}];return isFormattingFlagEnabled&&(shortcuts.push({id:"Keyboard--composer--bold",description:i18n("icu:Keyboard--composer--bold"),keys:[["commandOrCtrl","B"]]}),shortcuts.push({id:"Keyboard--composer--italic",description:i18n("icu:Keyboard--composer--italic"),keys:[["commandOrCtrl","I"]]}),shortcuts.push({id:"Keyboard--composer--strikethrough",description:i18n("icu:Keyboard--composer--strikethrough"),keys:[["commandOrCtrl","shift","X"]]}),shortcuts.push({id:"Keyboard--composer--monospace",description:i18n("icu:Keyboard--composer--monospace"),keys:[["commandOrCtrl","E"]]}),isFormattingSpoilersFlagEnabled&&shortcuts.push({id:"Keyboard--composer--spoiler",description:i18n("icu:Keyboard--composer--spoiler"),keys:[["commandOrCtrl","shift","B"]]})),shortcuts}function getCallingShortcuts(i18n){return[{id:"Keyboard--toggle-audio",description:i18n("icu:Keyboard--toggle-audio"),keys:[["shift","M"]]},{id:"Keyboard--toggle-video",description:i18n("icu:Keyboard--toggle-video"),keys:[["shift","V"]]},{id:"icu:Keyboard--accept-video-call",description:i18n("icu:Keyboard--accept-video-call"),keys:[["ctrlOrAlt","shift","V"]]},{id:"icu:Keyboard--accept-call-without-video",description:i18n("icu:Keyboard--accept-call-without-video"),keys:[["ctrlOrAlt","shift","A"]]},{id:"Keyboard--decline-call",description:i18n("icu:Keyboard--decline-call"),keys:[["ctrlOrAlt","shift","D"]]},{id:"Keyboard--start-audio-call",description:i18n("icu:Keyboard--start-audio-call"),keys:[["ctrlOrAlt","shift","C"]]},{id:"Keyboard--start-video-call",description:i18n("icu:Keyboard--start-video-call"),keys:[["ctrlOrAlt","shift","Y"]]},{id:"Keyboard--hang-up",description:i18n("icu:Keyboard--hang-up"),keys:[["ctrlOrAlt","shift","E"]]}]}function ShortcutGuide(props){var i18n=props.i18n,close=props.close,hasInstalledStickers=props.hasInstalledStickers,isFormattingFlagEnabled=props.isFormattingFlagEnabled,isFormattingSpoilersFlagEnabled=props.isFormattingSpoilersFlagEnabled,isMacOS="darwin"===props.platform,focusRef=_slicedToArray((0,useRestoreFocus.H)(),1)[0];return(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide",children:[(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__header",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__header-text",children:i18n("icu:Keyboard--header")}),(0,jsx_runtime.jsx)("button",{"aria-label":i18n("icu:close-popup"),className:"module-shortcut-guide__header-close",onClick:close,title:i18n("icu:close-popup"),type:"button"})]}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__scroll-container",ref:focusRef,tabIndex:-1,children:(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__section-container",children:[(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__section",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-header",children:i18n("icu:Keyboard--navigation-header")}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-list",children:getNavigationShortcuts(i18n).map((function(shortcut,index){return hasInstalledStickers||"Keyboard--open-sticker-chooser"!==shortcut.description?renderShortcut(shortcut,index,isMacOS,i18n):null}))})]}),(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__section",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-header",children:i18n("icu:Keyboard--messages-header")}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-list",children:getMessageShortcuts(i18n).map((function(shortcut,index){return renderShortcut(shortcut,index,isMacOS,i18n)}))})]}),(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__section",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-header",children:i18n("icu:Keyboard--composer-header")}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-list",children:getComposerShortcuts(i18n,isFormattingFlagEnabled,isFormattingSpoilersFlagEnabled).map((function(shortcut,index){return renderShortcut(shortcut,index,isMacOS,i18n)}))})]}),(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__section",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-header",children:i18n("icu:Keyboard--calling-header")}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__section-list",children:getCallingShortcuts(i18n).map((function(shortcut,index){return renderShortcut(shortcut,index,isMacOS,i18n)}))})]})]})})]})}function renderShortcut(shortcut,index,isMacOS,i18n){return(0,jsx_runtime.jsxs)("div",{className:"module-shortcut-guide__shortcut",children:[(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__shortcut__description",children:shortcut.description}),(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__shortcut__key-container",children:shortcut.keys.map((function(keys){return(0,jsx_runtime.jsx)("div",{className:"module-shortcut-guide__shortcut__key-inner-container",children:keys.map((function(key){var label=key,isSquare=!0;return"commandOrCtrl"===key&&isMacOS&&(label="⌘"),"commandOrCtrl"!==key||isMacOS||(label=i18n("icu:Keyboard--Key--ctrl"),isSquare=!1),"ctrlOrAlt"===key&&isMacOS&&(label=i18n("icu:Keyboard--Key--ctrl"),isSquare=!1),"ctrlOrAlt"!==key||isMacOS||(label=i18n("icu:Keyboard--Key--alt"),isSquare=!1),"optionOrAlt"===key&&isMacOS&&(label=i18n("icu:Keyboard--Key--option"),isSquare=!1),"optionOrAlt"!==key||isMacOS||(label=i18n("icu:Keyboard--Key--alt"),isSquare=!1),"ctrl"===key&&(label=i18n("icu:Keyboard--Key--ctrl"),isSquare=!1),"shift"===key&&(label=i18n("icu:Keyboard--Key--shift"),isSquare=!1),"enter"===key&&(label=i18n("icu:Keyboard--Key--enter"),isSquare=!1),"tab"===key&&(label=i18n("icu:Keyboard--Key--tab"),isSquare=!1),"1 to 9"===key&&(label=i18n("icu:Keyboard--Key--one-to-nine-range"),isSquare=!1),(0,jsx_runtime.jsx)("span",{className:classnames_default()("module-shortcut-guide__shortcut__key",isSquare?"module-shortcut-guide__shortcut__key--square":null),children:label},`shortcut__key--${key}`)}))},`${shortcut.description}--${keys.map((function(k){return k})).join("-")}`)}))})]},index)}ShortcutGuide.displayName="ShortcutGuide",renderShortcut.displayName="renderShortcut";var i18n=(0,setupI18n.E5)("en",messages);const ShortcutGuide_stories={title:"Components/ShortcutGuide"};var createProps=function(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{i18n,close:(0,esm.action)("close"),isFormattingFlagEnabled:!1!==overrideProps.isFormattingFlagEnabled||overrideProps.isFormattingFlagEnabled,isFormattingSpoilersFlagEnabled:!1!==overrideProps.isFormattingSpoilersFlagEnabled||overrideProps.isFormattingSpoilersFlagEnabled,hasInstalledStickers:!0===overrideProps.hasInstalledStickers||!1,platform:overrideProps.platform||"other"}};function Default(){var props=createProps({});return(0,jsx_runtime.jsx)(ShortcutGuide,Object.assign({},props))}function Mac(){var props=createProps({platform:"darwin"});return(0,jsx_runtime.jsx)(ShortcutGuide,Object.assign({},props))}function HasStickers(){var props=createProps({hasInstalledStickers:!0});return(0,jsx_runtime.jsx)(ShortcutGuide,Object.assign({},props))}function NoFormatting(){var props=createProps({isFormattingFlagEnabled:!1});return(0,jsx_runtime.jsx)(ShortcutGuide,Object.assign({},props))}function NoSpoilerFormatting(){var props=createProps({isFormattingSpoilersFlagEnabled:!1});return(0,jsx_runtime.jsx)(ShortcutGuide,Object.assign({},props))}Default.displayName="Default",Mac.displayName="Mac",HasStickers.displayName="HasStickers",NoFormatting.displayName="NoFormatting",NoSpoilerFormatting.displayName="NoSpoilerFormatting";var __namedExportsOrder=["Default","Mac","HasStickers","NoFormatting","NoSpoilerFormatting"]},"./ts/hooks/useRestoreFocus.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{H:()=>useRestoreFocus,e:()=>useDelayedRestoreFocus});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]},useDelayedRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){var timeout=setTimeout((function setFocus(){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),250);return function(){clearTimeout(timeout)}}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]}},"./node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?module.exports=classNames:void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);