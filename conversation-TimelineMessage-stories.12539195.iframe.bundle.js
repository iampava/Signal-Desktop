"use strict";(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[7456],{"./ts/badges/BadgeCategory.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>parseBadgeCategory,Q:()=>BadgeCategory});var BadgeCategory,_util_enum__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/enum.ts");!function(BadgeCategory){BadgeCategory.Donor="donor",BadgeCategory.Other="other"}(BadgeCategory||(BadgeCategory={}));var parseBadgeCategory=(0,_util_enum__WEBPACK_IMPORTED_MODULE_0__.m)(BadgeCategory,BadgeCategory.Other)},"./ts/components/PlaybackButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>PlaybackButton});var _react_spring_web__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SPRING_CONFIG={mass:.5,tension:350,friction:20,velocity:.01},PlaybackButton=react__WEBPACK_IMPORTED_MODULE_2__.forwardRef((function ButtonInner(props,ref){var mod=props.mod,label=props.label,variant=props.variant,onClick=props.onClick,context=props.context,_props$visible=props.visible,visible=void 0===_props$visible||_props$visible,animProps=_slicedToArray((0,_react_spring_web__WEBPACK_IMPORTED_MODULE_0__.useSpring)({config:SPRING_CONFIG,to:{scale:visible?1:0}},[visible]),1)[0],onButtonClick=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(event){event.stopPropagation(),event.preventDefault(),onClick()}),[onClick]),onButtonKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(event){"Enter"!==event.key&&"Space"!==event.key||(event.stopPropagation(),event.preventDefault(),onClick())}),[onClick]),buttonComponent=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{type:"button",ref,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("PlaybackButton",`PlaybackButton--variant-${variant}`,context&&`PlaybackButton--context-${context}`,mod?`PlaybackButton--${mod}`:void 0),onClick:onButtonClick,onKeyDown:onButtonKeyDown,tabIndex:0,"aria-label":label});return"message"===variant?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_react_spring_web__WEBPACK_IMPORTED_MODULE_0__.animated.div,{style:animProps,children:buttonComponent}):buttonComponent}))},"./ts/components/PlaybackRateButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{R:()=>PlaybackRateButton});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_react_spring_web__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var SPRING_CONFIG={mass:.5,tension:350,friction:20,velocity:.01};function PlaybackRateButton(_ref){var playbackRate=_ref.playbackRate,variant=_ref.variant,_ref$visible=_ref.visible,visible=void 0===_ref$visible||_ref$visible,i18n=_ref.i18n,onClick=_ref.onClick,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),isDown=_useState2[0],setIsDown=_useState2[1],animProps=_slicedToArray((0,_react_spring_web__WEBPACK_IMPORTED_MODULE_2__.useSpring)({config:SPRING_CONFIG,to:isDown?{scale:1.3}:{scale:visible?1:0}},[visible,isDown]),1)[0],onButtonClick=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(event){event.stopPropagation(),event.preventDefault(),onClick()}),[onClick]),onButtonKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(event){"Enter"!==event.key&&"Space"!==event.key||(event.stopPropagation(),event.preventDefault(),onClick())}),[onClick]),playbackRateLabels={1:i18n("icu:MessageAudio--playbackRate1"),1.5:i18n("icu:MessageAudio--playbackRate1p5"),2:i18n("icu:MessageAudio--playbackRate2"),.5:i18n("icu:MessageAudio--playbackRatep5")},label=playbackRate?playbackRateLabels[playbackRate].toString():void 0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_react_spring_web__WEBPACK_IMPORTED_MODULE_2__.animated.div,{style:animProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{type:"button",className:classnames__WEBPACK_IMPORTED_MODULE_0___default()("PlaybackRateButton",`PlaybackRateButton--${variant}`),onClick:onButtonClick,onKeyDown:onButtonKeyDown,onMouseDown:function(){return setIsDown(!0)},onMouseUp:function(){return setIsDown(!1)},onMouseLeave:function(){return setIsDown(!1)},"aria-label":label,tabIndex:0,children:label})})}PlaybackRateButton.displayName="PlaybackRateButton";var playbackRates=[1,1.5,2,.5];PlaybackRateButton.nextPlaybackRate=function(currentRate){return playbackRates[(playbackRates.indexOf(currentRate)+1)%playbackRates.length]}},"./ts/components/VoiceNotesPlaybackContext.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{JM:()=>computePeaks});__webpack_require__("./node_modules/react/index.js");var audioContext,p_queue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/p-queue/dist/index.js"),lru_cache__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lru-cache/index.js"),lru_cache__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lru_cache__WEBPACK_IMPORTED_MODULE_2__),_logging_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/logging/log.ts"),waveformCache=(__webpack_require__("./node_modules/react/jsx-runtime.js"),new(lru_cache__WEBPACK_IMPORTED_MODULE_2___default())({max:1e3})),inProgressMap=new Map,computeQueue=new p_queue__WEBPACK_IMPORTED_MODULE_1__.Z({concurrency:8});async function doComputePeaks(url,barCount){var cacheKey=`${url}:${barCount}`,existing=waveformCache.get(cacheKey);if(existing)return _logging_log__WEBPACK_IMPORTED_MODULE_3__.info("GlobalAudioContext: waveform cache hit",url),Promise.resolve(existing);_logging_log__WEBPACK_IMPORTED_MODULE_3__.info("GlobalAudioContext: waveform cache miss",url);var response=await fetch(url),raw=await response.arrayBuffer(),duration=await async function getAudioDuration(url,buffer){var blob=new Blob([buffer]),blobURL=URL.createObjectURL(blob),audio=new Audio;if(audio.muted=!0,audio.src=blobURL,await new Promise((function(resolve,reject){audio.addEventListener("loadedmetadata",(function(){resolve()})),audio.addEventListener("error",(function(event){var error=new Error(`Failed to load audio from: ${url} due to error: ${event.type}`);reject(error)}))})),Number.isNaN(audio.duration))throw new Error(`Invalid audio duration for: ${url}`);return audio.duration}(url,raw),peaks=new Array(barCount).fill(0);if(duration>900){_logging_log__WEBPACK_IMPORTED_MODULE_3__.info(`GlobalAudioContext: audio ${url} duration ${duration}s is too long`);var emptyResult={peaks,duration};return waveformCache.set(cacheKey,emptyResult),emptyResult}audioContext||(audioContext=new AudioContext,await audioContext.suspend());for(var data=await audioContext.decodeAudioData(raw),norms=new Array(barCount).fill(0),samplesPerPeak=data.length/peaks.length,channelNum=0;channelNum<data.numberOfChannels;channelNum+=1)for(var channel=data.getChannelData(channelNum),sample=0;sample<channel.length;sample+=1){var i=Math.floor(sample/samplesPerPeak);peaks[i]+=channel[sample]**2,norms[i]+=1}for(var max=1e-23,_i=0;_i<peaks.length;_i+=1)peaks[_i]=Math.sqrt(peaks[_i]/Math.max(1,norms[_i])),max=Math.max(max,peaks[_i]);for(var _i2=0;_i2<peaks.length;_i2+=1)peaks[_i2]/=max;var result={peaks,duration};return waveformCache.set(cacheKey,result),result}async function computePeaks(url,barCount){var computeKey=`${url}:${barCount}`,pending=inProgressMap.get(computeKey);if(pending)return _logging_log__WEBPACK_IMPORTED_MODULE_3__.info("VoiceNotesPlaybackContext: already computing peaks for",computeKey),pending;_logging_log__WEBPACK_IMPORTED_MODULE_3__.info("VoiceNotesPlaybackContext: queue computing peaks for",computeKey);var promise=computeQueue.add((function(){return doComputePeaks(url,barCount)}));inProgressMap.set(computeKey,promise);try{return await promise}finally{inProgressMap.delete(computeKey)}}},"./ts/components/conversation/TimelineMessage.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllTheContextMenus:()=>AllTheContextMenus,AudioWithCaption:()=>AudioWithCaption,AudioWithNotDownloadedAttachment:()=>AudioWithNotDownloadedAttachment,AudioWithPendingAttachment:()=>AudioWithPendingAttachment,AvatarInGroup:()=>AvatarInGroup,BadgeInGroup:()=>BadgeInGroup,CanDeleteForEveryone:()=>CanDeleteForEveryone,CollapsingTextOnlyDMs:()=>CollapsingTextOnlyDMs,CollapsingTextOnlyGroupMessages:()=>CollapsingTextOnlyGroupMessages,Colors:()=>TimelineMessage_stories_Colors,CustomColor:()=>CustomColor,DangerousFileType:()=>DangerousFileType,Deleted:()=>Deleted,DeletedWithError:()=>DeletedWithError,DeletedWithExpireTimer:()=>DeletedWithExpireTimer,Delivered:()=>Delivered,EditError:()=>EditError,EmbeddedContactFamilyName:()=>EmbeddedContactFamilyName,EmbeddedContactFullContact:()=>EmbeddedContactFullContact,EmbeddedContactGivenFamilyName:()=>EmbeddedContactGivenFamilyName,EmbeddedContactGivenName:()=>EmbeddedContactGivenName,EmbeddedContactLoadingAvatar:()=>EmbeddedContactLoadingAvatar,EmbeddedContactOnlyEmail:()=>EmbeddedContactOnlyEmail,EmbeddedContactOrganization:()=>EmbeddedContactOrganization,EmbeddedContactWithSendMessage:()=>EmbeddedContactWithSendMessage,EmojiMessages:()=>EmojiMessages,Error:()=>TimelineMessage_stories_Error,Expiring:()=>Expiring,Gif:()=>Gif,GifInAGroup:()=>GifInAGroup,GiftBadgeMissingBadge:()=>GiftBadgeMissingBadge,GiftBadgeOpened60Minutes:()=>GiftBadgeOpened60Minutes,GiftBadgeOpenedExpired:()=>GiftBadgeOpenedExpired,GiftBadgeRedeemed1Minute:()=>GiftBadgeRedeemed1Minute,GiftBadgeRedeemed24Hours:()=>GiftBadgeRedeemed24Hours,GiftBadgeRedeemed30Days:()=>GiftBadgeRedeemed30Days,GiftBadgeUnopened:()=>GiftBadgeUnopened,Image:()=>Image,ImageWithCaption:()=>ImageWithCaption,LinkPreviewInGroup:()=>LinkPreviewInGroup,LinkPreviewWithLongDescription:()=>LinkPreviewWithLongDescription,LinkPreviewWithNoDate:()=>LinkPreviewWithNoDate,LinkPreviewWithNoDescription:()=>LinkPreviewWithNoDescription,LinkPreviewWithQuote:()=>LinkPreviewWithQuote,LinkPreviewWithSmallImage:()=>LinkPreviewWithSmallImage,LinkPreviewWithSmallImageLongDescription:()=>LinkPreviewWithSmallImageLongDescription,LinkPreviewWithTooNewADate:()=>LinkPreviewWithTooNewADate,LinkPreviewWithoutImage:()=>LinkPreviewWithoutImage,LongAudio:()=>LongAudio,LongBodyCanBeDownloaded:()=>LongBodyCanBeDownloaded,Mentions:()=>Mentions,MultiSelect:()=>MultiSelect,MultipleImages2:()=>MultipleImages2,MultipleImages3:()=>MultipleImages3,MultipleImages4:()=>MultipleImages4,MultipleImages5:()=>MultipleImages5,NotApprovedWithLinkPreview:()=>NotApprovedWithLinkPreview,NotDownloadedGif:()=>NotDownloadedGif,Older:()=>Older,OtherFileType:()=>OtherFileType,OtherFileTypeWithCaption:()=>OtherFileTypeWithCaption,OtherFileTypeWithLongFilename:()=>OtherFileTypeWithLongFilename,PartialSend:()=>PartialSend,Paused:()=>Paused,PaymentNotification:()=>PaymentNotification,Pending:()=>Pending,PendingGif:()=>PendingGif,PlainMessage:()=>PlainMessage,PlainRtlMessage:()=>PlainRtlMessage,Quote:()=>Quote,ReactionsShortMessage:()=>ReactionsShortMessage,ReactionsWiderMessage:()=>ReactionsWiderMessage,Read:()=>Read,Recent:()=>Recent,Sending:()=>Sending,Sticker:()=>Sticker,StoryReply:()=>StoryReply,StoryReplyEmoji:()=>StoryReplyEmoji,StoryReplyYours:()=>StoryReplyYours,TapToViewError:()=>TapToViewError,TapToViewExpired:()=>TapToViewExpired,TapToViewGif:()=>TapToViewGif,TapToViewImage:()=>TapToViewImage,TapToViewVideo:()=>TapToViewVideo,WillExpireButStillSending:()=>WillExpireButStillSending,_Audio:()=>_Audio,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TimelineMessage_stories});var State,noop=__webpack_require__("./node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop),isBoolean=__webpack_require__("./node_modules/lodash/isBoolean.js"),isBoolean_default=__webpack_require__.n(isBoolean),react=__webpack_require__("./node_modules/react/index.js"),esm=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/index.js"),protobuf=__webpack_require__("./ts/protobuf/index.ts"),Colors=__webpack_require__("./ts/types/Colors.ts"),EmojiPicker=__webpack_require__("./ts/components/emoji/EmojiPicker.tsx"),TimelineMessage=__webpack_require__("./ts/components/conversation/TimelineMessage.tsx"),Message=__webpack_require__("./ts/components/conversation/Message.tsx"),MIME=__webpack_require__("./ts/types/MIME.ts"),MessageReadStatus=__webpack_require__("./ts/messages/MessageReadStatus.ts"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react_spring_web_esm=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),Attachment=__webpack_require__("./ts/types/Attachment.ts"),MessageMetadata=__webpack_require__("./ts/components/conversation/MessageMetadata.tsx"),log=__webpack_require__("./ts/logging/log.ts"),PlaybackRateButton=__webpack_require__("./ts/components/PlaybackRateButton.tsx"),PlaybackButton=__webpack_require__("./ts/components/PlaybackButton.tsx"),WaveformScrubber=__webpack_require__("./ts/components/conversation/WaveformScrubber.tsx"),useComputePeaks=__webpack_require__("./ts/hooks/useComputePeaks.ts"),durationToPlaybackText=__webpack_require__("./ts/util/durationToPlaybackText.ts"),shouldNeverBeCalled=__webpack_require__("./ts/util/shouldNeverBeCalled.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(State){State.NotDownloaded="NotDownloaded",State.Pending="Pending",State.Computing="Computing",State.Normal="Normal"}(State||(State={}));var CSS_BASE="module-message__audio-attachment",SPRING_CONFIG={mass:.5,tension:350,friction:20,velocity:.01};function PlayedDot(_ref){var played=_ref.played,onHide=_ref.onHide,start=played?1:0,end=played?0:1,animProps=_slicedToArray((0,react_spring_web_esm.useSpring)({config:SPRING_CONFIG,from:{scale:start,opacity:start,width:start},to:{scale:end,opacity:end,width:14*end},onRest:function(){played&&onHide()}},[played]),1)[0];return(0,jsx_runtime.jsx)(react_spring_web_esm.animated.div,{style:animProps,"aria-hidden":"true",className:classnames_default()(`${CSS_BASE}__dot`,`${CSS_BASE}__dot--${played?"played":"unplayed"}`)})}function MessageAudio(props){var _active$playing,_active$currentTime,_active$currentTime2,state,active=props.active,buttonRef=props.buttonRef,i18n=props.i18n,attachment=props.attachment,collapseMetadata=props.collapseMetadata,withContentAbove=props.withContentAbove,withContentBelow=props.withContentBelow,direction=props.direction,expirationLength=props.expirationLength,expirationTimestamp=props.expirationTimestamp,id=props.id,played=props.played,status=props.status,textPending=props.textPending,timestamp=props.timestamp,kickOffAttachmentDownload=props.kickOffAttachmentDownload,onCorrupted=props.onCorrupted,setPlaybackRate=props.setPlaybackRate,onPlayMessage=props.onPlayMessage,pushPanelForConversation=props.pushPanelForConversation,setPosition=props.setPosition,setIsPlaying=props.setIsPlaying,isPlaying=null!==(_active$playing=null==active?void 0:active.playing)&&void 0!==_active$playing&&_active$playing,_React$useState2=_slicedToArray(react.useState(!played),2),isPlayedDotVisible=_React$useState2[0],setIsPlayedDotVisible=_React$useState2[1],audioUrl=(0,Attachment.TG)(attachment)?attachment.url:void 0,_useComputePeaks=(0,useComputePeaks.a)({audioUrl,activeDuration:null==active?void 0:active.duration,barCount:47,onCorrupted}),duration=_useComputePeaks.duration,hasPeaks=_useComputePeaks.hasPeaks,peaks=_useComputePeaks.peaks;state=attachment.pending?State.Pending:(0,Attachment.TG)(attachment)?hasPeaks?State.Normal:State.Computing:State.NotDownloaded;var button,toggleIsPlaying=(0,react.useCallback)((function(){if(isPlaying)setIsPlaying(!1);else{if(!attachment.url)throw new Error(`Expected attachment url in the MessageAudio with state: ${state}`);active?setIsPlaying(!0):onPlayMessage(id,0)}}),[isPlaying,attachment.url,active,state,setIsPlaying,id,onPlayMessage]),currentTimeOrZero=null!==(_active$currentTime=null==active?void 0:active.currentTime)&&void 0!==_active$currentTime?_active$currentTime:0,updatePosition=(0,react.useCallback)((function(newPosition){if(active)return setPosition(newPosition),void(active.playing||setIsPlaying(!0));attachment.url?onPlayMessage(id,newPosition):log.warn("Waveform clicked on attachment with no url")}),[active,attachment.url,id,onPlayMessage,setIsPlaying,setPosition]),handleWaveformClick=(0,react.useCallback)((function(positionAsRatio){state===State.Normal&&updatePosition(positionAsRatio)}),[state,updatePosition]),handleWaveformScrub=(0,react.useCallback)((function(amountInSeconds){var currentPosition=currentTimeOrZero/duration,positionIncrement=amountInSeconds/duration;updatePosition(Math.min(Math.max(0,currentPosition+positionIncrement),duration))}),[currentTimeOrZero,duration,updatePosition]),waveform=(0,jsx_runtime.jsx)(WaveformScrubber.X,{i18n,peaks,duration,currentTime:currentTimeOrZero,barMinHeight:state!==State.Normal?2:4,barMaxHeight:20,onClick:handleWaveformClick,onScrub:handleWaveformScrub});button=state===State.Pending||state===State.Computing?(0,jsx_runtime.jsx)(PlaybackButton.s,{variant:"message",mod:"pending",onClick:noop_default(),label:i18n("icu:MessageAudio--pending"),context:direction}):state===State.NotDownloaded?(0,jsx_runtime.jsx)(PlaybackButton.s,{ref:buttonRef,variant:"message",mod:"download",label:i18n("icu:MessageAudio--download"),onClick:kickOffAttachmentDownload,context:direction}):(0,jsx_runtime.jsx)(PlaybackButton.s,{ref:buttonRef,variant:"message",mod:isPlaying?"pause":"play",label:i18n(isPlaying?"icu:MessageAudio--pause":"icu:MessageAudio--play"),onClick:toggleIsPlaying,context:direction});var countDown=Math.max(0,duration-(null!==(_active$currentTime2=null==active?void 0:active.currentTime)&&void 0!==_active$currentTime2?_active$currentTime2:0)),metadata=(0,jsx_runtime.jsxs)("div",{className:`${CSS_BASE}__metadata`,children:[(0,jsx_runtime.jsx)("div",{"aria-hidden":"true",className:classnames_default()(`${CSS_BASE}__countdown`,`${CSS_BASE}__countdown--${played?"played":"unplayed"}`),children:(0,durationToPlaybackText.v)(countDown)}),(0,jsx_runtime.jsxs)("div",{className:`${CSS_BASE}__controls`,children:[(0,jsx_runtime.jsx)(PlayedDot,{played,onHide:function(){return setIsPlayedDotVisible(!1)}}),(0,jsx_runtime.jsx)(PlaybackRateButton.R,{i18n,variant:`message-${direction}`,playbackRate:null==active?void 0:active.playbackRate,visible:isPlaying&&(!played||!isPlayedDotVisible),onClick:function(){active&&setPlaybackRate(PlaybackRateButton.R.nextPlaybackRate(active.playbackRate))}})]}),!withContentBelow&&!collapseMetadata&&(0,jsx_runtime.jsx)(MessageMetadata.h,{direction,expirationLength,expirationTimestamp,hasText:withContentBelow,i18n,id,isShowingImage:!1,isSticker:!1,isTapToViewExpired:!1,pushPanelForConversation,retryMessageSend:shouldNeverBeCalled.U,status,textPending,timestamp})]});return(0,jsx_runtime.jsxs)("div",{className:classnames_default()(CSS_BASE,`${CSS_BASE}--${direction}`,withContentBelow?`${CSS_BASE}--with-content-below`:null,withContentAbove?`${CSS_BASE}--with-content-above`:null),children:[(0,jsx_runtime.jsxs)("div",{className:`${CSS_BASE}__button-and-waveform`,children:[button,waveform]}),metadata]})}PlayedDot.displayName="PlayedDot",MessageAudio.displayName="MessageAudio";var VoiceNotesPlaybackContext=__webpack_require__("./ts/components/VoiceNotesPlaybackContext.tsx"),setupI18n=__webpack_require__("./ts/util/setupI18n.ts"),messages=__webpack_require__("./_locales/en/messages.json"),Fixtures=__webpack_require__("./ts/storybook/Fixtures.ts"),getDefaultConversation=__webpack_require__("./ts/test-both/helpers/getDefaultConversation.ts"),_util=__webpack_require__("./ts/components/_util.ts"),durations=__webpack_require__("./ts/util/durations/index.ts"),EmbeddedContact=__webpack_require__("./ts/types/EmbeddedContact.ts"),fakeAttachment=__webpack_require__("./ts/test-both/helpers/fakeAttachment.ts"),getFakeBadge=__webpack_require__("./ts/test-both/helpers/getFakeBadge.ts"),Util=__webpack_require__("./ts/types/Util.ts"),UUID=__webpack_require__("./ts/types/UUID.ts"),BadgeCategory=__webpack_require__("./ts/badges/BadgeCategory.ts"),Payment=__webpack_require__("./ts/types/Payment.ts"),_excluded=["played"];function TimelineMessage_stories_slicedToArray(arr,i){return function TimelineMessage_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function TimelineMessage_stories_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||TimelineMessage_stories_unsupportedIterableToArray(arr,i)||function TimelineMessage_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TimelineMessage_stories_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return TimelineMessage_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TimelineMessage_stories_arrayLikeToArray(o,minLen):void 0}}function TimelineMessage_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var i18n=(0,setupI18n.E5)("en",messages),quoteOptions={none:void 0,basic:{conversationColor:Colors.cU[2],text:"The quoted message",isFromMe:!1,sentAt:Date.now(),authorId:"some-id",authorTitle:"Someone",referencedMessageNotFound:!1,isViewOnce:!1,isGiftBadge:!1}};const TimelineMessage_stories={title:"Components/Conversation/TimelineMessage",argTypes:{conversationType:{control:"select",defaultValue:"direct",options:["direct","group"]},quote:{control:"select",defaultValue:void 0,mapping:quoteOptions,options:Object.keys(quoteOptions)}}};var Template=function(args){return renderBothDirections(Object.assign({},createProps(),{conversationType:"direct",quote:void 0},args))},messageIdToAudioUrl={"incompetech-com-Agnus-Dei-X":"/fixtures/incompetech-com-Agnus-Dei-X.mp3"};var renderEmojiPicker=function(_ref){var onClose=_ref.onClose,onPickEmoji=_ref.onPickEmoji,ref=_ref.ref;return(0,jsx_runtime.jsx)(EmojiPicker.h,{i18n:(0,setupI18n.E5)("en",messages),skinTone:0,onSetSkinTone:(0,esm.action)("EmojiPicker::onSetSkinTone"),ref,onClose,onPickEmoji})};renderEmojiPicker.displayName="renderEmojiPicker";var renderReactionPicker=function(){return(0,jsx_runtime.jsx)("div",{})};function MessageAudioContainer(_ref2){var played=_ref2.played,props=_objectWithoutProperties(_ref2,_excluded),_React$useState2=TimelineMessage_stories_slicedToArray(react.useState(!1),2),isActive=_React$useState2[0],setIsActive=_React$useState2[1],_React$useState4=TimelineMessage_stories_slicedToArray(react.useState(0),2),currentTime=_React$useState4[0],setCurrentTime=_React$useState4[1],_React$useState6=TimelineMessage_stories_slicedToArray(react.useState(1),2),playbackRate=_React$useState6[0],setPlaybackRate=_React$useState6[1],_React$useState8=TimelineMessage_stories_slicedToArray(react.useState(!1),2),isPlaying=_React$useState8[0],setIsPlaying=_React$useState8[1],_React$useState10=TimelineMessage_stories_slicedToArray(react.useState(played),2),_played=_React$useState10[0],setPlayed=_React$useState10[1],audioPlayer=react.useMemo((function(){var a=new Audio,onLoadedData=noop_default();function play(positionAsRatio){void 0!==positionAsRatio&&(a.currentTime=positionAsRatio*a.duration),a.play()}return a.addEventListener("timeupdate",(function(){setCurrentTime(a.currentTime)})),a.addEventListener("ended",(function(){setIsActive(!1)})),a.addEventListener("loadeddata",(function(){return onLoadedData()})),{loadAndPlay:function(url,positionAsRatio){onLoadedData=function(){play(positionAsRatio)},a.src=url},play,pause:function(){a.pause()},set playbackRate(rate){a.playbackRate=rate},set currentTime(value){a.currentTime=value},get duration(){return a.duration}}}),[]),active=isActive?{playing:isPlaying,playbackRate,currentTime,duration:audioPlayer.duration}:void 0;return(0,jsx_runtime.jsx)(MessageAudio,Object.assign({},props,{active,computePeaks:VoiceNotesPlaybackContext.JM,onPlayMessage:function(id,positionAsRatio){active||(audioPlayer.loadAndPlay(messageIdToAudioUrl[id],positionAsRatio),setIsActive(!0),setIsPlaying(!0),setPlayed(!0))},played:_played,pushPanelForConversation:(0,esm.action)("pushPanelForConversation"),setPosition:function(value){audioPlayer.currentTime=value*audioPlayer.duration,setCurrentTime(audioPlayer.currentTime)},setIsPlaying:function(value){value?audioPlayer.play():audioPlayer.pause(),setIsPlaying(value)},setPlaybackRate:function(rate){audioPlayer.playbackRate=rate,setPlaybackRate(rate)}}))}renderReactionPicker.displayName="renderReactionPicker",MessageAudioContainer.displayName="MessageAudioContainer";var renderAudioAttachment=function(props){return(0,jsx_runtime.jsx)(MessageAudioContainer,Object.assign({},props))};renderAudioAttachment.displayName="renderAudioAttachment";var createProps=function(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{attachments:overrideProps.attachments,author:overrideProps.author||(0,getDefaultConversation.E$)(),bodyRanges:overrideProps.bodyRanges,canEditMessage:!0,canReact:!0,canReply:!0,canDownload:!0,canDeleteForEveryone:overrideProps.canDeleteForEveryone||!1,canRetry:overrideProps.canRetry||!1,canRetryDeleteForEveryone:overrideProps.canRetryDeleteForEveryone||!1,checkForAccount:(0,esm.action)("checkForAccount"),clearTargetedMessage:(0,esm.action)("clearSelectedMessage"),containerElementRef:react.createRef(),containerWidthBreakpoint:_util.Up.Wide,conversationColor:overrideProps.conversationColor||(0,dist.select)("conversationColor",Colors.cU,Colors.cU[0]),conversationTitle:overrideProps.conversationTitle||(0,dist.text)("conversationTitle","Conversation Title"),conversationId:(0,dist.text)("conversationId",overrideProps.conversationId||""),conversationType:overrideProps.conversationType||"direct",contact:overrideProps.contact,deletedForEveryone:overrideProps.deletedForEveryone,disableScroll:overrideProps.disableScroll,direction:overrideProps.direction||"incoming",showLightboxForViewOnceMedia:(0,esm.action)("showLightboxForViewOnceMedia"),doubleCheckMissingQuoteReference:(0,esm.action)("doubleCheckMissingQuoteReference"),expirationLength:(0,dist.number)("expirationLength",overrideProps.expirationLength||0)||void 0,expirationTimestamp:(0,dist.number)("expirationTimestamp",overrideProps.expirationTimestamp||0)||void 0,getPreferredBadge:overrideProps.getPreferredBadge||function(){},giftBadge:overrideProps.giftBadge,i18n,platform:"darwin",id:(0,dist.text)("id",overrideProps.id||"random-message-id"),interactionMode:overrideProps.interactionMode||"keyboard",isSticker:!!isBoolean_default()(overrideProps.isSticker)&&overrideProps.isSticker,isBlocked:!!isBoolean_default()(overrideProps.isBlocked)&&overrideProps.isBlocked,isMessageRequestAccepted:!isBoolean_default()(overrideProps.isMessageRequestAccepted)||overrideProps.isMessageRequestAccepted,isSelected:!!isBoolean_default()(overrideProps.isSelected)&&overrideProps.isSelected,isSelectMode:!!isBoolean_default()(overrideProps.isSelectMode)&&overrideProps.isSelectMode,isSpoilerExpanded:!!isBoolean_default()(overrideProps.isSpoilerExpanded)&&overrideProps.isSpoilerExpanded,isTapToView:overrideProps.isTapToView,isTapToViewError:overrideProps.isTapToViewError,isTapToViewExpired:overrideProps.isTapToViewExpired,kickOffAttachmentDownload:(0,esm.action)("kickOffAttachmentDownload"),markAttachmentAsCorrupted:(0,esm.action)("markAttachmentAsCorrupted"),messageExpanded:(0,esm.action)("messageExpanded"),showConversation:(0,esm.action)("showConversation"),openGiftBadge:(0,esm.action)("openGiftBadge"),previews:overrideProps.previews||[],quote:overrideProps.quote||void 0,reactions:overrideProps.reactions,reactToMessage:(0,esm.action)("reactToMessage"),readStatus:void 0===overrideProps.readStatus?MessageReadStatus.N.Read:overrideProps.readStatus,renderEmojiPicker,renderReactionPicker,renderAudioAttachment,saveAttachment:(0,esm.action)("saveAttachment"),setQuoteByMessageId:(0,esm.action)("setQuoteByMessageId"),retryMessageSend:(0,esm.action)("retryMessageSend"),retryDeleteForEveryone:(0,esm.action)("retryDeleteForEveryone"),scrollToQuotedMessage:(0,esm.action)("scrollToQuotedMessage"),targetMessage:(0,esm.action)("targetMessage"),toggleSelectMessage:null==overrideProps.toggleSelectMessage?(0,esm.action)("toggleSelectMessage"):overrideProps.toggleSelectMessage,setMessageToEdit:(0,esm.action)("setMessageToEdit"),shouldCollapseAbove:!!isBoolean_default()(overrideProps.shouldCollapseAbove)&&overrideProps.shouldCollapseAbove,shouldCollapseBelow:!!isBoolean_default()(overrideProps.shouldCollapseBelow)&&overrideProps.shouldCollapseBelow,shouldHideMetadata:!!isBoolean_default()(overrideProps.shouldHideMetadata)&&overrideProps.shouldHideMetadata,showSpoiler:(0,esm.action)("showSpoiler"),pushPanelForConversation:(0,esm.action)("pushPanelForConversation"),showContactModal:(0,esm.action)("showContactModal"),showExpiredIncomingTapToViewToast:(0,esm.action)("showExpiredIncomingTapToViewToast"),showExpiredOutgoingTapToViewToast:(0,esm.action)("showExpiredOutgoingTapToViewToast"),toggleDeleteMessagesModal:(0,esm.action)("toggleDeleteMessagesModal"),toggleForwardMessagesModal:(0,esm.action)("toggleForwardMessagesModal"),showLightbox:(0,esm.action)("showLightbox"),startConversation:(0,esm.action)("startConversation"),status:overrideProps.status||"sent",text:overrideProps.text||(0,dist.text)("text",""),textDirection:overrideProps.textDirection||Message.m5.Default,textAttachment:overrideProps.textAttachment||{contentType:MIME.rJ,size:123,pending:(0,dist.boolean)("textPending",!1)},theme:Util.f8.light,timestamp:(0,dist.number)("timestamp",overrideProps.timestamp||Date.now()),viewStory:(0,esm.action)("viewStory")}},renderMany=function(propsArray){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:propsArray.map((function(message,index){return(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},message,{shouldCollapseAbove:Boolean(propsArray[index-1]),shouldCollapseBelow:Boolean(propsArray[index+1])}),message.text)}))})},renderThree=function(props){return renderMany([props,props,props])},renderBothDirections=function(props){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderThree(props),renderThree(Object.assign({},props,{author:Object.assign({},props.author,{id:(0,getDefaultConversation.E$)().id}),direction:"outgoing"}))]})},PlainMessage=Template.bind({});PlainMessage.args={text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look."};var PlainRtlMessage=Template.bind({});function EmojiMessages(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀😀😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀😀😀😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀😀😀😀😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"😀😀😀😀😀😀😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],text:"😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],text:"😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({id:"incompetech-com-Agnus-Dei-X",attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"incompetech-com-Agnus-Dei-X.mp3",url:messageIdToAudioUrl["incompetech-com-Agnus-Dei-X"]})],text:"😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({attachments:[(0,fakeAttachment.dh)({contentType:(0,MIME.cJ)("text/plain"),fileName:"my-resume.txt",url:"my-resume.txt"})],text:"😀"}))),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",url:"/fixtures/cat-gif.mp4",width:400,height:332})],text:"😀"})))]})}PlainRtlMessage.args={text:'الأسانسير، علشان القطط ماتاكلش منها. وننساها، ونعود الى أوراقنا موصدين الباب بإحكام. نتنحنح، ونقول: البتاع. كلمة تدلّ على لا شيء، وعلى كلّ شيء. وهي مركز أبحاث شعبية كثيرة، تتعجّب من غرابتها والقومية المصرية الخاصة التي تعكسها، الى جانب الشيء الكثير من العفوية وحلاوة الروح. نعم، نحن قرأنا وسمعنا وعرفنا كل هذا. لكنه محلّ اهتمامنا اليوم لأسباب غير تلك الأسباب. كذلك، فإننا لعاقدون عزمنا على أن نتجاوز قضية الفصحى والعامية، وثنائية النخبة والرعاع، التي كثيراً ما ينحو نحوها الحديث عن الكلمة المذكورة. وفوق هذا كله، لسنا بصدد تفسير معاني "البتاع" كما تأتي في قصيدة الحاج أحمد فؤاد نجم، ولا التحذلق والتفذلك في الألغاز والأسرار المكنونة. هذا البتاع - أم هذه البت',textDirection:Message.m5.RightToLeft},PlainRtlMessage.story={name:"Plain RTL Message"};var Delivered=Template.bind({});Delivered.args={status:"delivered",text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look."};var Read=Template.bind({});Read.args={status:"read",text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look."};var Sending=Template.bind({});Sending.args={status:"sending",text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look."};var Expiring=Template.bind({});Expiring.args={expirationLength:3e4,expirationTimestamp:Date.now()+3e4,text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look."};var WillExpireButStillSending=Template.bind({});WillExpireButStillSending.args={status:"sending",expirationLength:3e4,text:"We always show the timer if a message has an expiration length, even if unread or still sending."},WillExpireButStillSending.story={name:"Will expire but still sending"};var Pending=Template.bind({});Pending.args={text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look.",textAttachment:{contentType:MIME.rJ,size:123,pending:!0}};var LongBodyCanBeDownloaded=Template.bind({});LongBodyCanBeDownloaded.args={text:"Hello there from a pal! I am sending a long message so that it will wrap a bit, since I like that look.",textAttachment:{contentType:MIME.rJ,size:123,pending:!1,error:!0,digest:"abc",key:"def"}},LongBodyCanBeDownloaded.story={name:"Long body can be downloaded"};var Recent=Template.bind({});Recent.args={text:"Hello there from a pal!",timestamp:Date.now()-18e5};var Older=Template.bind({});Older.args={text:"Hello there from a pal!",timestamp:Date.now()-15552e6};var ReactionsWiderMessage=Template.bind({});ReactionsWiderMessage.args={text:"Hello there from a pal!",timestamp:Date.now()-15552e6,reactions:[{emoji:"👍",from:(0,getDefaultConversation.E$)({isMe:!0,id:"+14155552672",phoneNumber:"+14155552672",name:"Me",title:"Me"}),timestamp:Date.now()-10},{emoji:"👍",from:(0,getDefaultConversation.E$)({id:"+14155552672",phoneNumber:"+14155552672",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10},{emoji:"👍",from:(0,getDefaultConversation.E$)({id:"+14155552673",phoneNumber:"+14155552673",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10},{emoji:"😂",from:(0,getDefaultConversation.E$)({id:"+14155552674",phoneNumber:"+14155552674",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10},{emoji:"😡",from:(0,getDefaultConversation.E$)({id:"+14155552677",phoneNumber:"+14155552677",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10},{emoji:"👎",from:(0,getDefaultConversation.E$)({id:"+14155552678",phoneNumber:"+14155552678",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10},{emoji:"❤️",from:(0,getDefaultConversation.E$)({id:"+14155552679",phoneNumber:"+14155552679",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10}]},ReactionsWiderMessage.story={name:"Reactions (wider message)"};var joyReactions=Array.from({length:52},(function(){return function getJoyReaction(){return{emoji:"😂",from:(0,getDefaultConversation.E$)({id:"+14155552674",phoneNumber:"+14155552674",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()-10}}()})),ReactionsShortMessage=Template.bind({});ReactionsShortMessage.args={text:"h",timestamp:Date.now(),reactions:[].concat(function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return TimelineMessage_stories_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||TimelineMessage_stories_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(joyReactions),[{emoji:"👍",from:(0,getDefaultConversation.E$)({isMe:!0,id:"+14155552672",phoneNumber:"+14155552672",name:"Me",title:"Me"}),timestamp:Date.now()},{emoji:"👍",from:(0,getDefaultConversation.E$)({id:"+14155552672",phoneNumber:"+14155552672",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()},{emoji:"👍",from:(0,getDefaultConversation.E$)({id:"+14155552673",phoneNumber:"+14155552673",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()},{emoji:"😡",from:(0,getDefaultConversation.E$)({id:"+14155552677",phoneNumber:"+14155552677",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()},{emoji:"👎",from:(0,getDefaultConversation.E$)({id:"+14155552678",phoneNumber:"+14155552678",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()},{emoji:"❤️",from:(0,getDefaultConversation.E$)({id:"+14155552679",phoneNumber:"+14155552679",name:"Amelia Briggs",title:"Amelia"}),timestamp:Date.now()}])},ReactionsShortMessage.story={name:"Reactions (short message)"};var AvatarInGroup=Template.bind({});AvatarInGroup.args={author:(0,getDefaultConversation.E$)({avatarPath:Fixtures.UJ}),conversationType:"group",status:"sent",text:"Hello it is me, the saxophone."},AvatarInGroup.story={name:"Avatar in Group"};var BadgeInGroup=Template.bind({});BadgeInGroup.args={conversationType:"group",getPreferredBadge:function(){return(0,getFakeBadge.n)()},status:"sent",text:"Hello it is me, the saxophone."},BadgeInGroup.story={name:"Badge in Group"};var Sticker=Template.bind({});Sticker.args={attachments:[(0,fakeAttachment.dh)({url:"/fixtures/512x515-thumbs-up-lincoln.webp",fileName:"512x515-thumbs-up-lincoln.webp",contentType:MIME.to,width:128,height:128})],isSticker:!0,status:"sent"};var Quote=Template.bind({});function Deleted(){var propsSent=createProps({conversationType:"direct",deletedForEveryone:!0,status:"sent"}),propsSending=createProps({conversationType:"direct",deletedForEveryone:!0,status:"sending"});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderBothDirections(propsSent),renderBothDirections(propsSending)]})}Quote.args={quote:{text:"hello my good friend",conversationColor:"ultramarine",conversationTitle:"Convo",isFromMe:!1,sentAt:0,authorId:"",authorTitle:"Author",referencedMessageNotFound:!1,isViewOnce:!1,isGiftBadge:!1},author:{id:"",isMe:!1,title:"Quoter Dude",sharedGroupNames:[],acceptedMessageRequest:!0,badges:[]},conversationType:"group"};var DeletedWithExpireTimer=Template.bind({});function DeletedWithError(){var propsPartialError=createProps({timestamp:Date.now()-6e4,conversationType:"group",deletedForEveryone:!0,status:"partial-sent",direction:"outgoing"}),propsError=createProps({timestamp:Date.now()-6e4,conversationType:"group",deletedForEveryone:!0,status:"error",direction:"outgoing"});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderThree(propsPartialError),renderThree(propsError)]})}DeletedWithExpireTimer.args={timestamp:Date.now()-6e4,conversationType:"group",deletedForEveryone:!0,expirationLength:3e5,expirationTimestamp:Date.now()+18e4,status:"sent"},DeletedWithExpireTimer.story={name:"Deleted with expireTimer"},DeletedWithError.story={name:"Deleted with error"};var CanDeleteForEveryone=Template.bind({});CanDeleteForEveryone.args={status:"read",text:"I hope you get this.",direction:"outgoing"},CanDeleteForEveryone.story={name:"Can delete for everyone"};var TimelineMessage_stories_Error=Template.bind({});TimelineMessage_stories_Error.args={status:"error",text:"I hope you get this."};var EditError=Template.bind({});EditError.args={status:"error",isEditedMessage:!0,text:"I hope you get this."};var Paused=Template.bind({});Paused.args={status:"paused",text:"I am up to a challenge"};var PartialSend=Template.bind({});PartialSend.args={status:"partial-sent",text:"I hope you get this."};var LinkPreviewInGroup=Template.bind({});LinkPreviewInGroup.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],status:"sent",text:"Be sure to look at https://www.signal.org",conversationType:"group"},LinkPreviewInGroup.story={name:"Link Preview in Group"};var LinkPreviewWithQuote=Template.bind({});LinkPreviewWithQuote.args={quote:{conversationColor:Colors.cU[2],conversationTitle:(0,getDefaultConversation.E$)().title,text:"The quoted message",isFromMe:!1,sentAt:Date.now(),authorId:"some-id",authorTitle:"Someone",referencedMessageNotFound:!1,isViewOnce:!1,isGiftBadge:!1},previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],status:"sent",text:"Be sure to look at https://www.signal.org",conversationType:"group"},LinkPreviewWithQuote.story={name:"Link Preview with Quote"};var LinkPreviewWithSmallImage=Template.bind({});LinkPreviewWithSmallImage.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:50,url:Fixtures.UJ,width:50}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithSmallImage.story={name:"Link Preview with Small Image"};var LinkPreviewWithoutImage=Template.bind({});LinkPreviewWithoutImage.args={previews:[{domain:"signal.org",isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithoutImage.story={name:"Link Preview without Image"};var LinkPreviewWithNoDescription=Template.bind({});LinkPreviewWithNoDescription.args={previews:[{domain:"signal.org",isStickerPack:!1,title:"Signal",url:"https://www.signal.org",date:Date.now()}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithNoDescription.story={name:"Link Preview with no description"};var LinkPreviewWithLongDescription=Template.bind({});LinkPreviewWithLongDescription.args={previews:[{domain:"signal.org",isStickerPack:!1,title:"Signal",description:Array(10).fill('Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.').join(" "),url:"https://www.signal.org",date:Date.now()}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithLongDescription.story={name:"Link Preview with long description"};var LinkPreviewWithSmallImageLongDescription=Template.bind({});LinkPreviewWithSmallImageLongDescription.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:50,url:Fixtures.UJ,width:50}),isStickerPack:!1,title:"Signal",description:Array(10).fill('Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.').join(" "),url:"https://www.signal.org",date:Date.now()}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithSmallImageLongDescription.story={name:"Link Preview with small image, long description"};var LinkPreviewWithNoDate=Template.bind({});LinkPreviewWithNoDate.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org"}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithNoDate.story={name:"Link Preview with no date"};var LinkPreviewWithTooNewADate=Template.bind({});function Image(){var darkImageProps=createProps({attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],status:"sent"}),lightImageProps=createProps({attachments:[(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320})],status:"sent"});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderBothDirections(darkImageProps),renderBothDirections(lightImageProps)]})}LinkPreviewWithTooNewADate.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:Date.now()+3e9}],status:"sent",text:"Be sure to look at https://www.signal.org"},LinkPreviewWithTooNewADate.story={name:"Link Preview with too new a date"};var MultipleImages2=Template.bind({});MultipleImages2.args={attachments:[(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320})],status:"sent"};var MultipleImages3=Template.bind({});MultipleImages3.args={attachments:[(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320})],status:"sent"};var MultipleImages4=Template.bind({});MultipleImages4.args={attachments:[(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320})],status:"sent"};var MultipleImages5=Template.bind({});MultipleImages5.args={attachments:[(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320}),(0,fakeAttachment.dh)({url:Fixtures.UJ,fileName:"the-sax.png",contentType:MIME.Ih,height:240,width:320})],status:"sent"};var ImageWithCaption=Template.bind({});ImageWithCaption.args={attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],status:"sent",text:"This is my home."},ImageWithCaption.story={name:"Image with Caption"};var Gif=Template.bind({});Gif.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",url:"/fixtures/cat-gif.mp4",width:400,height:332})],status:"sent"},Gif.story={name:"GIF"};var GifInAGroup=Template.bind({});GifInAGroup.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",url:"/fixtures/cat-gif.mp4",width:400,height:332})],conversationType:"group",status:"sent"},GifInAGroup.story={name:"GIF in a group"};var NotDownloadedGif=Template.bind({});NotDownloadedGif.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",fileSize:"188.61 KB",blurHash:"LDA,FDBnm+I=p{tkIUI;~UkpELV]",width:400,height:332})],status:"sent"},NotDownloadedGif.story={name:"Not Downloaded GIF"};var PendingGif=Template.bind({});PendingGif.args={attachments:[(0,fakeAttachment.dh)({pending:!0,contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",fileSize:"188.61 KB",blurHash:"LDA,FDBnm+I=p{tkIUI;~UkpELV]",width:400,height:332})],status:"sent"},PendingGif.story={name:"Pending GIF"};var _Audio=function(){function Wrapper(){var _React$useState12=TimelineMessage_stories_slicedToArray(react.useState(!1),2),isPlayed=_React$useState12[0],setIsPlayed=_React$useState12[1],messageProps=createProps(Object.assign({id:"incompetech-com-Agnus-Dei-X",attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"incompetech-com-Agnus-Dei-X.mp3",url:messageIdToAudioUrl["incompetech-com-Agnus-Dei-X"],path:"somepath"})]},isPlayed?{status:"viewed",readStatus:MessageReadStatus.N.Viewed}:{status:"read",readStatus:MessageReadStatus.N.Read}));return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{type:"button",onClick:function(){setIsPlayed((function(old){return!old}))},style:{display:"block",marginBottom:"2em"},children:"Toggle played"}),renderBothDirections(messageProps)]})}return(0,jsx_runtime.jsx)(Wrapper,{})};_Audio.displayName="_Audio";var LongAudio=Template.bind({});LongAudio.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"long-audio.mp3",url:"/fixtures/long-audio.mp3",path:"somepath"})],status:"sent"};var AudioWithCaption=Template.bind({});AudioWithCaption.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"incompetech-com-Agnus-Dei-X.mp3",url:"/fixtures/incompetech-com-Agnus-Dei-X.mp3",path:"somepath"})],status:"sent",text:"This is what I sound like."},AudioWithCaption.story={name:"Audio with Caption"};var AudioWithNotDownloadedAttachment=Template.bind({});AudioWithNotDownloadedAttachment.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"incompetech-com-Agnus-Dei-X.mp3"})],status:"sent"},AudioWithNotDownloadedAttachment.story={name:"Audio with Not Downloaded Attachment"};var AudioWithPendingAttachment=Template.bind({});AudioWithPendingAttachment.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ty,fileName:"incompetech-com-Agnus-Dei-X.mp3",pending:!0})],status:"sent"},AudioWithPendingAttachment.story={name:"Audio with Pending Attachment"};var OtherFileType=Template.bind({});OtherFileType.args={attachments:[(0,fakeAttachment.dh)({contentType:(0,MIME.cJ)("text/plain"),fileName:"my-resume.txt",url:"my-resume.txt",fileSize:"10MB"})],status:"sent"};var OtherFileTypeWithCaption=Template.bind({});OtherFileTypeWithCaption.args={attachments:[(0,fakeAttachment.dh)({contentType:(0,MIME.cJ)("text/plain"),fileName:"my-resume.txt",url:"my-resume.txt",fileSize:"10MB"})],status:"sent",text:"This is what I have done."},OtherFileTypeWithCaption.story={name:"Other File Type with Caption"};var OtherFileTypeWithLongFilename=Template.bind({});OtherFileTypeWithLongFilename.args={attachments:[(0,fakeAttachment.dh)({contentType:(0,MIME.cJ)("text/plain"),fileName:"INSERT-APP-NAME_INSERT-APP-APPLE-ID_AppStore_AppsGamesWatch.psd.zip",url:"a2/a2334324darewer4234",fileSize:"10MB"})],status:"sent",text:"This is what I have done."},OtherFileTypeWithLongFilename.story={name:"Other File Type with Long Filename"};var TapToViewImage=Template.bind({});TapToViewImage.args={attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],isTapToView:!0,status:"sent"},TapToViewImage.story={name:"TapToView Image"};var TapToViewVideo=Template.bind({});TapToViewVideo.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,fileName:"pixabay-Soap-Bubble-7141.mp4",height:128,url:"/fixtures/pixabay-Soap-Bubble-7141.mp4",width:128})],isTapToView:!0,status:"sent"},TapToViewVideo.story={name:"TapToView Video"};var TapToViewGif=Template.bind({});TapToViewGif.args={attachments:[(0,fakeAttachment.dh)({contentType:MIME.ml,flags:protobuf.g.AttachmentPointer.Flags.GIF,fileName:"cat-gif.mp4",url:"/fixtures/cat-gif.mp4",width:400,height:332})],isTapToView:!0,status:"sent"},TapToViewGif.story={name:"TapToView GIF"};var TapToViewExpired=Template.bind({});TapToViewExpired.args={attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],isTapToView:!0,isTapToViewExpired:!0,status:"sent"},TapToViewExpired.story={name:"TapToView Expired"};var TapToViewError=Template.bind({});TapToViewError.args={attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],isTapToView:!0,isTapToViewError:!0,status:"sent"},TapToViewError.story={name:"TapToView Error"};var DangerousFileType=Template.bind({});function TimelineMessage_stories_Colors(){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Colors.cU.map((function(color){return(0,jsx_runtime.jsx)("div",{children:renderBothDirections(createProps({conversationColor:color,text:`Here is a preview of the chat color: ${color}. The color is visible to only you.`}))},color)}))})}DangerousFileType.args={attachments:[(0,fakeAttachment.dh)({contentType:(0,MIME.cJ)("application/vnd.microsoft.portable-executable"),fileName:"terrible.exe",url:"terrible.exe"})],status:"sent"};var Mentions=Template.bind({});function AllTheContextMenus(){var props=createProps({attachments:[(0,fakeAttachment.dh)({url:"/fixtures/tina-rolf-269345-unsplash.jpg",fileName:"tina-rolf-269345-unsplash.jpg",contentType:MIME._l,width:128,height:128})],status:"partial-sent",canDeleteForEveryone:!0,canRetry:!0,canRetryDeleteForEveryone:!0});return(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},props,{direction:"outgoing"}))}Mentions.args={bodyRanges:[{start:0,length:1,mentionUuid:"zap",replacementText:"Zapp Brannigan",conversationID:"x"}],text:"￼ This Is It. The Moment We Should Have Trained For."},Mentions.story={name:"@Mentions"},AllTheContextMenus.displayName="AllTheContextMenus",AllTheContextMenus.story={name:"All the context menus"};var NotApprovedWithLinkPreview=Template.bind({});function CustomColor(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[renderThree(Object.assign({},createProps({text:"Solid."}),{direction:"outgoing",customColor:{start:{hue:82,saturation:35}}})),(0,jsx_runtime.jsx)("br",{style:{clear:"both"}}),renderThree(Object.assign({},createProps({text:"Gradient."}),{direction:"outgoing",customColor:{deg:192,start:{hue:304,saturation:85},end:{hue:231,saturation:76}}}))]})}NotApprovedWithLinkPreview.args={previews:[{domain:"signal.org",image:(0,fakeAttachment.dh)({contentType:MIME.Ih,fileName:"the-sax.png",height:240,url:Fixtures.UJ,width:320}),isStickerPack:!1,title:"Signal",description:'Say "hello" to a different messaging experience. An unexpected focus on privacy, combined with all of the features you expect.',url:"https://www.signal.org",date:new Date(2020,2,10).valueOf()}],status:"sent",text:"Be sure to look at https://www.signal.org",isMessageRequestAccepted:!1},NotApprovedWithLinkPreview.story={name:"Not approved, with link preview"};var CollapsingTextOnlyDMs=function(){var them=(0,getDefaultConversation.E$)(),me=(0,getDefaultConversation.E$)({isMe:!0});return renderMany([createProps({author:them,text:"One",timestamp:Date.now()-5*durations.EB}),createProps({author:them,text:"Two",timestamp:Date.now()-4*durations.EB}),createProps({author:them,text:"Three",timestamp:Date.now()-3*durations.EB}),createProps({author:me,direction:"outgoing",text:"Four",timestamp:Date.now()-2*durations.EB}),createProps({text:"Five",author:me,timestamp:Date.now()-durations.EB,direction:"outgoing"}),createProps({author:me,direction:"outgoing",text:"Six"})])};CollapsingTextOnlyDMs.story={name:"Collapsing text-only DMs"};var CollapsingTextOnlyGroupMessages=function(){var author=(0,getDefaultConversation.E$)();return renderMany([createProps({author,conversationType:"group",text:"One",timestamp:Date.now()-2*durations.EB}),createProps({author,conversationType:"group",text:"Two",timestamp:Date.now()-durations.EB}),createProps({author,conversationType:"group",text:"Three"})])};CollapsingTextOnlyGroupMessages.story={name:"Collapsing text-only group messages"};var StoryReply=function(){var conversation=(0,getDefaultConversation.E$)();return renderThree(Object.assign({},createProps({direction:"outgoing",text:"Wow!"}),{storyReplyContext:{authorTitle:conversation.firstName||conversation.title,conversationColor:Colors.cU[0],isFromMe:!1,rawAttachment:(0,fakeAttachment.dh)({url:"/fixtures/snow.jpg",thumbnail:(0,fakeAttachment.Jh)("/fixtures/snow.jpg")}),text:"Photo"}}))};StoryReply.story={name:"Story reply"};var StoryReplyYours=function(){var conversation=(0,getDefaultConversation.E$)();return renderThree(Object.assign({},createProps({direction:"incoming",text:"Wow!"}),{storyReplyContext:{authorTitle:conversation.firstName||conversation.title,conversationColor:Colors.cU[0],isFromMe:!0,rawAttachment:(0,fakeAttachment.dh)({url:"/fixtures/snow.jpg",thumbnail:(0,fakeAttachment.Jh)("/fixtures/snow.jpg")}),text:"Photo"}}))};StoryReplyYours.story={name:"Story reply (yours)"};var StoryReplyEmoji=function(){var conversation=(0,getDefaultConversation.E$)();return renderThree(Object.assign({},createProps({direction:"outgoing",text:"Wow!"}),{storyReplyContext:{authorTitle:conversation.firstName||conversation.title,conversationColor:Colors.cU[0],emoji:"💄",isFromMe:!1,rawAttachment:(0,fakeAttachment.dh)({url:"/fixtures/snow.jpg",thumbnail:(0,fakeAttachment.Jh)("/fixtures/snow.jpg")}),text:"Photo"}}))};StoryReplyEmoji.story={name:"Story reply (emoji)"};var fullContact={avatar:{avatar:(0,fakeAttachment.dh)({path:"/fixtures/giphy-GVNvOUpeYmI7e.gif",contentType:MIME.dB}),isProfile:!0},email:[{value:"jerjor@fakemail.com",type:EmbeddedContact.GP.HOME}],name:{givenName:"Jerry",familyName:"Jordan",prefix:"Dr.",suffix:"Jr.",middleName:"James",displayName:"Jerry Jordan"},number:[{value:"555-444-2323",type:EmbeddedContact.GP.HOME}]},EmbeddedContactFullContact=Template.bind({});EmbeddedContactFullContact.args={contact:fullContact},EmbeddedContactFullContact.story={name:"EmbeddedContact: Full Contact"};var EmbeddedContactWithSendMessage=Template.bind({});EmbeddedContactWithSendMessage.args={contact:Object.assign({},fullContact,{firstNumber:fullContact.number[0].value,uuid:UUID.hb.generate().toString()}),direction:"incoming"},EmbeddedContactWithSendMessage.story={name:"EmbeddedContact: with Send Message"};var EmbeddedContactOnlyEmail=Template.bind({});EmbeddedContactOnlyEmail.args={contact:{email:fullContact.email}},EmbeddedContactOnlyEmail.story={name:"EmbeddedContact: Only Email"};var EmbeddedContactGivenName=Template.bind({});EmbeddedContactGivenName.args={contact:{name:{givenName:"Jerry"}}},EmbeddedContactGivenName.story={name:"EmbeddedContact: Given Name"};var EmbeddedContactOrganization=Template.bind({});EmbeddedContactOrganization.args={contact:{organization:"Company 5"}},EmbeddedContactOrganization.story={name:"EmbeddedContact: Organization"};var EmbeddedContactGivenFamilyName=Template.bind({});EmbeddedContactGivenFamilyName.args={contact:{name:{givenName:"Jerry",familyName:"FamilyName"}}},EmbeddedContactGivenFamilyName.story={name:"EmbeddedContact: Given + Family Name"};var EmbeddedContactFamilyName=Template.bind({});EmbeddedContactFamilyName.args={contact:{name:{familyName:"FamilyName"}}},EmbeddedContactFamilyName.story={name:"EmbeddedContact: Family Name"};var EmbeddedContactLoadingAvatar=Template.bind({});EmbeddedContactLoadingAvatar.args={contact:{name:{displayName:"Jerry Jordan"},avatar:{avatar:(0,fakeAttachment.dh)({pending:!0,contentType:MIME.dB}),isProfile:!0}}},EmbeddedContactLoadingAvatar.story={name:"EmbeddedContact: Loading Avatar"};var GiftBadgeUnopened=Template.bind({});GiftBadgeUnopened.args={giftBadge:{id:"GIFT",expiration:Date.now()+30*durations.x4,level:3,state:Message.Yk.Unopened}},GiftBadgeUnopened.story={name:"Gift Badge: Unopened"};var getPreferredBadge=function(){return{category:BadgeCategory.Q.Donor,descriptionTemplate:"This is a description of the badge",id:"GIFT",images:[{transparent:{localPath:"/fixtures/orange-heart.svg",url:"http://someplace"}}],name:"heart"}},GiftBadgeRedeemed30Days=Template.bind({});GiftBadgeRedeemed30Days.args={getPreferredBadge,giftBadge:{expiration:Date.now()+30*durations.x4+durations.sh,id:"GIFT",level:3,state:Message.Yk.Redeemed}},GiftBadgeRedeemed30Days.story={name:"Gift Badge: Redeemed (30 days)"};var GiftBadgeRedeemed24Hours=Template.bind({});GiftBadgeRedeemed24Hours.args={getPreferredBadge,giftBadge:{expiration:Date.now()+durations.x4+durations.sh,id:"GIFT",level:3,state:Message.Yk.Redeemed}},GiftBadgeRedeemed24Hours.story={name:"Gift Badge: Redeemed (24 hours)"};var GiftBadgeOpened60Minutes=Template.bind({});GiftBadgeOpened60Minutes.args={getPreferredBadge,giftBadge:{expiration:Date.now()+durations.kr+durations.sh,id:"GIFT",level:3,state:Message.Yk.Opened}},GiftBadgeOpened60Minutes.story={name:"Gift Badge: Opened (60 minutes)"};var GiftBadgeRedeemed1Minute=Template.bind({});GiftBadgeRedeemed1Minute.args={getPreferredBadge,giftBadge:{expiration:Date.now()+durations.EB+durations.sh,id:"GIFT",level:3,state:Message.Yk.Redeemed}},GiftBadgeRedeemed1Minute.story={name:"Gift Badge: Redeemed (1 minute)"};var GiftBadgeOpenedExpired=Template.bind({});GiftBadgeOpenedExpired.args={getPreferredBadge,giftBadge:{expiration:Date.now(),id:"GIFT",level:3,state:Message.Yk.Opened}},GiftBadgeOpenedExpired.story={name:"Gift Badge: Opened (expired)"};var GiftBadgeMissingBadge=Template.bind({});GiftBadgeMissingBadge.args={getPreferredBadge:function(){},giftBadge:{expiration:Date.now()+durations.EB+durations.sh,id:"MISSING",level:3,state:Message.Yk.Redeemed}},GiftBadgeMissingBadge.story={name:"Gift Badge: Missing Badge"};var PaymentNotification=Template.bind({});function MultiSelectMessage(){var _React$useState14=TimelineMessage_stories_slicedToArray(react.useState(!1),2),selected=_React$useState14[0],setSelected=_React$useState14[1];return(0,jsx_runtime.jsx)(TimelineMessage.M,Object.assign({},createProps({text:"Hello",isSelected:selected,isSelectMode:!0,toggleSelectMessage:function(_conversationId,_messageId,_shift,newSelected){setSelected(newSelected)}})))}function MultiSelect(){return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MultiSelectMessage,{}),(0,jsx_runtime.jsx)(MultiSelectMessage,{}),(0,jsx_runtime.jsx)(MultiSelectMessage,{})]})}PaymentNotification.args={canReply:!1,canReact:!1,payment:{kind:Payment.s.Notification,note:"Hello there"}},MultiSelectMessage.displayName="MultiSelectMessage",MultiSelect.args={name:"Multi Select"};var __namedExportsOrder=["PlainMessage","PlainRtlMessage","EmojiMessages","Delivered","Read","Sending","Expiring","WillExpireButStillSending","Pending","LongBodyCanBeDownloaded","Recent","Older","ReactionsWiderMessage","ReactionsShortMessage","AvatarInGroup","BadgeInGroup","Sticker","Quote","Deleted","DeletedWithExpireTimer","DeletedWithError","CanDeleteForEveryone","Error","EditError","Paused","PartialSend","LinkPreviewInGroup","LinkPreviewWithQuote","LinkPreviewWithSmallImage","LinkPreviewWithoutImage","LinkPreviewWithNoDescription","LinkPreviewWithLongDescription","LinkPreviewWithSmallImageLongDescription","LinkPreviewWithNoDate","LinkPreviewWithTooNewADate","Image","MultipleImages2","MultipleImages3","MultipleImages4","MultipleImages5","ImageWithCaption","Gif","GifInAGroup","NotDownloadedGif","PendingGif","_Audio","LongAudio","AudioWithCaption","AudioWithNotDownloadedAttachment","AudioWithPendingAttachment","OtherFileType","OtherFileTypeWithCaption","OtherFileTypeWithLongFilename","TapToViewImage","TapToViewVideo","TapToViewGif","TapToViewExpired","TapToViewError","DangerousFileType","Colors","Mentions","AllTheContextMenus","NotApprovedWithLinkPreview","CustomColor","CollapsingTextOnlyDMs","CollapsingTextOnlyGroupMessages","StoryReply","StoryReplyYours","StoryReplyEmoji","EmbeddedContactFullContact","EmbeddedContactWithSendMessage","EmbeddedContactOnlyEmail","EmbeddedContactGivenName","EmbeddedContactOrganization","EmbeddedContactGivenFamilyName","EmbeddedContactFamilyName","EmbeddedContactLoadingAvatar","GiftBadgeUnopened","GiftBadgeRedeemed30Days","GiftBadgeRedeemed24Hours","GiftBadgeOpened60Minutes","GiftBadgeRedeemed1Minute","GiftBadgeOpenedExpired","GiftBadgeMissingBadge","PaymentNotification","MultiSelect"]},"./ts/components/conversation/WaveformScrubber.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>WaveformScrubber});var react=__webpack_require__("./node_modules/react/index.js"),useRefMerger=__webpack_require__("./ts/hooks/useRefMerger.ts"),durationToPlaybackText=__webpack_require__("./ts/util/durationToPlaybackText.ts"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),assert=__webpack_require__("./ts/util/assert.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function Waveform(_ref){var peaks=_ref.peaks,barMinHeight=_ref.barMinHeight,barMaxHeight=_ref.barMaxHeight,currentTime=_ref.currentTime,duration=_ref.duration,currentTimeOrZero=null!=currentTime?currentTime:0,peakPosition=peaks.length*(currentTimeOrZero/(null!=duration?duration:1e-23));return(0,jsx_runtime.jsx)("div",{className:classnames_default()(["Waveform"]),children:peaks.map((function(peak,i){(0,assert.q8)(peak>=0&&peak<=1&&!Number.isNaN(peak),`Peak outside of range: ${peak}`);var height=Math.max(barMinHeight,barMaxHeight*peak),highlight=i<peakPosition;highlight&&i+1>=peakPosition&&(height=barMaxHeight),(0,assert.q8)(!Number.isNaN(height),"Got NaN for peak height");var key=i;return(0,jsx_runtime.jsx)("div",{className:classnames_default()(["Waveform__bar",highlight?"Waveform__bar--active":null]),style:{height}},key)}))})}Waveform.displayName="Waveform";var keyboard=__webpack_require__("./ts/util/keyboard.ts"),WaveformScrubber=react.forwardRef((function WaveformScrubber(_ref,ref){var i18n=_ref.i18n,peaks=_ref.peaks,barMinHeight=_ref.barMinHeight,barMaxHeight=_ref.barMaxHeight,currentTime=_ref.currentTime,duration=_ref.duration,onClick=_ref.onClick,onScrub=_ref.onScrub,refMerger=(0,useRefMerger.T)(),waveformRef=(0,react.useRef)(null),handleClick=(0,react.useCallback)((function(event){if(event.preventDefault(),event.stopPropagation(),waveformRef.current){var boundingRect=waveformRef.current.getBoundingClientRect(),progress=(event.pageX-boundingRect.left)/boundingRect.width;progress<=2/47&&(progress=0),onClick(progress)}}),[waveformRef,onClick]);return(0,jsx_runtime.jsx)("div",{ref:refMerger(waveformRef,ref),className:"WaveformScrubber",onClick:handleClick,onKeyDown:function(event){if(duration){var increment;if("ArrowUp"===event.key||event.key===(0,keyboard.x)("end"))increment=1;else if("ArrowDown"===event.key||event.key===(0,keyboard.x)("start"))increment=-1;else if("PageUp"===event.key)increment=5;else{if("PageDown"!==event.key)return;increment=-5}event.preventDefault(),event.stopPropagation(),onScrub(currentTime/duration+increment/duration)}},tabIndex:0,role:"slider","aria-label":i18n("icu:MessageAudio--slider"),"aria-orientation":"horizontal","aria-valuenow":currentTime,"aria-valuemin":0,"aria-valuemax":duration,"aria-valuetext":(0,durationToPlaybackText.v)(currentTime),children:(0,jsx_runtime.jsx)(Waveform,{peaks,barMinHeight,barMaxHeight,currentTime,duration})})}))},"./ts/components/emoji/EmojiPicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>EmojiPicker});var lodash_zipObject__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/zipObject.js"),lodash_zipObject__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_zipObject__WEBPACK_IMPORTED_MODULE_0__),lodash_last__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/last.js"),lodash_last__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_last__WEBPACK_IMPORTED_MODULE_1__),lodash_initial__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/initial.js"),lodash_initial__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_initial__WEBPACK_IMPORTED_MODULE_2__),lodash_flatMap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/flatMap.js"),lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_flatMap__WEBPACK_IMPORTED_MODULE_3__),lodash_findLast__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/lodash/findLast.js"),lodash_findLast__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(lodash_findLast__WEBPACK_IMPORTED_MODULE_4__),lodash_debounce__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/lodash/debounce.js"),lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_5__),lodash_clamp__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/lodash/clamp.js"),lodash_clamp__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(lodash_clamp__WEBPACK_IMPORTED_MODULE_6__),lodash_chunk__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/lodash/chunk.js"),lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash_chunk__WEBPACK_IMPORTED_MODULE_7__),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_9__),react_virtualized__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-virtualized/dist/es/index.js"),focus_trap_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/focus-trap-react/dist/focus-trap-react.js"),focus_trap_react__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(focus_trap_react__WEBPACK_IMPORTED_MODULE_11__),_Emoji__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ts/components/emoji/Emoji.tsx"),_lib__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./ts/components/emoji/lib.ts"),_util_grapheme__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./ts/util/grapheme.ts"),_util_missingCaseError__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("./ts/util/missingCaseError.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function focusOnRender(el){el&&el.focus()}var categories=["recents","emoji","animal","food","activity","travel","object","symbol","flag"],EmojiPicker=react__WEBPACK_IMPORTED_MODULE_8__.memo(react__WEBPACK_IMPORTED_MODULE_8__.forwardRef((function(_ref,ref){var i18n=_ref.i18n,doSend=_ref.doSend,onPickEmoji=_ref.onPickEmoji,_ref$skinTone=_ref.skinTone,skinTone=void 0===_ref$skinTone?0:_ref$skinTone,onSetSkinTone=_ref.onSetSkinTone,_ref$recentEmojis=_ref.recentEmojis,recentEmojis=void 0===_ref$recentEmojis?[]:_ref$recentEmojis,style=_ref.style,onClickSettings=_ref.onClickSettings,onClose=_ref.onClose,firstRecent=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(recentEmojis),1)[0],_React$useState4=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(categories[0]),2),selectedCategory=_React$useState4[0],setSelectedCategory=_React$useState4[1],_React$useState6=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(!1),2),searchMode=_React$useState6[0],setSearchMode=_React$useState6[1],_React$useState8=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(""),2),searchText=_React$useState8[0],setSearchText=_React$useState8[1],_React$useState10=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(0),2),scrollToRow=_React$useState10[0],setScrollToRow=_React$useState10[1],_React$useState12=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_8__.useState(skinTone),2),selectedTone=_React$useState12[0],setSelectedTone=_React$useState12[1],handleToggleSearch=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.stopPropagation(),e.preventDefault(),setSearchText(""),setSelectedCategory(categories[0]),setSearchMode((function(m){return!m}))}),[setSearchText,setSearchMode]),debounceSearchChange=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()((function(query){setScrollToRow(0),setSearchText(query)}),200)}),[setSearchText,setScrollToRow]),handleSearchChange=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){debounceSearchChange(e.currentTarget.value)}),[debounceSearchChange]),handlePickTone=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.preventDefault(),e.stopPropagation();var _e$currentTarget$data=e.currentTarget.dataset.tone,parsedTone=parseInt(void 0===_e$currentTarget$data?"0":_e$currentTarget$data,10);setSelectedTone(parsedTone),onSetSkinTone&&onSetSkinTone(parsedTone)}),[onSetSkinTone]),handlePickEmoji=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){var shortName=e.currentTarget.dataset.shortName;"key"in e?"Enter"===e.key&&(doSend?(doSend(),e.stopPropagation(),e.preventDefault()):shortName&&(onPickEmoji({skinTone:selectedTone,shortName}),e.stopPropagation(),e.preventDefault())):shortName&&(e.stopPropagation(),e.preventDefault(),onPickEmoji({skinTone:selectedTone,shortName}))}),[doSend,onPickEmoji,selectedTone]);react__WEBPACK_IMPORTED_MODULE_8__.useEffect((function(){var handler=function(event){"Escape"===event.key?searchMode?(event.preventDefault(),event.stopPropagation(),setScrollToRow(0),setSearchText(""),setSearchMode(!1)):onClose&&(event.preventDefault(),event.stopPropagation(),onClose()):searchMode||event.ctrlKey||event.metaKey||["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Shift","Tab"," "].includes(event.key)||((0,_util_grapheme__WEBPACK_IMPORTED_MODULE_14__.i3)(event.key)?(setSelectedCategory(categories[0]),setSearchMode(!0)):(null==onClose||onClose(),event.preventDefault(),event.stopPropagation()))};return document.addEventListener("keydown",handler),function(){document.removeEventListener("keydown",handler)}}),[onClose,searchMode,setSearchMode]);var renderableCategories=categories.slice(1),emojiGrid=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){if(searchText)return lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()((0,_lib__WEBPACK_IMPORTED_MODULE_13__.yC)(searchText).map((function(e){return e.short_name})),8);var chunks=lodash_flatMap__WEBPACK_IMPORTED_MODULE_3___default()(renderableCategories,(function(cat){return lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()(_lib__WEBPACK_IMPORTED_MODULE_13__.lu[cat].map((function(e){return e.short_name})),8)}));return[].concat(_toConsumableArray(lodash_chunk__WEBPACK_IMPORTED_MODULE_7___default()(firstRecent,8)),_toConsumableArray(chunks))}),[firstRecent,renderableCategories,searchText]),rowCount=emojiGrid.length,catRowEnds=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){var rowEnds=[Math.ceil(firstRecent.length/8)-1];return renderableCategories.forEach((function(cat){rowEnds.push(Math.ceil(_lib__WEBPACK_IMPORTED_MODULE_13__.lu[cat].length/8)+lodash_last__WEBPACK_IMPORTED_MODULE_1___default()(rowEnds))})),rowEnds}),[firstRecent.length,renderableCategories]),catToRowOffsets=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){var offsets=lodash_initial__WEBPACK_IMPORTED_MODULE_2___default()(catRowEnds).map((function(i){return i+1}));return lodash_zipObject__WEBPACK_IMPORTED_MODULE_0___default()(categories,[0].concat(_toConsumableArray(offsets)))}),[catRowEnds]),catOffsetEntries=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return Object.entries(catToRowOffsets)}),[catToRowOffsets]),handleSelectCategory=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(e){e.stopPropagation(),e.preventDefault();var category=e.currentTarget.dataset.category;category&&(setSelectedCategory(category),setScrollToRow(catToRowOffsets[category]))}),[catToRowOffsets,setSelectedCategory,setScrollToRow]),cellRenderer=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(_ref2){var key=_ref2.key,cellStyle=_ref2.style,rowIndex=_ref2.rowIndex,columnIndex=_ref2.columnIndex,shortName=emojiGrid[rowIndex][columnIndex];return shortName?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__body__emoji-cell",style:cellStyle,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button",className:"module-emoji-picker__button",onClick:handlePickEmoji,onKeyDown:handlePickEmoji,"data-short-name":shortName,title:shortName,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName,skinTone:selectedTone})})},key):null}),[emojiGrid,handlePickEmoji,selectedTone]),getRowHeight=react__WEBPACK_IMPORTED_MODULE_8__.useCallback((function(_ref3){var index=_ref3.index;return searchText?34:catRowEnds.includes(index)&&index!==lodash_last__WEBPACK_IMPORTED_MODULE_1___default()(catRowEnds)?44:34}),[catRowEnds,searchText]),onSectionRendered=react__WEBPACK_IMPORTED_MODULE_8__.useMemo((function(){return lodash_debounce__WEBPACK_IMPORTED_MODULE_5___default()((function(_ref4){var rowStartIndex=_ref4.rowStartIndex,_ref5=lodash_findLast__WEBPACK_IMPORTED_MODULE_4___default()(catOffsetEntries,(function(_ref7){var row=_slicedToArray(_ref7,2)[1];return rowStartIndex>=row}))||categories,cat=_slicedToArray(_ref5,1)[0];setSelectedCategory(cat)}),10)}),[catOffsetEntries]);function getCategoryButtonLabel(category){switch(category){case"recents":return i18n("icu:EmojiPicker__button--recents");case"emoji":return i18n("icu:EmojiPicker__button--emoji");case"animal":return i18n("icu:EmojiPicker__button--animal");case"food":return i18n("icu:EmojiPicker__button--food");case"activity":return i18n("icu:EmojiPicker__button--activity");case"travel":return i18n("icu:EmojiPicker__button--travel");case"object":return i18n("icu:EmojiPicker__button--object");case"symbol":return i18n("icu:EmojiPicker__button--symbol");case"flag":return i18n("icu:EmojiPicker__button--flag");default:throw(0,_util_missingCaseError__WEBPACK_IMPORTED_MODULE_16__.b)(category)}}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(focus_trap_react__WEBPACK_IMPORTED_MODULE_11___default(),{focusTrapOptions:{allowOutsideClick:!0},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:"module-emoji-picker",ref,style,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("header",{className:"module-emoji-picker__header",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button",onClick:handleToggleSearch,onKeyDown:function(event){"Enter"!==event.key&&"Select"!==event.key||handleToggleSearch(event)},title:i18n(searchMode?"icu:EmojiPicker--search-close":"icu:EmojiPicker--search-placeholder"),className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--icon",searchMode?"module-emoji-picker__button--icon--close":"module-emoji-picker__button--icon--search"),"aria-label":i18n("icu:EmojiPicker--search-placeholder")}),searchMode?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__header__search-field",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("input",{ref:focusOnRender,className:"module-emoji-picker__header__search-field__input",placeholder:i18n("icu:EmojiPicker--search-placeholder"),onChange:handleSearchChange,dir:"auto"})}):categories.map((function(cat){return"recents"===cat&&0===firstRecent.length?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button","data-category":cat,title:cat,onClick:handleSelectCategory,onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||handleSelectCategory(event)},className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--icon",`module-emoji-picker__button--icon--${cat}`,selectedCategory===cat?"module-emoji-picker__button--selected":null),"aria-label":getCategoryButtonLabel(cat)},cat)}))]}),rowCount>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_virtualized__WEBPACK_IMPORTED_MODULE_10__.qj,{children:function(_ref9){var width=_ref9.width,height=_ref9.height;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_virtualized__WEBPACK_IMPORTED_MODULE_10__.rj,{className:"module-emoji-picker__body",width,height,columnCount:8,columnWidth:38,rowHeight:getRowHeight,rowCount,cellRenderer,scrollToRow:lodash_clamp__WEBPACK_IMPORTED_MODULE_6___default()(scrollToRow,0,rowCount-1),scrollToAlignment:"start",onSectionRendered},searchText)}})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__body","module-emoji-picker__body--empty"),children:[i18n("icu:EmojiPicker--empty"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName:"slightly_frowning_face",size:16,style:{marginInlineStart:"4px"}})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)("footer",{className:"module-emoji-picker__footer",children:[Boolean(onClickSettings)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{"aria-label":i18n("icu:CustomizingPreferredReactions__title"),className:"module-emoji-picker__button module-emoji-picker__button--footer module-emoji-picker__button--settings",onClick:function(event){onClickSettings&&(event.preventDefault(),event.stopPropagation(),onClickSettings())},onKeyDown:function(event){!onClickSettings||"Enter"!==event.key&&"Space"!==event.key||(event.preventDefault(),event.stopPropagation(),onClickSettings())},title:i18n("icu:CustomizingPreferredReactions__title"),type:"button"}),onSetSkinTone?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__footer__skin-tones",children:[0,1,2,3,4,5].map((function(tone){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("button",{type:"button","data-tone":tone,onClick:handlePickTone,onKeyDown:function(event){"Enter"!==event.key&&"Space"!==event.key||handlePickTone(event)},title:i18n("icu:EmojiPicker--skin-tone",{tone:`${tone}`}),className:classnames__WEBPACK_IMPORTED_MODULE_9___default()("module-emoji-picker__button","module-emoji-picker__button--footer",selectedTone===tone?"module-emoji-picker__button--selected":null),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Emoji__WEBPACK_IMPORTED_MODULE_12__.d,{shortName:"hand",skinTone:tone,size:20})},tone)}))}):null,Boolean(onClickSettings)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)("div",{className:"module-emoji-picker__footer__settings-spacer"})]})]})})})))},"./ts/hooks/useComputePeaks.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>useComputePeaks});var lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_components_VoiceNotesPlaybackContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/VoiceNotesPlaybackContext.tsx"),_logging_log__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/logging/log.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useComputePeaks(_ref){var _ref2,_waveformData$duratio,_waveformData$peaks,audioUrl=_ref.audioUrl,activeDuration=_ref.activeDuration,barCount=_ref.barCount,onCorrupted=_ref.onCorrupted,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(void 0),2),waveformData=_useState2[0],setWaveformData=_useState2[1];return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){if(!audioUrl)return lodash_noop__WEBPACK_IMPORTED_MODULE_0___default();_logging_log__WEBPACK_IMPORTED_MODULE_3__.info("MessageAudio: loading audio and computing waveform");var canceled=!1;return async function(){try{var _await$computePeaks=await(0,_components_VoiceNotesPlaybackContext__WEBPACK_IMPORTED_MODULE_2__.JM)(audioUrl,barCount),newPeaks=_await$computePeaks.peaks,newDuration=_await$computePeaks.duration;if(canceled)return;setWaveformData({peaks:newPeaks,duration:Math.max(newDuration,1e-23)})}catch(err){_logging_log__WEBPACK_IMPORTED_MODULE_3__.error("MessageAudio: computePeaks error, marking as corrupted",err),onCorrupted()}}(),function(){canceled=!0}}),[audioUrl,barCount,onCorrupted]),{duration:null!==(_ref2=null!==(_waveformData$duratio=null==waveformData?void 0:waveformData.duration)&&void 0!==_waveformData$duratio?_waveformData$duratio:activeDuration)&&void 0!==_ref2?_ref2:1e-23,hasPeaks:void 0!==waveformData,peaks:null!==(_waveformData$peaks=null==waveformData?void 0:waveformData.peaks)&&void 0!==_waveformData$peaks?_waveformData$peaks:new Array(barCount).fill(0)}}},"./ts/storybook/Fixtures.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Yl:()=>gifUrl,L$:()=>landscapeGreenUrl,UJ:()=>pngUrl,K$:()=>portraitTealUrl,e7:()=>squareStickerUrl});const giphy_GVNvOUpeYmI7e_namespaceObject=__webpack_require__.p+"static/media/giphy-GVNvOUpeYmI7e.5fb55e50.gif",freepngs_2cd43b_bed7d1327e88454487397574d87b64dc_mv2_namespaceObject=__webpack_require__.p+"static/media/freepngs-2cd43b_bed7d1327e88454487397574d87b64dc_mv2.f13513c6.png",_1000x50_green_namespaceObject=__webpack_require__.p+"static/media/1000x50-green.221b1d06.jpeg",_50x1000_teal_namespaceObject=(__webpack_require__.p,__webpack_require__.p+"static/media/50x1000-teal.e07215d6.jpeg"),_512x515_thumbs_up_lincoln_namespaceObject=__webpack_require__.p+"static/media/512x515-thumbs-up-lincoln.1e1e8fb6.webp";var gifUrl=`/${giphy_GVNvOUpeYmI7e_namespaceObject}`,pngUrl=`/${freepngs_2cd43b_bed7d1327e88454487397574d87b64dc_mv2_namespaceObject}`,landscapeGreenUrl=`/${_1000x50_green_namespaceObject}`,portraitTealUrl=`/${_50x1000_teal_namespaceObject}`,squareStickerUrl=`/${_512x515_thumbs_up_lincoln_namespaceObject}`},"./ts/test-both/helpers/fakeAttachment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C4:()=>fakeDraftAttachment,Jh:()=>fakeThumbnail,dh:()=>fakeAttachment});var _types_MIME__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/types/MIME.ts"),fakeAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,width:800,height:600,size:10304},overrides)},fakeThumbnail=function(url){return{contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,height:100,path:url,url,width:100}},fakeDraftAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({pending:!1,contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,path:"file.jpg",size:10304},overrides)}},"./ts/test-both/helpers/getFakeBadge.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>getFakeBadge,z:()=>getFakeBadges});var lodash_times__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/times.js"),lodash_times__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_times__WEBPACK_IMPORTED_MODULE_0__),_badges_BadgeCategory__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/badges/BadgeCategory.ts"),_badges_BadgeImageTheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/badges/BadgeImageTheme.ts"),_util_iterables__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/iterables.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getFakeBadge(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$alternate=_ref.alternate,alternate=void 0!==_ref$alternate&&_ref$alternate,_ref$id=_ref.id,id=void 0===_ref$id?"test-badge":_ref$id,imageFile={localPath:`/fixtures/${alternate?"blue":"orange"}-heart.svg`,url:"https://example.com/ignored.svg"};return{id,category:alternate?_badges_BadgeCategory__WEBPACK_IMPORTED_MODULE_1__.Q.Other:_badges_BadgeCategory__WEBPACK_IMPORTED_MODULE_1__.Q.Donor,name:"Test Badge "+(alternate?"B":"A"),descriptionTemplate:"{short_name} got this badge because they're cool. Signal is a nonprofit with no advertisers or investors, supported only by people like you.",images:[].concat(_toConsumableArray(Array(3).fill((0,_util_iterables__WEBPACK_IMPORTED_MODULE_3__.f9)(Object.values(_badges_BadgeImageTheme__WEBPACK_IMPORTED_MODULE_2__.c),(0,_util_iterables__WEBPACK_IMPORTED_MODULE_3__.rx)(imageFile)))),[{[_badges_BadgeImageTheme__WEBPACK_IMPORTED_MODULE_2__.c.Transparent]:imageFile}])}}var getFakeBadges=function(count){return lodash_times__WEBPACK_IMPORTED_MODULE_0___default()(count,(function(index){return getFakeBadge({alternate:index%2!=0,id:`test-badge-${index}`})}))}},"./ts/util/durationToPlaybackText.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>durationToPlaybackText});var durationToPlaybackText=function(time){var hours=Math.floor(time/3600),minutes=Math.floor(time%3600/60).toString(),seconds=Math.floor(time%60).toString();return 0!==hours&&minutes.length<2&&(minutes=`0${minutes}`),seconds.length<2&&(seconds=`0${seconds}`),hours?`${hours}:${minutes}:${seconds}`:`${minutes}:${seconds}`}},"./ts/util/keyboard.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>arrow});var logicalArrows={start:{ltr:"ArrowLeft",rtl:"ArrowRight"},end:{ltr:"ArrowRight",rtl:"ArrowLeft"}};function arrow(logicalDirection){var localeDirection=window.getResolvedMessagesLocaleDirection();return logicalArrows[logicalDirection][localeDirection]}},"./ts/util/shouldNeverBeCalled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>shouldNeverBeCalled,q:()=>asyncShouldNeverBeCalled});var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/assert.ts");function shouldNeverBeCalled(){(0,_assert__WEBPACK_IMPORTED_MODULE_0__.q8)(!1,"This should never be called. Doing nothing")}async function asyncShouldNeverBeCalled(){shouldNeverBeCalled()}}}]);