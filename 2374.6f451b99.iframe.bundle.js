"use strict";(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[2374],{"./ts/components/conversation/LinkPreviewDate.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>LinkPreviewDate});__webpack_require__("./node_modules/react/index.js");var moment=__webpack_require__("./node_modules/moment/moment.js"),moment_default=__webpack_require__.n(moment);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function LinkPreviewDate(_ref){var date=_ref.date,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,dateMoment=function isLinkPreviewDateValid(value){var maximumLinkPreviewDate=Date.now()+864e5;return"number"==typeof value&&0!==value&&Number.isFinite(value)&&value<maximumLinkPreviewDate}(date)?moment_default()(date):null;return dateMoment?(0,jsx_runtime.jsx)("time",{className,dateTime:dateMoment.toISOString(),children:dateMoment.format("ll")}):null}},"./ts/components/conversation/Quote.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>Quote});var lodash_noop__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/noop.js"),lodash_noop__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_noop__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),_types_MIME__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/types/MIME.ts"),_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/util/GoogleChrome.ts"),_MessageBody__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/components/conversation/MessageBody.tsx"),_ContactName__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_Emojify__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),_TextAttachment__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/components/TextAttachment.tsx"),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/util/getClassNamesFor.ts"),_util_getCustomColorStyle__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ts/util/getCustomColorStyle.ts"),_types_Payment__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./ts/types/Payment.ts"),_messages_helpers__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ts/messages/helpers.ts"),_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./ts/components/conversation/MessageTextRenderer.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getAttachment(rawAttachment){return rawAttachment&&!_types_MIME__WEBPACK_IMPORTED_MODULE_3__.Aw(rawAttachment.contentType)?rawAttachment:void 0}function Quote(props){var colorClassName,directionClassName,conversationColor=props.conversationColor,customColor=props.customColor,isStoryReply=props.isStoryReply,onClose=props.onClose,text=props.text,bodyRanges=props.bodyRanges,authorTitle=props.authorTitle,conversationTitle=props.conversationTitle,isFromMe=props.isFromMe,i18n=props.i18n,payment=props.payment,isViewOnce=props.isViewOnce,isGiftBadge=props.isGiftBadge,rawAttachment=props.rawAttachment,isIncoming=props.isIncoming,moduleClassName=props.moduleClassName,referencedMessageNotFound=props.referencedMessageNotFound,doubleCheckMissingQuoteReference=props.doubleCheckMissingQuoteReference,onClick=props.onClick,isCompose=props.isCompose,reactionEmoji=props.reactionEmoji,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!1),2),imageBroken=_useState2[0],setImageBroken=_useState2[1],getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_9__.h)("module-quote",moduleClassName);function handleImageError(){window.console.info("Message: Image failed to load; failing over to placeholder"),setImageBroken(!0)}function renderImage(url,icon,asGiftBadge){var iconElement=icon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container__inner"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container__circle-background"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__icon-container__icon"),getClassName(`__icon-container__icon--${icon}`))})})}):null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(ThumbnailImage,{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__icon-container"),!1===isIncoming&&asGiftBadge&&getClassName("__icon-container__outgoing-gift-badge")),src:url,onError:handleImageError,children:iconElement})}function renderIcon(icon){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container__inner"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container__circle-background"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__icon-container__icon"),getClassName(`__icon-container__icon--${icon}`))})})})})}return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){referencedMessageNotFound&&(null==doubleCheckMissingQuoteReference||doubleCheckMissingQuoteReference())}),[referencedMessageNotFound,doubleCheckMissingQuoteReference]),function validateQuote(quote){var _quote$payment;return!!(quote.isStoryReply&&(quote.referencedMessageNotFound||quote.reactionEmoji)||quote.isGiftBadge||quote.text||quote.rawAttachment||(null===(_quote$payment=quote.payment)||void 0===_quote$payment?void 0:_quote$payment.kind)===_types_Payment__WEBPACK_IMPORTED_MODULE_11__.s.Notification)}(props)?(isCompose?(directionClassName=getClassName("--compose"),colorClassName=getClassName(`--compose-${conversationColor}`)):isIncoming?(directionClassName=getClassName("--incoming"),colorClassName=getClassName(`--incoming-${conversationColor}`)):(directionClassName=getClassName("--outgoing"),colorClassName=getClassName(`--outgoing-${conversationColor}`)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:getClassName("__container"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("button",{type:"button",onClick:function handleClick(event){onClick&&(event.preventDefault(),event.stopPropagation(),onClick())},onKeyDown:function handleKeyDown(event){!onClick||"Enter"!==event.key&&" "!==event.key||(event.preventDefault(),event.stopPropagation(),onClick())},className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName(""),directionClassName,colorClassName,!onClick&&getClassName("--no-click"),referencedMessageNotFound&&getClassName("--with-reference-warning")),style:Object.assign({},(0,_util_getCustomColorStyle__WEBPACK_IMPORTED_MODULE_10__.X)(customColor,!0)),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:getClassName("__primary"),children:[function renderAuthor(){var title=isFromMe?i18n("icu:you"):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_ContactName__WEBPACK_IMPORTED_MODULE_6__.K,{title:authorTitle}),author=isStoryReply?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[title," Â· ",i18n("icu:Quote__story")]}):title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__primary__author"),isIncoming?getClassName("__primary__author--incoming"):null),children:author})}(),function renderGenericFile(){var attachment=getAttachment(rawAttachment);if(!attachment)return null;var fileName=attachment.fileName,contentType=attachment.contentType,textAttachment=attachment.textAttachment;return!(_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.eq(contentType)||_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.T(contentType)||textAttachment||_types_MIME__WEBPACK_IMPORTED_MODULE_3__.F0(contentType))?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:getClassName("__generic-file"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__generic-file__icon")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__generic-file__text"),isIncoming?getClassName("__generic-file__text--incoming"):null),children:fileName})]}):null}(),function renderPayment(){return null==payment?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_Emojify__WEBPACK_IMPORTED_MODULE_7__.u,{text:"ð³"}),(0,_messages_helpers__WEBPACK_IMPORTED_MODULE_12__.dc)(payment,authorTitle,conversationTitle,isFromMe,i18n)]})}(),function renderText(){if(text&&!isGiftBadge)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{dir:"auto",className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__primary__text"),isIncoming?getClassName("__primary__text--incoming"):null),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_MessageBody__WEBPACK_IMPORTED_MODULE_5__.D,{bodyRanges,disableLinks:!0,disableJumbomoji:!0,i18n,isSpoilerExpanded:!1,renderLocation:_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_13__.G5.Quote,text})});var typeLabel,attachment=getAttachment(rawAttachment);if(isGiftBadge)typeLabel=i18n("icu:quote--donation");else{if(!attachment)return null;var contentType=attachment.contentType,isVoiceMessage=attachment.isVoiceMessage;typeLabel=function getTypeLabel(_ref){var i18n=_ref.i18n,_ref$isViewOnce=_ref.isViewOnce,isViewOnce=void 0!==_ref$isViewOnce&&_ref$isViewOnce,contentType=_ref.contentType,isVoiceMessage=_ref.isVoiceMessage;return _util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.eq(contentType)?i18n(isViewOnce?"icu:message--getDescription--disappearing-video":"icu:video"):_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.T(contentType)?i18n(isViewOnce?"icu:message--getDescription--disappearing-photo":"icu:photo"):isViewOnce?i18n("icu:message--getDescription--disappearing-media"):_types_MIME__WEBPACK_IMPORTED_MODULE_3__.F0(contentType)&&isVoiceMessage?i18n("icu:voiceMessage"):_types_MIME__WEBPACK_IMPORTED_MODULE_3__.F0(contentType)?i18n("icu:audio"):void 0}({i18n,isViewOnce,contentType,isVoiceMessage})}return typeLabel?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__primary__type-label"),isIncoming?getClassName("__primary__type-label--incoming"):null),children:typeLabel}):null}()]}),reactionEmoji&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName(rawAttachment?"__reaction-emoji":"__reaction-emoji--story-unavailable"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_Emojify__WEBPACK_IMPORTED_MODULE_7__.u,{text:reactionEmoji})}),function renderIconContainer(){var attachment=getAttachment(rawAttachment);if(isGiftBadge)return renderImage("images/gift-thumbnail.svg",void 0,!0);if(!attachment)return null;var contentType=attachment.contentType,textAttachment=attachment.textAttachment,url=function getUrl(thumbnail){if(thumbnail)return thumbnail.objectUrl||thumbnail.url}(attachment.thumbnail);return isViewOnce?renderIcon("view-once"):textAttachment?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__icon-container"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_8__.S,{i18n,isThumbnail:!0,textAttachment})}):_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.eq(contentType)?url&&!imageBroken?renderImage(url,"play"):renderIcon("movie"):_util_GoogleChrome__WEBPACK_IMPORTED_MODULE_4__.T(contentType)?url&&!imageBroken?renderImage(url,void 0):renderIcon("image"):_types_MIME__WEBPACK_IMPORTED_MODULE_3__.F0(contentType)?renderIcon("microphone"):null}(),function renderClose(){return onClose?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:getClassName("__close-container"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{tabIndex:0,role:"button",className:getClassName("__close-button"),"aria-label":i18n("icu:close"),onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),e.preventDefault(),onClose())},onClick:function(e){e.stopPropagation(),e.preventDefault(),onClose()}})}):null}()]}),function renderReferenceWarning(){return!referencedMessageNotFound||isStoryReply?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__reference-warning"),getClassName(isIncoming?`--incoming-${conversationColor}`:`--outgoing-${conversationColor}`)),style:Object.assign({},(0,_util_getCustomColorStyle__WEBPACK_IMPORTED_MODULE_10__.X)(customColor,!0)),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__reference-warning__icon"),isIncoming?getClassName("__reference-warning__icon--incoming"):null)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_2___default()(getClassName("__reference-warning__text"),isIncoming?getClassName("__reference-warning__text--incoming"):null),children:i18n("icu:originalMessageNotFound")})]})}()]})):null}function ThumbnailImage(_ref2){var className=_ref2.className,src=_ref2.src,onError=_ref2.onError,children=_ref2.children,imageRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Image),_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),2),loadedSrc=_useState4[0],setLoadedSrc=_useState4[1];return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var image=new Image;return image.onload=function(){setLoadedSrc(src)},image.src=src,imageRef.current=image,function(){image.onload=lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}}),[src]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){setLoadedSrc(null)}),[src]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var image=imageRef.current;return image.onerror=onError,function(){image.onerror=lodash_noop__WEBPACK_IMPORTED_MODULE_0___default()}}),[onError]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_14__.jsx)("div",{className,style:loadedSrc?{backgroundImage:`url('${encodeURI(loadedSrc)}')`}:{},children})}Quote.displayName="Quote",ThumbnailImage.displayName="ThumbnailImage"},"./ts/hooks/useRestoreFocus.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>useRestoreFocus,e:()=>useDelayedRestoreFocus});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),useRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]},useDelayedRestoreFocus=function(){var toFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),lastFocusedRef=react__WEBPACK_IMPORTED_MODULE_0__.useRef(null),setFocusRef=react__WEBPACK_IMPORTED_MODULE_0__.useCallback((function(toFocus){var timeout=setTimeout((function setFocus(){toFocus&&(toFocusRef.current||(toFocusRef.current=toFocus,lastFocusedRef.current=document.activeElement,toFocus.focus()))}),250);return function(){clearTimeout(timeout)}}),[]);return react__WEBPACK_IMPORTED_MODULE_0__.useEffect((function(){return function(){setTimeout((function(){lastFocusedRef.current&&lastFocusedRef.current.focus&&lastFocusedRef.current.focus()}))}}),[]),[setFocusRef]}},"./ts/messages/helpers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Zw:()=>getSourceUuid,b5:()=>getSource,dc:()=>getPaymentEventNotificationText,gD:()=>getSourceDevice,rW:()=>getPaymentEventDescription,zK:()=>isStory});var _logging_log__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/logging/log.ts"),_types_Payment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Payment.ts"),_util_missingCaseError__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/missingCaseError.ts");function isIncoming(message){return"incoming"===message.type}function isOutgoing(message){return"outgoing"===message.type}function isStory(message){return"story"===message.type}function getPaymentEventNotificationText(payment,senderTitle,conversationTitle,senderIsMe,i18n){return payment.kind===_types_Payment__WEBPACK_IMPORTED_MODULE_1__.s.Notification?i18n("icu:payment-event-notification-label"):getPaymentEventDescription(payment,senderTitle,conversationTitle,senderIsMe,i18n)}function getPaymentEventDescription(payment,senderTitle,conversationTitle,senderIsMe,i18n){var kind=payment.kind;if(kind===_types_Payment__WEBPACK_IMPORTED_MODULE_1__.s.Notification)return senderIsMe?null!=conversationTitle?i18n("icu:payment-event-notification-message-you-label",{receiver:conversationTitle}):i18n("icu:payment-event-notification-message-you-label-without-receiver"):i18n("icu:payment-event-notification-message-label",{sender:senderTitle});if(kind===_types_Payment__WEBPACK_IMPORTED_MODULE_1__.s.ActivationRequest)return senderIsMe?null!=conversationTitle?i18n("icu:payment-event-activation-request-you-label",{receiver:conversationTitle}):i18n("icu:payment-event-activation-request-you-label-without-receiver"):i18n("icu:payment-event-activation-request-label",{sender:senderTitle});if(kind===_types_Payment__WEBPACK_IMPORTED_MODULE_1__.s.Activation)return senderIsMe?i18n("icu:payment-event-activated-you-label"):i18n("icu:payment-event-activated-label",{sender:senderTitle});throw(0,_util_missingCaseError__WEBPACK_IMPORTED_MODULE_2__.b)(kind)}function getSource(message){return isIncoming(message)||isStory(message)?message.source:(isOutgoing(message)||_logging_log__WEBPACK_IMPORTED_MODULE_0__.warn("Message.getSource: Called for non-incoming/non-outgoing message"),window.textsecure.storage.user.getNumber())}function getSourceDevice(message){var sourceDevice=message.sourceDevice;return isIncoming(message)||isStory(message)?sourceDevice:(isOutgoing(message)||_logging_log__WEBPACK_IMPORTED_MODULE_0__.warn("Message.getSourceDevice: Called for non-incoming/non-outgoing message"),sourceDevice||window.textsecure.storage.user.getDeviceId())}function getSourceUuid(message){var _window$textsecure$st;return isIncoming(message)||isStory(message)?message.sourceUuid:(isOutgoing(message)||_logging_log__WEBPACK_IMPORTED_MODULE_0__.warn("Message.getSourceUuid: Called for non-incoming/non-outgoing message"),null===(_window$textsecure$st=window.textsecure.storage.user.getUuid())||void 0===_window$textsecure$st?void 0:_window$textsecure$st.toString())}},"./ts/types/Panels.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var PanelType;__webpack_require__.d(__webpack_exports__,{w:()=>PanelType}),function(PanelType){PanelType.AllMedia="AllMedia",PanelType.ChatColorEditor="ChatColorEditor",PanelType.ContactDetails="ContactDetails",PanelType.ConversationDetails="ConversationDetails",PanelType.GroupInvites="GroupInvites",PanelType.GroupLinkManagement="GroupLinkManagement",PanelType.GroupPermissions="GroupPermissions",PanelType.GroupV1Members="GroupV1Members",PanelType.MessageDetails="MessageDetails",PanelType.NotificationSettings="NotificationSettings",PanelType.StickerManager="StickerManager"}(PanelType||(PanelType={}))},"./ts/types/Payment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var PaymentEventKind;__webpack_require__.d(__webpack_exports__,{s:()=>PaymentEventKind}),function(PaymentEventKind){PaymentEventKind[PaymentEventKind.Notification=1]="Notification",PaymentEventKind[PaymentEventKind.ActivationRequest=2]="ActivationRequest",PaymentEventKind[PaymentEventKind.Activation=3]="Activation"}(PaymentEventKind||(PaymentEventKind={}))},"./ts/util/clearTimeoutIfNecessary.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function clearTimeoutIfNecessary(timeout){timeout&&clearTimeout(timeout)}__webpack_require__.d(__webpack_exports__,{S:()=>clearTimeoutIfNecessary})},"./ts/util/getCustomColorStyle.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>getCustomColorStyle});var Util=__webpack_require__("./ts/types/Util.ts"),getHSL=__webpack_require__("./ts/util/getHSL.ts"),es=__webpack_require__("./node_modules/reselect/es/index.js"),version=__webpack_require__("./ts/util/version.ts"),getUser=function(state){return state.user},getPlatform=((0,es.P1)(getUser,(function(state){return state.ourNumber})),(0,es.P1)(getUser,(function(state){return state.ourDeviceId})),(0,es.P1)(getUser,(function(state){return state.regionCode})),(0,es.P1)(getUser,(function(state){return state.ourConversationId})),(0,es.P1)(getUser,(function(state){return state.ourACI})),(0,es.P1)(getUser,(function(state){return state.ourPNI})),(0,es.P1)(getUser,(function(state){return state.i18n})),(0,es.P1)(getUser,(function(state){return state.localeMessages})),(0,es.P1)(getUser,(function(state){return state.interactionMode})),(0,es.P1)(getUser,(function(state){return state.attachmentsPath})),(0,es.P1)(getUser,(function(state){return state.stickersPath})),(0,es.P1)(getUser,(function(state){return state.platform}))),getTheme=((0,es.P1)(getUser,(function(state){return state.tempPath})),(0,es.P1)(getUser,(function(state){return state.theme}))),getVersion=(0,es.P1)(getUser,(function(state){return state.version}));(0,es.P1)(getVersion,version.$9),(0,es.P1)(getVersion,version.hN),(0,es.P1)(getUser,(function(state){return state.isMainWindowMaximized})),(0,es.P1)(getUser,(function(state){return state.isMainWindowFullScreen})),(0,es.P1)(getUser,(function(state){return state.menuOptions})),(0,es.P1)(getPlatform,(function(platform){return"darwin"===platform}));function getUserTheme(){return getTheme(window.reduxStore.getState())}function getCustomColorStyle(color){var isQuote=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(color){var extraQuoteProps={},adjustedLightness=0;if(isQuote){var theme=getUserTheme();theme===Util.f8.light&&(adjustedLightness=.6),theme===Util.f8.dark&&(adjustedLightness=-.4),extraQuoteProps.borderLeftColor=(0,getHSL.$)(color.start)}return color.end?Object.assign({},extraQuoteProps,{backgroundImage:`linear-gradient(${270-(color.deg||0)}deg, ${(0,getHSL.$)(color.start,adjustedLightness)}, ${(0,getHSL.$)(color.end,adjustedLightness)})`}):Object.assign({},extraQuoteProps,{backgroundColor:(0,getHSL.$)(color.start,adjustedLightness)})}}},"./ts/util/getHSL.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>getHSL});var LIGHTNESS_TABLE={0:45,60:30,180:30,240:50,300:40,360:45};function getLightnessFromHue(hue,min,max){var minValue=LIGHTNESS_TABLE[min];return 100*(hue-min)/(max-min)*(LIGHTNESS_TABLE[max]-minValue)/100+minValue}function calculateLightness(hue){return hue<60?getLightnessFromHue(hue,0,60):hue<180?30:hue<240?getLightnessFromHue(hue,180,240):hue<300?getLightnessFromHue(hue,240,300):getLightnessFromHue(hue,300,360)}function adjustLightnessValue(lightness,percentIncrease){return lightness+lightness*percentIncrease}function getHSL(_ref){var hue=_ref.hue,saturation=_ref.saturation,adjustedLightness=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return`hsl(${hue}, ${saturation}%, ${adjustLightnessValue(calculateLightness(hue),adjustedLightness)}%)`}},"./ts/util/version.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$9:()=>isAlpha,hN:()=>isBeta});var semver__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/semver/semver.js"),isBeta=function(version){var _semver$parse;return"beta"===(null===(_semver$parse=semver__WEBPACK_IMPORTED_MODULE_0__.parse(version))||void 0===_semver$parse?void 0:_semver$parse.prerelease[0])},isAlpha=function(version){var _semver$parse2;return"alpha"===(null===(_semver$parse2=semver__WEBPACK_IMPORTED_MODULE_0__.parse(version))||void 0===_semver$parse2?void 0:_semver$parse2.prerelease[0])}}}]);