(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[5092],{"./ts/components/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Wu:()=>ButtonVariant,c:()=>ButtonIconType,qE:()=>ButtonSize,zx:()=>Button});var ButtonSize,ButtonVariant,ButtonIconType,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/assert.ts"),_util_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/theme.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");!function(ButtonSize){ButtonSize[ButtonSize.Large=0]="Large",ButtonSize[ButtonSize.Medium=1]="Medium",ButtonSize[ButtonSize.Small=2]="Small"}(ButtonSize||(ButtonSize={})),function(ButtonVariant){ButtonVariant.Calling="Calling",ButtonVariant.Destructive="Destructive",ButtonVariant.Details="Details",ButtonVariant.Primary="Primary",ButtonVariant.Secondary="Secondary",ButtonVariant.SecondaryAffirmative="SecondaryAffirmative",ButtonVariant.SecondaryDestructive="SecondaryDestructive",ButtonVariant.SystemMessage="SystemMessage"}(ButtonVariant||(ButtonVariant={})),function(ButtonIconType){ButtonIconType.audio="audio",ButtonIconType.muted="muted",ButtonIconType.search="search",ButtonIconType.unmuted="unmuted",ButtonIconType.video="video"}(ButtonIconType||(ButtonIconType={}));var SIZE_CLASS_NAMES=new Map([[ButtonSize.Large,"module-Button--large"],[ButtonSize.Medium,"module-Button--medium"],[ButtonSize.Small,"module-Button--small"]]),VARIANT_CLASS_NAMES=new Map([[ButtonVariant.Primary,"module-Button--primary"],[ButtonVariant.Secondary,"module-Button--secondary"],[ButtonVariant.SecondaryAffirmative,"module-Button--secondary module-Button--secondary--affirmative"],[ButtonVariant.SecondaryDestructive,"module-Button--secondary module-Button--secondary--destructive"],[ButtonVariant.Destructive,"module-Button--destructive"],[ButtonVariant.Calling,"module-Button--calling"],[ButtonVariant.SystemMessage,"module-Button--system-message"],[ButtonVariant.Details,"module-Button--details"]]),Button=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function ButtonInner(props,ref){var onClick,type,form,children=props.children,className=props.className,_props$disabled=props.disabled,disabled=void 0!==_props$disabled&&_props$disabled,icon=props.icon,style=props.style,tabIndex=props.tabIndex,theme=props.theme,_props$variant=props.variant,variant=void 0===_props$variant?ButtonVariant.Primary:_props$variant,_props$size=props.size,size=void 0===_props$size?variant===ButtonVariant.Details?ButtonSize.Small:ButtonSize.Medium:_props$size,ariaLabel=props["aria-label"],ariaDisabled=props["aria-disabled"];"onClick"in props?(onClick=props.onClick,type="button"):(onClick=void 0,type=props.type,form=props.form);var sizeClassName=SIZE_CLASS_NAMES.get(size);(0,_util_assert__WEBPACK_IMPORTED_MODULE_2__.q8)(sizeClassName,"<Button> size not found");var variantClassName=VARIANT_CLASS_NAMES.get(variant);(0,_util_assert__WEBPACK_IMPORTED_MODULE_2__.q8)(variantClassName,"<Button> variant not found");var buttonElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{"aria-label":ariaLabel,"aria-disabled":ariaDisabled,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-Button",sizeClassName,variantClassName,icon&&`module-Button--icon--${icon}`,className),disabled,onClick,form,ref,style,tabIndex,type,children});return theme?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:(0,_util_theme__WEBPACK_IMPORTED_MODULE_3__.j)(theme),children:buttonElement}):buttonElement}))},"./ts/components/ConfirmationDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>ConfirmationDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_react_spring_web__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Button.tsx"),_ModalHost__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ModalHost.tsx"),_Modal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/Modal.tsx"),_hooks_useAnimated__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/hooks/useAnimated.tsx"),_Spinner__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/Spinner.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function focusRef(el){el&&el.focus()}var ConfirmationDialog=react__WEBPACK_IMPORTED_MODULE_0__.memo((function ConfirmationDialogInner(_ref){var _ref$actions=_ref.actions,actions=void 0===_ref$actions?[]:_ref$actions,dialogName=_ref.dialogName,cancelButtonVariant=_ref.cancelButtonVariant,cancelText=_ref.cancelText,children=_ref.children,hasXButton=_ref.hasXButton,i18n=_ref.i18n,isSpinning=_ref.isSpinning,moduleClassName=_ref.moduleClassName,noMouseClose=_ref.noMouseClose,noDefaultCancelButton=_ref.noDefaultCancelButton,onCancel=_ref.onCancel,onClose=_ref.onClose,onTopOfEverything=_ref.onTopOfEverything,theme=_ref.theme,title=_ref.title,_useAnimated=(0,_hooks_useAnimated__WEBPACK_IMPORTED_MODULE_5__.F)(onClose,{getFrom:function(){return{opacity:0,transform:"scale(0.25)"}},getTo:function(isOpen){return{opacity:isOpen?1:0,transform:"scale(1)"}}}),close=_useAnimated.close,overlayStyles=_useAnimated.overlayStyles,modalStyles=_useAnimated.modalStyles,cancelAndClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){onCancel&&onCancel(),close()}),[close,onCancel]),handleCancel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){e.target===e.currentTarget&&cancelAndClose()}),[cancelAndClose]),hasActions=Boolean(actions.length),footer=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[isSpinning||noDefaultCancelButton?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:handleCancel,ref:focusRef,variant:cancelButtonVariant||(hasActions?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Secondary:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Primary),children:cancelText||i18n("icu:confirmation-dialog--Cancel")}),actions.map((function(action,i){var _action$id,buttonStyle;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{disabled:action.disabled||isSpinning,"aria-disabled":action["aria-disabled"],onClick:function(){action.action(),!1!==action.autoClose&&close()},"data-action":i,variant:(buttonStyle=action.style,"affirmative"===buttonStyle?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Primary:"negative"===buttonStyle?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Destructive:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Secondary),children:isSpinning?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Spinner__WEBPACK_IMPORTED_MODULE_6__.$j,{size:"22px",svgSize:"small",direction:"on-primary-button"}):action.text},"string"==typeof action.text?null!==(_action$id=action.id)&&void 0!==_action$id?_action$id:action.text:action.id)}))]}),modalName=`ConfirmationDialog.${dialogName}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ModalHost__WEBPACK_IMPORTED_MODULE_3__.l,{modalName,noMouseClose,onClose:close,onEscape:cancelAndClose,onTopOfEverything,overlayStyles,theme,moduleClassName:moduleClassName?`${moduleClassName}__ModalHost`:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_react_spring_web__WEBPACK_IMPORTED_MODULE_1__.animated.div,{style:modalStyles,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_4__.P2,{modalName,hasXButton,i18n,moduleClassName,onClose:cancelAndClose,title,modalFooter:footer,children})})})}))},"./ts/components/GroupDescriptionText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>GroupDescriptionText});__webpack_require__("./node_modules/react/index.js");var _conversation_AddNewLines__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/AddNewLines.tsx"),_conversation_Emojify__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),_conversation_Linkify__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/conversation/Linkify.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),renderNonLink=function(_ref){var key=_ref.key,text=_ref.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_conversation_Emojify__WEBPACK_IMPORTED_MODULE_2__.u,{text},key)};renderNonLink.displayName="renderNonLink";var renderNonNewLine=function(_ref2){var key=_ref2.key,text=_ref2.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_conversation_Linkify__WEBPACK_IMPORTED_MODULE_3__.zR,{text,renderNonLink},key)};function GroupDescriptionText(_ref3){var text=_ref3.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_conversation_AddNewLines__WEBPACK_IMPORTED_MODULE_1__.K,{text,renderNonNewLine})}renderNonNewLine.displayName="renderNonNewLine",GroupDescriptionText.displayName="GroupDescriptionText"},"./ts/components/Intl.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>Intl});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_logging_log__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/logging/log.ts"),_util_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/assert.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var defaultRenderText=function(_ref){var text=_ref.text,key=_ref.key;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:text},key)};defaultRenderText.displayName="defaultRenderText";var Intl=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Intl,_React$Component);var _super=_createSuper(Intl);function Intl(){return _classCallCheck(this,Intl),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Intl,[{key:"getComponent",value:function getComponent(index,placeholderName,key){var _this$props=this.props,id=_this$props.id,components=_this$props.components;if(!components)return _logging_log__WEBPACK_IMPORTED_MODULE_1__.error(`Error: Intl component prop not provided; Metadata: id '${id}', index ${index}, placeholder '${placeholderName}'`),null;if(Array.isArray(components))return!components||!components.length||components.length<=index?(_logging_log__WEBPACK_IMPORTED_MODULE_1__.error(`Error: Intl missing provided component for id '${id}', index ${index}`),null):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:components[index]},key);var value=components[placeholderName];return value?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:value},key):(_logging_log__WEBPACK_IMPORTED_MODULE_1__.error(`Error: Intl missing provided component for id '${id}', placeholder '${placeholderName}'`),null)}},{key:"render",value:function render(){var _this$props2=this.props,components=_this$props2.components,id=_this$props2.id,localizer=_this$props2.i18n,_this$props2$renderTe=_this$props2.renderText,renderText=void 0===_this$props2$renderTe?defaultRenderText:_this$props2$renderTe;if(!id)return _logging_log__WEBPACK_IMPORTED_MODULE_1__.error("Error: Intl id prop not provided"),null;if(!localizer.isLegacyFormat(id))return(0,_util_assert__WEBPACK_IMPORTED_MODULE_2__.Yj)(!Array.isArray(components),`components cannot be an array for ICU message ${id}`),localizer.getIntl().formatMessage({id},components);var text=localizer(id),results=[],FIND_REPLACEMENTS=/\$([^$]+)\$/g;if(Array.isArray(components)&&components.length>1)throw new Error("Array syntax is not supported with more than one placeholder");var componentIndex=0,key=0,lastTextIndex=0,match=FIND_REPLACEMENTS.exec(text);if(!match)return renderText({text,key:0});for(;match;){if(lastTextIndex<match.index){var textWithNoReplacements=text.slice(lastTextIndex,match.index);results.push(renderText({text:textWithNoReplacements,key})),key+=1}var placeholderName=match[1];results.push(this.getComponent(componentIndex,placeholderName,key)),componentIndex+=1,key+=1,lastTextIndex=FIND_REPLACEMENTS.lastIndex,match=FIND_REPLACEMENTS.exec(text)}return lastTextIndex<text.length&&(results.push(renderText({text:text.slice(lastTextIndex),key})),key+=1),results}}]),Intl}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},"./ts/components/Spinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$j:()=>Spinner,me:()=>SpinnerSvgSizes,sX:()=>SpinnerDirections});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SpinnerSvgSizes=["small","normal"],SpinnerDirections=["outgoing","incoming","on-background","on-primary-button","on-progress-dialog","on-avatar"];function Spinner(_ref){var ariaLabel=_ref.ariaLabel,direction=_ref.direction,moduleClassName=_ref.moduleClassName,role=_ref.role,size=_ref.size,svgSize=_ref.svgSize,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("module-spinner",moduleClassName);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__container"),getClassName(`__container--${svgSize}`),getClassName(direction&&`__container--${direction}`),getClassName(direction&&`__container--${svgSize}-${direction}`)),role,"aria-label":ariaLabel,style:{height:size,width:size},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__circle"),getClassName(`__circle--${svgSize}`),getClassName(direction&&`__circle--${direction}`),getClassName(direction&&`__circle--${svgSize}-${direction}`))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__arc"),getClassName(`__arc--${svgSize}`),getClassName(direction&&`__arc--${direction}`),getClassName(direction&&`__arc--${svgSize}-${direction}`))})]})}Spinner.displayName="Spinner"},"./ts/components/conversation/AddNewLines.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>AddNewLines});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),defaultRenderNonNewLine=function(_ref){return _ref.text};function AddNewLines(_ref2){var text=_ref2.text,_ref2$renderNonNewLin=_ref2.renderNonNewLine,renderNonNewLine=void 0===_ref2$renderNonNewLin?defaultRenderNonNewLine:_ref2$renderNonNewLin,results=[],FIND_NEWLINES=/\n/g,match=FIND_NEWLINES.exec(text),last=0,count=1;if(!match)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:renderNonNewLine({text,key:0})});for(;match;){if(last<match.index){var textWithNoNewline=text.slice(last,match.index);count+=1,results.push(renderNonNewLine({text:textWithNoNewline,key:count}))}count+=1,results.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{},count)),last=FIND_NEWLINES.lastIndex,match=FIND_NEWLINES.exec(text)}return last<text.length&&(count+=1,results.push(renderNonNewLine({text:text.slice(last),key:count}))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:results})}},"./ts/components/conversation/GroupV2Change.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AccessAttributes:()=>AccessAttributes,AccessInviteLink:()=>AccessInviteLink,AccessMembers:()=>AccessMembers,AdminApprovalAdd:()=>AdminApprovalAdd,AdminApprovalBounce:()=>AdminApprovalBounce,AdminApprovalRemove:()=>AdminApprovalRemove,AnnouncementGroupChange:()=>AnnouncementGroupChange,Avatar:()=>Avatar,Create:()=>Create,DescriptionChange:()=>DescriptionChange,DescriptionRemove:()=>DescriptionRemove,GroupLinkAdd:()=>GroupLinkAdd,GroupLinkRemove:()=>GroupLinkRemove,GroupLinkReset:()=>GroupLinkReset,MemberAdd:()=>MemberAdd,MemberAddFromAdminApproval:()=>MemberAddFromAdminApproval,MemberAddFromInvited:()=>MemberAddFromInvited,MemberAddFromLink:()=>MemberAddFromLink,MemberPrivilege:()=>MemberPrivilege,MemberRemove:()=>MemberRemove,Multiple:()=>Multiple,PendingAddMany:()=>PendingAddMany,PendingAddOne:()=>PendingAddOne,PendingRemoveMany:()=>PendingRemoveMany,PendingRemoveOne:()=>PendingRemoveOne,Summary:()=>Summary,Title:()=>Title,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),_util_setupI18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/setupI18n.ts"),_types_UUID__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/types/UUID.ts"),_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./_locales/en/messages.json"),_protobuf__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/protobuf/index.ts"),_GroupV2Change__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/conversation/GroupV2Change.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js"),i18n=(0,_util_setupI18n__WEBPACK_IMPORTED_MODULE_2__.E5)("en",_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__),OUR_ACI=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),OUR_PNI=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),CONTACT_A=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),CONTACT_B=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),CONTACT_C=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),ADMIN_A=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),INVITEE_A=_types_UUID__WEBPACK_IMPORTED_MODULE_3__.hb.generate().toString(),AccessControlEnum=_protobuf__WEBPACK_IMPORTED_MODULE_5__.g.AccessControl.AccessRequired,RoleEnum=_protobuf__WEBPACK_IMPORTED_MODULE_5__.g.Member.Role,renderContact=function(conversationId){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:`Conversation(${conversationId})`},conversationId)};renderContact.displayName="renderContact";var renderChange=function(change){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},groupBannedMemberships=_ref.groupBannedMemberships,groupMemberships=_ref.groupMemberships,groupName=_ref.groupName,_ref$areWeAdmin=_ref.areWeAdmin,areWeAdmin=void 0===_ref$areWeAdmin||_ref$areWeAdmin;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_GroupV2Change__WEBPACK_IMPORTED_MODULE_6__.d,{areWeAdmin:null==areWeAdmin||areWeAdmin,blockGroupLinkRequests:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_1__.action)("blockGroupLinkRequests"),conversationId:"some-conversation-id",change,groupBannedMemberships,groupMemberships,groupName,i18n,ourACI:OUR_ACI,ourPNI:OUR_PNI,renderContact})};renderChange.displayName="renderChange";const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Conversation/GroupV2Change"};function Multiple(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:renderChange({from:CONTACT_A,details:[{type:"title",newTitle:"Saturday Running"},{type:"avatar",removed:!1},{type:"description",description:"This is a long description.\n\nWe need a dialog to view it all!\n\nIt has a link to https://example.com"},{type:"member-add",uuid:OUR_ACI},{type:"member-add",uuid:OUR_PNI},{type:"description",description:"Another description"},{type:"member-privilege",uuid:OUR_ACI,newPrivilege:RoleEnum.ADMINISTRATOR}]})})}function Create(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"create"}]}),renderChange({from:CONTACT_A,details:[{type:"create"}]}),renderChange({details:[{type:"create"}]})]})}function Title(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"title",newTitle:"Saturday Running"}]}),renderChange({from:CONTACT_A,details:[{type:"title",newTitle:"Saturday Running"}]}),renderChange({details:[{type:"title",newTitle:"Saturday Running"}]}),renderChange({from:OUR_ACI,details:[{type:"title"}]}),renderChange({from:CONTACT_A,details:[{type:"title"}]}),renderChange({details:[{type:"title"}]})]})}function Avatar(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"avatar",removed:!1}]}),renderChange({from:CONTACT_A,details:[{type:"avatar",removed:!1}]}),renderChange({details:[{type:"avatar",removed:!1}]}),renderChange({from:OUR_ACI,details:[{type:"avatar",removed:!0}]}),renderChange({from:CONTACT_A,details:[{type:"avatar",removed:!0}]}),renderChange({details:[{type:"avatar",removed:!0}]})]})}function AccessAttributes(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"access-attributes",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:ADMIN_A,details:[{type:"access-attributes",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"access-attributes",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:OUR_ACI,details:[{type:"access-attributes",newPrivilege:AccessControlEnum.MEMBER}]}),renderChange({from:ADMIN_A,details:[{type:"access-attributes",newPrivilege:AccessControlEnum.MEMBER}]}),renderChange({details:[{type:"access-attributes",newPrivilege:AccessControlEnum.MEMBER}]})]})}function AccessMembers(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"access-members",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:ADMIN_A,details:[{type:"access-members",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"access-members",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:OUR_ACI,details:[{type:"access-members",newPrivilege:AccessControlEnum.MEMBER}]}),renderChange({from:ADMIN_A,details:[{type:"access-members",newPrivilege:AccessControlEnum.MEMBER}]}),renderChange({details:[{type:"access-members",newPrivilege:AccessControlEnum.MEMBER}]})]})}function AccessInviteLink(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ANY}]}),renderChange({from:ADMIN_A,details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ANY}]}),renderChange({details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ANY}]}),renderChange({from:OUR_ACI,details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:ADMIN_A,details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"access-invite-link",newPrivilege:AccessControlEnum.ADMINISTRATOR}]})]})}function MemberAdd(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"member-add",uuid:OUR_ACI}]}),renderChange({from:CONTACT_A,details:[{type:"member-add",uuid:OUR_ACI}]}),renderChange({details:[{type:"member-add",uuid:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"member-add",uuid:CONTACT_A}]}),renderChange({from:CONTACT_B,details:[{type:"member-add",uuid:CONTACT_A}]}),renderChange({details:[{type:"member-add",uuid:CONTACT_A}]})]})}function MemberAddFromInvited(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:CONTACT_A,details:[{type:"member-add-from-invite",uuid:OUR_ACI,inviter:CONTACT_B}]}),renderChange({details:[{type:"member-add-from-invite",uuid:OUR_ACI,inviter:CONTACT_A}]}),renderChange({from:OUR_ACI,details:[{type:"member-add-from-invite",uuid:CONTACT_A,inviter:CONTACT_B}]}),renderChange({from:CONTACT_A,details:[{type:"member-add-from-invite",uuid:CONTACT_B,inviter:CONTACT_C}]}),renderChange({details:[{type:"member-add-from-invite",uuid:CONTACT_A,inviter:CONTACT_B}]}),renderChange({from:OUR_ACI,details:[{type:"member-add-from-invite",uuid:OUR_ACI,inviter:CONTACT_A}]}),renderChange({from:OUR_ACI,details:[{type:"member-add-from-invite",uuid:OUR_ACI}]}),renderChange({from:CONTACT_A,details:[{type:"member-add-from-invite",uuid:CONTACT_A,inviter:OUR_ACI}]}),renderChange({from:CONTACT_A,details:[{type:"member-add-from-invite",uuid:CONTACT_A,inviter:CONTACT_B}]}),renderChange({from:CONTACT_A,details:[{type:"member-add-from-invite",uuid:CONTACT_A}]}),"ACI accepts PNI invite:",renderChange({from:OUR_PNI,details:[{type:"member-add-from-invite",uuid:OUR_ACI,inviter:CONTACT_B}]})]})}function MemberAddFromLink(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"member-add-from-link",uuid:OUR_ACI}]}),renderChange({from:CONTACT_A,details:[{type:"member-add-from-link",uuid:CONTACT_A}]}),renderChange({details:[{type:"member-add-from-link",uuid:CONTACT_A}]})]})}function MemberAddFromAdminApproval(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:ADMIN_A,details:[{type:"member-add-from-admin-approval",uuid:OUR_ACI}]}),renderChange({details:[{type:"member-add-from-admin-approval",uuid:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"member-add-from-admin-approval",uuid:CONTACT_A}]}),renderChange({from:ADMIN_A,details:[{type:"member-add-from-admin-approval",uuid:CONTACT_A}]}),renderChange({details:[{type:"member-add-from-admin-approval",uuid:CONTACT_A}]})]})}function MemberRemove(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"member-remove",uuid:OUR_ACI}]}),renderChange({from:CONTACT_A,details:[{type:"member-remove",uuid:OUR_ACI}]}),renderChange({details:[{type:"member-remove",uuid:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"member-remove",uuid:CONTACT_A}]}),renderChange({from:CONTACT_A,details:[{type:"member-remove",uuid:CONTACT_A}]}),renderChange({from:CONTACT_B,details:[{type:"member-remove",uuid:CONTACT_A}]}),renderChange({details:[{type:"member-remove",uuid:CONTACT_A}]})]})}function MemberPrivilege(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:CONTACT_A,details:[{type:"member-privilege",uuid:OUR_ACI,newPrivilege:RoleEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"member-privilege",uuid:OUR_ACI,newPrivilege:RoleEnum.ADMINISTRATOR}]}),renderChange({from:OUR_ACI,details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.ADMINISTRATOR}]}),renderChange({from:ADMIN_A,details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.ADMINISTRATOR}]}),renderChange({from:CONTACT_A,details:[{type:"member-privilege",uuid:OUR_ACI,newPrivilege:RoleEnum.DEFAULT}]}),renderChange({details:[{type:"member-privilege",uuid:OUR_ACI,newPrivilege:RoleEnum.DEFAULT}]}),renderChange({from:OUR_ACI,details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.DEFAULT}]}),renderChange({from:ADMIN_A,details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.DEFAULT}]}),renderChange({details:[{type:"member-privilege",uuid:CONTACT_A,newPrivilege:RoleEnum.DEFAULT}]})]})}function PendingAddOne(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:CONTACT_A,details:[{type:"pending-add-one",uuid:OUR_ACI}]}),renderChange({details:[{type:"pending-add-one",uuid:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"pending-add-one",uuid:INVITEE_A}]}),renderChange({from:CONTACT_B,details:[{type:"pending-add-one",uuid:INVITEE_A}]}),renderChange({details:[{type:"pending-add-one",uuid:INVITEE_A}]})]})}function PendingAddMany(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"pending-add-many",count:5}]}),renderChange({from:CONTACT_A,details:[{type:"pending-add-many",count:5}]}),renderChange({details:[{type:"pending-add-many",count:5}]})]})}function PendingRemoveOne(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:INVITEE_A,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:OUR_ACI}]}),renderChange({from:ADMIN_A,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:OUR_ACI}]}),renderChange({details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:OUR_ACI}]}),renderChange({from:INVITEE_A,details:[{type:"pending-remove-one",uuid:INVITEE_A}]}),renderChange({from:INVITEE_A,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:CONTACT_B}]}),renderChange({from:CONTACT_B,details:[{type:"pending-remove-one",uuid:OUR_ACI,inviter:CONTACT_B}]}),renderChange({from:CONTACT_A,details:[{type:"pending-remove-one",uuid:CONTACT_B,inviter:CONTACT_A}]}),renderChange({from:CONTACT_C,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:CONTACT_B}]}),renderChange({from:OUR_ACI,details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:CONTACT_B}]}),renderChange({details:[{type:"pending-remove-one",uuid:INVITEE_A,inviter:CONTACT_B}]}),renderChange({from:OUR_ACI,details:[{type:"pending-remove-one",uuid:INVITEE_A}]}),renderChange({from:CONTACT_B,details:[{type:"pending-remove-one",uuid:INVITEE_A}]}),renderChange({details:[{type:"pending-remove-one",uuid:INVITEE_A}]})]})}function PendingRemoveMany(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"pending-remove-many",count:5,inviter:OUR_ACI}]}),renderChange({from:ADMIN_A,details:[{type:"pending-remove-many",count:5,inviter:OUR_ACI}]}),renderChange({details:[{type:"pending-remove-many",count:5,inviter:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"pending-remove-many",count:5,inviter:CONTACT_A}]}),renderChange({from:ADMIN_A,details:[{type:"pending-remove-many",count:5,inviter:CONTACT_A}]}),renderChange({details:[{type:"pending-remove-many",count:5,inviter:CONTACT_A}]}),renderChange({from:OUR_ACI,details:[{type:"pending-remove-many",count:5}]}),renderChange({from:CONTACT_A,details:[{type:"pending-remove-many",count:5}]}),renderChange({details:[{type:"pending-remove-many",count:5}]})]})}function AdminApprovalAdd(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({details:[{type:"admin-approval-add-one",uuid:OUR_ACI}]}),renderChange({details:[{type:"admin-approval-add-one",uuid:CONTACT_A}]})]})}function AdminApprovalRemove(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"admin-approval-remove-one",uuid:OUR_ACI}]}),renderChange({details:[{type:"admin-approval-remove-one",uuid:OUR_ACI}]}),renderChange({from:OUR_ACI,details:[{type:"admin-approval-remove-one",uuid:CONTACT_A}]})]})}function AdminApprovalBounce(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:["Should show button:",renderChange({from:CONTACT_A,details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]},{groupMemberships:[{uuid:CONTACT_C,isAdmin:!1}],groupBannedMemberships:[CONTACT_B]}),renderChange({details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]},{groupMemberships:[{uuid:CONTACT_C,isAdmin:!1}],groupBannedMemberships:[CONTACT_B]}),renderChange({details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]}),"Would show button, but we're not admin:",renderChange({from:CONTACT_A,details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]},{areWeAdmin:!1,groupName:"Group 1"}),"Would show button, but user is a group member:",renderChange({from:CONTACT_A,details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]},{groupMemberships:[{uuid:CONTACT_A,isAdmin:!1}]}),"Would show button, but user is already banned:",renderChange({from:CONTACT_A,details:[{type:"admin-approval-bounce",uuid:CONTACT_A,times:1,isApprovalPending:!1}]},{groupBannedMemberships:[CONTACT_A]})]})}function GroupLinkAdd(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"group-link-add",privilege:AccessControlEnum.ANY}]}),renderChange({from:ADMIN_A,details:[{type:"group-link-add",privilege:AccessControlEnum.ANY}]}),renderChange({details:[{type:"group-link-add",privilege:AccessControlEnum.ANY}]}),renderChange({from:OUR_ACI,details:[{type:"group-link-add",privilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({from:ADMIN_A,details:[{type:"group-link-add",privilege:AccessControlEnum.ADMINISTRATOR}]}),renderChange({details:[{type:"group-link-add",privilege:AccessControlEnum.ADMINISTRATOR}]})]})}function GroupLinkReset(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"group-link-reset"}]}),renderChange({from:ADMIN_A,details:[{type:"group-link-reset"}]}),renderChange({details:[{type:"group-link-reset"}]})]})}function GroupLinkRemove(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"group-link-remove"}]}),renderChange({from:ADMIN_A,details:[{type:"group-link-remove"}]}),renderChange({details:[{type:"group-link-remove"}]})]})}function DescriptionRemove(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{removed:!0,type:"description"}]}),renderChange({from:ADMIN_A,details:[{removed:!0,type:"description"}]}),renderChange({details:[{removed:!0,type:"description"}]})]})}function DescriptionChange(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"description",description:"This is a long description.\n\nWe need a dialog to view it all!\n\nIt has a link to https://example.com"}]},{groupName:"We do hikes 🌲"}),renderChange({from:ADMIN_A,details:[{type:"description",description:"This is a long description.\n\nWe need a dialog to view it all!\n\nIt has a link to https://example.com"}]},{groupName:"We do hikes 🌲"}),renderChange({details:[{type:"description",description:"This is a long description.\n\nWe need a dialog to view it all!\n\nIt has a link to https://example.com"}]},{groupName:"We do hikes 🌲"})]})}function AnnouncementGroupChange(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[renderChange({from:OUR_ACI,details:[{type:"announcements-only",announcementsOnly:!0}]}),renderChange({from:ADMIN_A,details:[{type:"announcements-only",announcementsOnly:!0}]}),renderChange({details:[{type:"announcements-only",announcementsOnly:!0}]}),renderChange({from:OUR_ACI,details:[{type:"announcements-only",announcementsOnly:!1}]}),renderChange({from:ADMIN_A,details:[{type:"announcements-only",announcementsOnly:!1}]}),renderChange({details:[{type:"announcements-only",announcementsOnly:!1}]})]})}function Summary(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:renderChange({from:OUR_ACI,details:[{type:"summary"}]})})}AccessAttributes.story={name:"Access (Attributes)"},AccessMembers.story={name:"Access (Members)"},AccessInviteLink.story={name:"Access (Invite Link)"},MemberAddFromInvited.story={name:"Member Add (from invited)"},MemberAddFromLink.story={name:"Member Add (from link)"},MemberAddFromAdminApproval.story={name:"Member Add (from admin approval)"},PendingAddOne.story={name:"Pending Add - one"},PendingAddMany.story={name:"Pending Add - many"},PendingRemoveOne.story={name:"Pending Remove - one"},PendingRemoveMany.story={name:"Pending Remove - many"},AdminApprovalAdd.story={name:"Admin Approval (Add)"},AdminApprovalRemove.story={name:"Admin Approval (Remove)"},AdminApprovalBounce.story={name:"Admin Approval (Bounce)"},GroupLinkAdd.story={name:"Group Link (Add)"},GroupLinkReset.story={name:"Group Link (Reset)"},GroupLinkRemove.story={name:"Group Link (Remove)"},DescriptionRemove.story={name:"Description (Remove)"},DescriptionChange.story={name:"Description (Change)"},AnnouncementGroupChange.story={name:"Announcement Group (Change)"};var __namedExportsOrder=["Multiple","Create","Title","Avatar","AccessAttributes","AccessMembers","AccessInviteLink","MemberAdd","MemberAddFromInvited","MemberAddFromLink","MemberAddFromAdminApproval","MemberRemove","MemberPrivilege","PendingAddOne","PendingAddMany","PendingRemoveOne","PendingRemoveMany","AdminApprovalAdd","AdminApprovalRemove","AdminApprovalBounce","GroupLinkAdd","GroupLinkReset","GroupLinkRemove","DescriptionRemove","DescriptionChange","AnnouncementGroupChange","Summary"]},"./ts/components/conversation/GroupV2Change.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>GroupV2Change});var get=__webpack_require__("./node_modules/lodash/get.js"),get_default=__webpack_require__.n(get),react=__webpack_require__("./node_modules/react/index.js"),log=__webpack_require__("./ts/logging/log.ts"),Intl=__webpack_require__("./ts/components/Intl.tsx"),GroupDescriptionText=__webpack_require__("./ts/components/GroupDescriptionText.tsx"),Button=__webpack_require__("./ts/components/Button.tsx"),SystemMessage=__webpack_require__("./ts/components/conversation/SystemMessage.tsx"),missingCaseError=__webpack_require__("./ts/util/missingCaseError.ts"),protobuf=__webpack_require__("./ts/protobuf/index.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AccessControlEnum=protobuf.g.AccessControl.AccessRequired,RoleEnum=protobuf.g.Member.Role;function renderChange(change,options){var details=change.details,from=change.from;return details.flatMap((function(detail){var texts=renderChangeDetail(detail,Object.assign({},options,{from}));return Array.isArray(texts)?texts.map((function(text,index){var isLastText=index===texts.length-1;return{detail,isLastText,text}})):{detail,isLastText:!0,text:texts}}))}function renderChangeDetail(detail,options){var from=options.from,localizer=options.i18n,ourACI=options.ourACI,ourPNI=options.ourPNI,renderContact=options.renderContact,renderString=options.renderString;function i18n(id,components){return renderString(id,localizer,components)}var isOurUuid=function(uuid){return!!uuid&&Boolean(ourACI&&uuid===ourACI||ourPNI&&uuid===ourPNI)},fromYou=isOurUuid(from);if("create"===detail.type)return fromYou?i18n("icu:GroupV2--create--you"):from?i18n("icu:GroupV2--create--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--create--unknown");if("title"===detail.type){var newTitle=detail.newTitle;return newTitle?fromYou?i18n("icu:GroupV2--title--change--you",{newTitle}):from?i18n("icu:GroupV2--title--change--other",{memberName:renderContact(from),newTitle}):i18n("icu:GroupV2--title--change--unknown",{newTitle}):fromYou?i18n("icu:GroupV2--title--remove--you"):from?i18n("icu:GroupV2--title--remove--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--title--remove--unknown")}if("avatar"===detail.type)return detail.removed?fromYou?i18n("icu:GroupV2--avatar--remove--you"):from?i18n("icu:GroupV2--avatar--remove--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--avatar--remove--unknown"):fromYou?i18n("icu:GroupV2--avatar--change--you"):from?i18n("icu:GroupV2--avatar--change--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--avatar--change--unknown");if("access-attributes"===detail.type){var newPrivilege=detail.newPrivilege;return newPrivilege===AccessControlEnum.ADMINISTRATOR?fromYou?i18n("icu:GroupV2--access-attributes--admins--you"):from?i18n("icu:GroupV2--access-attributes--admins--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-attributes--admins--unknown"):newPrivilege===AccessControlEnum.MEMBER?fromYou?i18n("icu:GroupV2--access-attributes--all--you"):from?i18n("icu:GroupV2--access-attributes--all--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-attributes--all--unknown"):(log.warn(`access-attributes change type, privilege ${newPrivilege} is unknown`),"")}if("access-members"===detail.type){var _newPrivilege=detail.newPrivilege;return _newPrivilege===AccessControlEnum.ADMINISTRATOR?fromYou?i18n("icu:GroupV2--access-members--admins--you"):from?i18n("icu:GroupV2--access-members--admins--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-members--admins--unknown"):_newPrivilege===AccessControlEnum.MEMBER?fromYou?i18n("icu:GroupV2--access-members--all--you"):from?i18n("icu:GroupV2--access-members--all--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-members--all--unknown"):(log.warn(`access-members change type, privilege ${_newPrivilege} is unknown`),"")}if("access-invite-link"===detail.type){var _newPrivilege2=detail.newPrivilege;return _newPrivilege2===AccessControlEnum.ADMINISTRATOR?fromYou?i18n("icu:GroupV2--access-invite-link--enabled--you"):from?i18n("icu:GroupV2--access-invite-link--enabled--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-invite-link--enabled--unknown"):_newPrivilege2===AccessControlEnum.ANY?fromYou?i18n("icu:GroupV2--access-invite-link--disabled--you"):from?i18n("icu:GroupV2--access-invite-link--disabled--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--access-invite-link--disabled--unknown"):(log.warn(`access-invite-link change type, privilege ${_newPrivilege2} is unknown`),"")}if("member-add"===detail.type){var _uuid=detail.uuid;return isOurUuid(_uuid)?fromYou?i18n("icu:GroupV2--member-add--you--you"):from?i18n("icu:GroupV2--member-add--you--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--member-add--you--unknown"):fromYou?i18n("icu:GroupV2--member-add--other--you",{memberName:renderContact(_uuid)}):from?i18n("icu:GroupV2--member-add--other--other",{adderName:renderContact(from),addeeName:renderContact(_uuid)}):i18n("icu:GroupV2--member-add--other--unknown",{memberName:renderContact(_uuid)})}if("member-add-from-invite"===detail.type){var _uuid2=detail.uuid,inviter=detail.inviter,_weAreJoiner=isOurUuid(_uuid2),weAreInviter=isOurUuid(inviter);return from&&from===_uuid2?_weAreJoiner?inviter?i18n("icu:GroupV2--member-add--from-invite--you",{inviterName:renderContact(inviter)}):i18n("icu:GroupV2--member-add--from-invite--you-no-from"):weAreInviter?i18n("icu:GroupV2--member-add--from-invite--from-you",{inviteeName:renderContact(_uuid2)}):inviter?i18n("icu:GroupV2--member-add--from-invite--other",{inviteeName:renderContact(_uuid2),inviterName:renderContact(inviter)}):i18n("icu:GroupV2--member-add--from-invite--other-no-from",{inviteeName:renderContact(_uuid2)}):_weAreJoiner?from?i18n("icu:GroupV2--member-add--you--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--member-add--you--unknown"):fromYou?i18n("icu:GroupV2--member-add--invited--you",{inviteeName:renderContact(_uuid2)}):from?i18n("icu:GroupV2--member-add--invited--other",{memberName:renderContact(from),inviteeName:renderContact(_uuid2)}):i18n("icu:GroupV2--member-add--invited--unknown",{inviteeName:renderContact(_uuid2)})}if("member-add-from-link"===detail.type){var _uuid3=detail.uuid;return fromYou&&isOurUuid(_uuid3)?i18n("icu:GroupV2--member-add-from-link--you--you"):from&&_uuid3===from?i18n("icu:GroupV2--member-add-from-link--other",{memberName:renderContact(from)}):(log.warn("member-add-from-link change type; we have no from!"),i18n("icu:GroupV2--member-add--other--unknown",{memberName:renderContact(_uuid3)}))}if("member-add-from-admin-approval"===detail.type){var _uuid4=detail.uuid;return isOurUuid(_uuid4)?from?i18n("icu:GroupV2--member-add-from-admin-approval--you--other",{adminName:renderContact(from)}):(log.warn("member-add-from-admin-approval change type; we have no from, and we are joiner!"),i18n("icu:GroupV2--member-add-from-admin-approval--you--unknown")):fromYou?i18n("icu:GroupV2--member-add-from-admin-approval--other--you",{joinerName:renderContact(_uuid4)}):from?i18n("icu:GroupV2--member-add-from-admin-approval--other--other",{adminName:renderContact(from),joinerName:renderContact(_uuid4)}):(log.warn("member-add-from-admin-approval change type; we have no from"),i18n("icu:GroupV2--member-add-from-admin-approval--other--unknown",{joinerName:renderContact(_uuid4)}))}if("member-remove"===detail.type){var _uuid5=detail.uuid;return isOurUuid(_uuid5)?fromYou?i18n("icu:GroupV2--member-remove--you--you"):from?i18n("icu:GroupV2--member-remove--you--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--member-remove--you--unknown"):fromYou?i18n("icu:GroupV2--member-remove--other--you",{memberName:renderContact(_uuid5)}):from&&from===_uuid5?i18n("icu:GroupV2--member-remove--other--self",{memberName:renderContact(from)}):from?i18n("icu:GroupV2--member-remove--other--other",{adminName:renderContact(from),memberName:renderContact(_uuid5)}):i18n("icu:GroupV2--member-remove--other--unknown",{memberName:renderContact(_uuid5)})}if("member-privilege"===detail.type){var _uuid6=detail.uuid,_newPrivilege3=detail.newPrivilege,weAreMember=isOurUuid(_uuid6);return _newPrivilege3===RoleEnum.ADMINISTRATOR?weAreMember?from?i18n("icu:GroupV2--member-privilege--promote--you--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--member-privilege--promote--you--unknown"):fromYou?i18n("icu:GroupV2--member-privilege--promote--other--you",{memberName:renderContact(_uuid6)}):from?i18n("icu:GroupV2--member-privilege--promote--other--other",{adminName:renderContact(from),memberName:renderContact(_uuid6)}):i18n("icu:GroupV2--member-privilege--promote--other--unknown",{memberName:renderContact(_uuid6)}):_newPrivilege3===RoleEnum.DEFAULT?weAreMember?from?i18n("icu:GroupV2--member-privilege--demote--you--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--member-privilege--demote--you--unknown"):fromYou?i18n("icu:GroupV2--member-privilege--demote--other--you",{memberName:renderContact(_uuid6)}):from?i18n("icu:GroupV2--member-privilege--demote--other--other",{adminName:renderContact(from),memberName:renderContact(_uuid6)}):i18n("icu:GroupV2--member-privilege--demote--other--unknown",{memberName:renderContact(_uuid6)}):(log.warn(`member-privilege change type, privilege ${_newPrivilege3} is unknown`),"")}if("pending-add-one"===detail.type){var _uuid7=detail.uuid;return isOurUuid(_uuid7)?from?i18n("icu:GroupV2--pending-add--one--you--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--pending-add--one--you--unknown"):fromYou?i18n("icu:GroupV2--pending-add--one--other--you",{inviteeName:renderContact(_uuid7)}):from?i18n("icu:GroupV2--pending-add--one--other--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--pending-add--one--other--unknown")}if("pending-add-many"===detail.type){var count=detail.count;return fromYou?i18n("icu:GroupV2--pending-add--many--you",{count}):from?i18n("icu:GroupV2--pending-add--many--other",{memberName:renderContact(from),count}):i18n("icu:GroupV2--pending-add--many--unknown",{count})}if("pending-remove-one"===detail.type){var _inviter=detail.inviter,_uuid8=detail.uuid,_weAreInviter=isOurUuid(_inviter),_weAreInvited=isOurUuid(_uuid8),sentByInvited=Boolean(from&&from===_uuid8),sentByInviter=Boolean(from&&_inviter&&from===_inviter);return _weAreInviter?sentByInvited?i18n("icu:GroupV2--pending-remove--decline--you",{inviteeName:renderContact(_uuid8)}):fromYou?i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--one--you",{inviteeName:renderContact(_uuid8)}):from?i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--one--other",{adminName:renderContact(from),inviteeName:renderContact(_uuid8)}):i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--one--unknown",{inviteeName:renderContact(_uuid8)}):sentByInvited?fromYou?i18n("icu:GroupV2--pending-remove--decline--from-you"):_inviter?i18n("icu:GroupV2--pending-remove--decline--other",{memberName:renderContact(_inviter)}):i18n("icu:GroupV2--pending-remove--decline--unknown"):_inviter&&sentByInviter?i18n(_weAreInvited?"icu:GroupV2--pending-remove--revoke-own--to-you":"icu:GroupV2--pending-remove--revoke-own--unknown",{inviterName:renderContact(_inviter)}):_inviter?fromYou?i18n("icu:GroupV2--pending-remove--revoke-invite-from--one--you",{memberName:renderContact(_inviter)}):from?i18n("icu:GroupV2--pending-remove--revoke-invite-from--one--other",{adminName:renderContact(from),memberName:renderContact(_inviter)}):i18n("icu:GroupV2--pending-remove--revoke-invite-from--one--unknown",{memberName:renderContact(_inviter)}):fromYou?i18n("icu:GroupV2--pending-remove--revoke--one--you"):from?i18n("icu:GroupV2--pending-remove--revoke--one--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--pending-remove--revoke--one--unknown")}if("pending-remove-many"===detail.type){var _count=detail.count,_inviter2=detail.inviter;return isOurUuid(_inviter2)?fromYou?i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--many--you",{count:_count}):from?i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--many--other",{adminName:renderContact(from),count:_count}):i18n("icu:GroupV2--pending-remove--revoke-invite-from-you--many--unknown",{count:_count}):_inviter2?fromYou?i18n("icu:GroupV2--pending-remove--revoke-invite-from--many--you",{count:_count,memberName:renderContact(_inviter2)}):from?i18n("icu:GroupV2--pending-remove--revoke-invite-from--many--other",{adminName:renderContact(from),count:_count,memberName:renderContact(_inviter2)}):i18n("icu:GroupV2--pending-remove--revoke-invite-from--many--unknown",{count:_count,memberName:renderContact(_inviter2)}):fromYou?i18n("icu:GroupV2--pending-remove--revoke--many--you",{count:_count}):from?i18n("icu:GroupV2--pending-remove--revoke--many--other",{memberName:renderContact(from),count:_count}):i18n("icu:GroupV2--pending-remove--revoke--many--unknown",{count:_count})}if("admin-approval-add-one"===detail.type){var _uuid9=detail.uuid;return isOurUuid(_uuid9)?i18n("icu:GroupV2--admin-approval-add-one--you"):i18n("icu:GroupV2--admin-approval-add-one--other",{joinerName:renderContact(_uuid9)})}if("admin-approval-remove-one"===detail.type){var _uuid10=detail.uuid;return isOurUuid(_uuid10)?i18n(fromYou?"icu:GroupV2--admin-approval-remove-one--you--you":"icu:GroupV2--admin-approval-remove-one--you--unknown"):fromYou?i18n("icu:GroupV2--admin-approval-remove-one--other--you",{joinerName:renderContact(_uuid10)}):from&&from===_uuid10?i18n("icu:GroupV2--admin-approval-remove-one--other--own",{joinerName:renderContact(_uuid10)}):from?i18n("icu:GroupV2--admin-approval-remove-one--other--other",{adminName:renderContact(from),joinerName:renderContact(_uuid10)}):i18n("icu:GroupV2--admin-approval-remove-one--other--own",{joinerName:renderContact(_uuid10)})}if("admin-approval-bounce"===detail.type){var firstMessage,_uuid11=detail.uuid,times=detail.times,isApprovalPending=detail.isApprovalPending;if(firstMessage=1===times?i18n("icu:GroupV2--admin-approval-bounce--one",{joinerName:renderContact(_uuid11)}):i18n("icu:GroupV2--admin-approval-bounce",{joinerName:renderContact(_uuid11),numberOfRequests:times}),!isApprovalPending)return firstMessage;var secondMessage=renderChangeDetail({type:"admin-approval-add-one",uuid:_uuid11},options);return[firstMessage].concat(_toConsumableArray(Array.isArray(secondMessage)?secondMessage:[secondMessage]))}if("group-link-add"===detail.type){var privilege=detail.privilege;return privilege===AccessControlEnum.ADMINISTRATOR?fromYou?i18n("icu:GroupV2--group-link-add--enabled--you"):from?i18n("icu:GroupV2--group-link-add--enabled--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--group-link-add--enabled--unknown"):privilege===AccessControlEnum.ANY?fromYou?i18n("icu:GroupV2--group-link-add--disabled--you"):from?i18n("icu:GroupV2--group-link-add--disabled--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--group-link-add--disabled--unknown"):(log.warn(`group-link-add change type, privilege ${privilege} is unknown`),"")}if("group-link-reset"===detail.type)return fromYou?i18n("icu:GroupV2--group-link-reset--you"):from?i18n("icu:GroupV2--group-link-reset--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--group-link-reset--unknown");if("group-link-remove"===detail.type)return fromYou?i18n("icu:GroupV2--group-link-remove--you"):from?i18n("icu:GroupV2--group-link-remove--other",{adminName:renderContact(from)}):i18n("icu:GroupV2--group-link-remove--unknown");if("description"===detail.type)return detail.removed?fromYou?i18n("icu:GroupV2--description--remove--you"):from?i18n("icu:GroupV2--description--remove--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--description--remove--unknown"):fromYou?i18n("icu:GroupV2--description--change--you"):from?i18n("icu:GroupV2--description--change--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--description--change--unknown");if("announcements-only"===detail.type)return detail.announcementsOnly?fromYou?i18n("icu:GroupV2--announcements--admin--you"):from?i18n("icu:GroupV2--announcements--admin--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--announcements--admin--unknown"):fromYou?i18n("icu:GroupV2--announcements--member--you"):from?i18n("icu:GroupV2--announcements--member--other",{memberName:renderContact(from)}):i18n("icu:GroupV2--announcements--member--unknown");if("summary"===detail.type)return i18n("icu:GroupV2--summary");throw(0,missingCaseError.b)(detail)}var ModalState,Modal=__webpack_require__("./ts/components/Modal.tsx"),ConfirmationDialog=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function GroupV2Change_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return GroupV2Change_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GroupV2Change_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GroupV2Change_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function renderStringToIntl(id,i18n,components){return(0,jsx_runtime.jsx)(Intl.R,{id,i18n,components})}renderStringToIntl.displayName="renderStringToIntl",function(ModalState){ModalState.None="None",ModalState.ViewingGroupDescription="ViewingGroupDescription",ModalState.ConfirmingblockGroupLinkRequests="ConfirmingblockGroupLinkRequests"}(ModalState||(ModalState={}));var changeToIconMap=new Map([["access-attributes","group-access"],["access-invite-link","group-access"],["access-members","group-access"],["admin-approval-add-one","group-add"],["admin-approval-remove-one","group-decline"],["admin-approval-bounce","group-decline"],["announcements-only","group-access"],["avatar","group-avatar"],["description","group-edit"],["group-link-add","group-access"],["group-link-remove","group-access"],["group-link-reset","group-access"],["member-add","group-add"],["member-add-from-admin-approval","group-approved"],["member-add-from-invite","group-add"],["member-add-from-link","group-add"],["member-privilege","group-access"],["member-remove","group-remove"],["pending-add-many","group-add"],["pending-add-one","group-add"],["pending-remove-many","group-decline"],["pending-remove-one","group-decline"],["title","group-edit"]]);function GroupV2Detail(_ref){var buttonNode,modalNode,areWeAdmin=_ref.areWeAdmin,blockGroupLinkRequests=_ref.blockGroupLinkRequests,conversationId=_ref.conversationId,detail=_ref.detail,isLastText=_ref.isLastText,fromId=_ref.fromId,groupMemberships=_ref.groupMemberships,groupBannedMemberships=_ref.groupBannedMemberships,groupName=_ref.groupName,i18n=_ref.i18n,ourACI=_ref.ourACI,ourPNI=_ref.ourPNI,renderContact=_ref.renderContact,text=_ref.text,icon=function getIcon(detail){var isLastText=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],fromId=arguments.length>2?arguments[2]:void 0,changeType=detail.type,possibleIcon=changeToIconMap.get(changeType),isSameId=fromId===get_default()(detail,"uuid",null);return isSameId&&("member-remove"===changeType&&(possibleIcon="group-leave"),"member-add-from-invite"===changeType&&(possibleIcon="group-approved")),"admin-approval-bounce"===changeType&&isLastText&&(possibleIcon=void 0),"summary"===changeType&&(possibleIcon="group-summary"),possibleIcon||"group"}(detail,isLastText,fromId),_useState2=_slicedToArray((0,react.useState)(ModalState.None),2),modalState=_useState2[0],setModalState=_useState2[1];switch(modalState){case ModalState.None:modalNode=void 0;break;case ModalState.ViewingGroupDescription:if("description"!==detail.type||!detail.description){log.warn("GroupV2Detail: ViewingGroupDescription but missing description or wrong change type"),modalNode=void 0;break}modalNode=(0,jsx_runtime.jsx)(Modal.u_,{modalName:"GroupV2Change.ViewingGroupDescription",hasXButton:!0,i18n,title:groupName,onClose:function(){return setModalState(ModalState.None)},children:(0,jsx_runtime.jsx)(GroupDescriptionText.F,{text:detail.description})});break;case ModalState.ConfirmingblockGroupLinkRequests:if(!isLastText||"admin-approval-bounce"!==detail.type||!detail.uuid){log.warn("GroupV2Detail: ConfirmingblockGroupLinkRequests but missing uuid or wrong change type"),modalNode=void 0;break}modalNode=(0,jsx_runtime.jsx)(ConfirmationDialog.U,{dialogName:"GroupV2Change.confirmBlockLinkRequests",title:i18n("icu:PendingRequests--block--title"),actions:[{action:function(){return blockGroupLinkRequests(conversationId,detail.uuid)},text:i18n("icu:PendingRequests--block--confirm"),style:"affirmative"}],i18n,onClose:function(){return setModalState(ModalState.None)},children:(0,jsx_runtime.jsx)(Intl.R,{id:"icu:PendingRequests--block--contents",i18n,components:{name:renderContact(detail.uuid)}})});break;default:var state=modalState;log.warn(`GroupV2Detail: unexpected modal state ${state}`),modalNode=void 0}return"description"===detail.type&&detail.description?buttonNode=(0,jsx_runtime.jsx)(Button.zx,{onClick:function(){return setModalState(ModalState.ViewingGroupDescription)},size:Button.qE.Small,variant:Button.Wu.SystemMessage,children:i18n("icu:view")}):!(isLastText&&"admin-approval-bounce"===detail.type&&areWeAdmin&&detail.uuid&&detail.uuid!==ourACI&&detail.uuid!==ourPNI)||fromId&&fromId!==detail.uuid||null!=groupMemberships&&groupMemberships.some((function(item){return item.uuid===detail.uuid}))||null!=groupBannedMemberships&&groupBannedMemberships.some((function(uuid){return uuid===detail.uuid}))||(buttonNode=(0,jsx_runtime.jsx)(Button.zx,{onClick:function(){return setModalState(ModalState.ConfirmingblockGroupLinkRequests)},size:Button.qE.Small,variant:Button.Wu.SystemMessage,children:i18n("icu:PendingRequests--block--button")})),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SystemMessage.j,{icon,contents:text,button:buttonNode}),modalNode]})}function GroupV2Change(props){var areWeAdmin=props.areWeAdmin,blockGroupLinkRequests=props.blockGroupLinkRequests,change=props.change,conversationId=props.conversationId,groupBannedMemberships=props.groupBannedMemberships,groupMemberships=props.groupMemberships,groupName=props.groupName,i18n=props.i18n,ourACI=props.ourACI,ourPNI=props.ourPNI,renderContact=props.renderContact;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:renderChange(change,{i18n,ourACI,ourPNI,renderContact,renderString:renderStringToIntl}).map((function(_ref2,index){var detail=_ref2.detail,isLastText=_ref2.isLastText,text=_ref2.text;return(0,jsx_runtime.jsx)(GroupV2Detail,{areWeAdmin,blockGroupLinkRequests,conversationId,detail,isLastText,fromId:change.from,groupBannedMemberships,groupMemberships,groupName,i18n,ourACI,ourPNI,renderContact,text},index)}))})}},"./ts/components/conversation/Linkify.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N1:()=>linkify,v2:()=>SUPPORTED_PROTOCOLS,zR:()=>Linkify});__webpack_require__("./node_modules/react/index.js");var linkify_it__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/linkify-it/index.js"),linkify_it__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_1__),_types_LinkPreview__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/LinkPreview.ts"),_util_emoji__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/emoji.ts"),_util_missingCaseError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/util/missingCaseError.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),linkify=linkify_it__WEBPACK_IMPORTED_MODULE_1___default()().tlds(["ac","ad","ae","aero","af","ag","ai","al","am","an","ao","aq","ar","arpa","as","asia","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","biz","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cat","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","com","coop","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","edu","ee","eg","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gov","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","info","int","io","iq","ir","is","it","je","jm","jo","jobs","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mil","mk","ml","mm","mn","mo","mobi","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","name","nc","ne","net","nf","ng","ni","nl","no","np","nr","nu","nz","om","org","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","pro","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sx","sy","sz","tc","td","tel","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","travel","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","中国","中國","ලංකා","香港","台湾","台灣","امارات","الاردن","السعودية","ไทย","рф","تونس","مصر","قطر","இலங்கை","فلسطين","ye","yt","za","zm","zw"]),SUPPORTED_PROTOCOLS=/^(http|https):/i,defaultRenderNonLink=function(_ref){return _ref.text};function Linkify(props){var text=props.text,_props$renderNonLink=props.renderNonLink,renderNonLink=void 0===_props$renderNonLink?defaultRenderNonLink:_props$renderNonLink;if(!(0,_types_LinkPreview__WEBPACK_IMPORTED_MODULE_2__.vl)(text))return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:renderNonLink({text,key:1})});var chunkData=(0,_util_emoji__WEBPACK_IMPORTED_MODULE_3__.b)(text).map((function(_ref2){var type=_ref2.type,chunk=_ref2.value;if("text"===type)return{chunk,matchData:linkify.match(chunk)||[]};if("emoji"===type)return{chunk,matchData:[]};throw(0,_util_missingCaseError__WEBPACK_IMPORTED_MODULE_5__.b)(type)})),results=[],count=1;return chunkData.forEach((function(_ref3){var chunk=_ref3.chunk,matchData=_ref3.matchData;if(0===matchData.length)return count+=1,void results.push(renderNonLink({text:chunk,key:count}));var chunkLastIndex=0;matchData.forEach((function(match){if(chunkLastIndex<match.index){var textWithNoLink=chunk.slice(chunkLastIndex,match.index);count+=1,results.push(renderNonLink({text:textWithNoLink,key:count}))}var url=match.url,originalText=match.text;count+=1,SUPPORTED_PROTOCOLS.test(url)&&!(0,_types_LinkPreview__WEBPACK_IMPORTED_MODULE_2__.kz)(url)?results.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("a",{href:url,children:originalText},count)):results.push(renderNonLink({text:originalText,key:count})),chunkLastIndex=match.lastIndex})),chunkLastIndex<chunk.length&&(count+=1,results.push(renderNonLink({text:chunk.slice(chunkLastIndex),key:count})))})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.Fragment,{children:results})}},"./ts/components/conversation/SystemMessage.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>SystemMessageKind,j:()=>SystemMessage});var SystemMessageKind,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");!function(SystemMessageKind){SystemMessageKind.Normal="Normal",SystemMessageKind.Danger="Danger",SystemMessageKind.Error="Error"}(SystemMessageKind||(SystemMessageKind={}));var SystemMessage=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function SystemMessageInner(_ref,ref){var icon=_ref.icon,contents=_ref.contents,button=_ref.button,_ref$kind=_ref.kind,kind=void 0===_ref$kind?SystemMessageKind.Normal:_ref$kind;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("SystemMessage",kind===SystemMessageKind.Danger&&"SystemMessage--danger",kind===SystemMessageKind.Error&&"SystemMessage--error"),ref,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("SystemMessage__contents",`SystemMessage__contents--icon-${icon}`),children:contents}),button&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("div",{className:"SystemMessage__button-container",children:button})]})}))},"./ts/types/LinkPreview.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Df:()=>isStickerPack,Hz:()=>isGroupLink,ge:()=>getDomain,go:()=>shouldPreviewHref,hH:()=>LinkPreviewSourceType,kz:()=>isLinkSneaky,rq:()=>findLinks,vl:()=>shouldLinkifyMessage});var LinkPreviewSourceType,lodash_range__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/range.js"),lodash_range__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_0__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/isEmpty.js"),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__),lodash_compact__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/compact.js"),lodash_compact__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_compact__WEBPACK_IMPORTED_MODULE_2__),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/isNumber.js"),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__),url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/url/url.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/linkify-it/index.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_5__),_util_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/url.ts"),_util_emoji__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/util/emoji.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(LinkPreviewSourceType){LinkPreviewSourceType[LinkPreviewSourceType.Composer=0]="Composer",LinkPreviewSourceType[LinkPreviewSourceType.ForwardMessageModal=1]="ForwardMessageModal",LinkPreviewSourceType[LinkPreviewSourceType.StoryCreator=2]="StoryCreator"}(LinkPreviewSourceType||(LinkPreviewSourceType={}));var linkify=linkify_it__WEBPACK_IMPORTED_MODULE_5___default()();function shouldPreviewHref(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);return Boolean(url&&"https:"===url.protocol&&!function isDomainExcluded(url){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(EXCLUDED_DOMAINS);try{for(_iterator.s();!(_step=_iterator.n()).done;){var excludedDomain=_step.value;if(url.hostname.endsWith(`.${excludedDomain}`)||url.hostname===excludedDomain)return!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1}(url)&&!isLinkSneaky(href))}var EXCLUDED_DOMAINS=["debuglogs.org","example","example.com","example.net","example.org","invalid","localhost","onion","test"];var DIRECTIONAL_OVERRIDES=/[\u202c\u202d\u202e]/,UNICODE_DRAWING=/[\u2500-\u25FF]/;function shouldLinkifyMessage(message){return!message||!DIRECTIONAL_OVERRIDES.test(message)&&!UNICODE_DRAWING.test(message)}function isStickerPack(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.art/addstickers/")}function isGroupLink(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.group/")}function findLinks(text,caretLocation){if(!shouldLinkifyMessage(text))return[];var haveCaretLocation=lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default()(caretLocation),textLength=text?text.length:0,matches=linkify.match(text?(0,_util_emoji__WEBPACK_IMPORTED_MODULE_6__.s)(text):"")||[];return lodash_compact__WEBPACK_IMPORTED_MODULE_2___default()(matches.map((function(match){return haveCaretLocation?void 0===caretLocation?null:match.lastIndex===textLength&&caretLocation===textLength||match.index>caretLocation||match.lastIndex<caretLocation?match.text:null:match.text})))}function getDomain(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url||!url.hostname)throw new Error("getDomain: Unable to extract hostname from href");return url.hostname}var VALID_URI_CHARACTERS=new Set(["%",":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","="].concat(_toConsumableArray(String.fromCharCode.apply(String,_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(65,91)).concat(_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(97,123))))),_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(10).map(String)),["-",".","_","~"])),ASCII_PATTERN=/[\u0020-\u007F]/g;function isLinkSneaky(href){if(href.length>4096)return!0;var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url)return!0;if(url.username||url.password)return!0;if(!url.hostname)return!0;if(url.hostname.length>2048)return!0;if(url.hostname.includes("%"))return!0;var labels=url.hostname.split(".");if(labels.length<2||labels.some(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default()))return!0;var withoutPeriods=(url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode?url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode(url.hostname):url.hostname).replace(/\./g,""),hasASCII=ASCII_PATTERN.test(withoutPeriods),withoutASCII=withoutPeriods.replace(ASCII_PATTERN,"");if(hasASCII&&withoutASCII.length>0)return!0;var startOfPathAndHash=href.indexOf("/",url.protocol.length+4);return _toConsumableArray(-1===startOfPathAndHash?"":href.substr(startOfPathAndHash)).some((function(character){return!VALID_URI_CHARACTERS.has(character)}))}},"./ts/types/UUID.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{TP:()=>isValidUuid,hb:()=>UUID});var UUIDKind,uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid-browser/index.js"),_util_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/util/assert.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}!function(UUIDKind){UUIDKind.ACI="ACI",UUIDKind.PNI="PNI",UUIDKind.Unknown="Unknown"}(UUIDKind||(UUIDKind={}));var UUID_REGEXP=/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,isValidUuid=function(value){return"string"==typeof value&&("00000000-0000-0000-0000-000000000000"===value||UUID_REGEXP.test(value))},UUID=function(){function UUID(value){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UUID),this.value=value,(0,_util_assert__WEBPACK_IMPORTED_MODULE_1__.Yj)(isValidUuid(value),`Invalid UUID: ${value}`)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(UUID,[{key:"toString",value:function toString(){return this.value}},{key:"isEqual",value:function isEqual(other){return this.value===other.value}}],[{key:"parse",value:function parse(value){return new UUID(value)}},{key:"lookup",value:function lookup(identifier){var conversation=window.ConversationController.get(identifier),uuid=null==conversation?void 0:conversation.get("uuid");if(void 0!==uuid)return new UUID(uuid)}},{key:"checkedLookup",value:function checkedLookup(identifier){var uuid=UUID.lookup(identifier);return(0,_util_assert__WEBPACK_IMPORTED_MODULE_1__.Yj)(void 0!==uuid,`Conversation ${identifier} not found or has no uuid`),uuid}},{key:"generate",value:function generate(){return new UUID((0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)())}},{key:"cast",value:function cast(value){return new UUID(value.toLowerCase()).toString()}},{key:"fromPrefix",value:function fromPrefix(value){for(var padded=value;padded.length<8;)padded+="0";return new UUID(`${padded}-0000-4000-8000-${"0".repeat(12)}`)}}]),UUID}()},"./ts/util/url.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function maybeParseUrl(value){if("string"==typeof value)try{return new URL(value)}catch(err){}}__webpack_require__.d(__webpack_exports__,{FS:()=>maybeParseUrl})},"./node_modules/lodash/first.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/lodash/head.js")},"./node_modules/lodash/head.js":module=>{module.exports=function head(array){return array&&array.length?array[0]:void 0}},"./node_modules/lodash/last.js":module=>{module.exports=function last(array){var length=null==array?0:array.length;return length?array[length-1]:void 0}},"./node_modules/uuid-browser/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{var v1=__webpack_require__("./node_modules/uuid-browser/v1.js"),v4=__webpack_require__("./node_modules/uuid-browser/v4.js"),uuid=v4;uuid.v1=v1,uuid.v4=v4,module.exports=uuid},"./node_modules/uuid-browser/v1.js":(module,__unused_webpack_exports,__webpack_require__)=>{var rng=__webpack_require__("./node_modules/uuid-browser/lib/rng-browser.js"),bytesToUuid=__webpack_require__("./node_modules/uuid-browser/lib/bytesToUuid.js"),_seedBytes=rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0;module.exports=function v1(options,buf,offset){var i=buf&&offset||0,b=buf||[],clockseq=void 0!==(options=options||{}).clockseq?options.clockseq:_clockseq,msecs=void 0!==options.msecs?options.msecs:(new Date).getTime(),nsecs=void 0!==options.nsecs?options.nsecs:_lastNSecs+1,dt=msecs-_lastMSecs+(nsecs-_lastNSecs)/1e4;if(dt<0&&void 0===options.clockseq&&(clockseq=clockseq+1&16383),(dt<0||msecs>_lastMSecs)&&void 0===options.nsecs&&(nsecs=0),nsecs>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=msecs,_lastNSecs=nsecs,_clockseq=clockseq;var tl=(1e4*(268435455&(msecs+=122192928e5))+nsecs)%4294967296;b[i++]=tl>>>24&255,b[i++]=tl>>>16&255,b[i++]=tl>>>8&255,b[i++]=255&tl;var tmh=msecs/4294967296*1e4&268435455;b[i++]=tmh>>>8&255,b[i++]=255&tmh,b[i++]=tmh>>>24&15|16,b[i++]=tmh>>>16&255,b[i++]=clockseq>>>8|128,b[i++]=255&clockseq;for(var node=options.node||_nodeId,n=0;n<6;++n)b[i+n]=node[n];return buf||bytesToUuid(b)}}}]);