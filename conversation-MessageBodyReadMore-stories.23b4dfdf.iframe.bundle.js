/*! For license information please see conversation-MessageBodyReadMore-stories.23b4dfdf.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[2697,3905],{"./ts/components/UserText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>UserText});__webpack_require__("./node_modules/react/index.js");var _conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UserText(_ref){var text=_ref.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{dir:"auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__.u,{text})})}UserText.displayName="UserText"},"./ts/components/conversation/MessageBody.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{D:()=>MessageBody});__webpack_require__("./node_modules/react/index.js");var _types_Attachment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Attachment.ts"),_emoji_lib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/emoji/lib.ts"),_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/conversation/MessageTextRenderer.tsx"),_UserText__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/UserText.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js");function MessageBody(_ref){var pendingContent,author=_ref.author,bodyRanges=_ref.bodyRanges,direction=_ref.direction,disableJumbomoji=_ref.disableJumbomoji,disableLinks=_ref.disableLinks,i18n=_ref.i18n,isSpoilerExpanded=_ref.isSpoilerExpanded,kickOffBodyDownload=_ref.kickOffBodyDownload,onExpandSpoiler=_ref.onExpandSpoiler,onIncreaseTextLength=_ref.onIncreaseTextLength,prefix=_ref.prefix,renderLocation=_ref.renderLocation,showConversation=_ref.showConversation,text=_ref.text,textAttachment=_ref.textAttachment,hasReadMore=Boolean(onIncreaseTextLength),textWithSuffix=null!=textAttachment&&textAttachment.pending||hasReadMore?`${text}...`:text,sizeClass=disableJumbomoji?void 0:(0,_emoji_lib__WEBPACK_IMPORTED_MODULE_2__.Eb)(text);return hasReadMore?pendingContent=null:null!=textAttachment&&textAttachment.pending?pendingContent=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("span",{className:"MessageBody__highlight",children:[" ",i18n("icu:downloading")]}):textAttachment&&(0,_types_Attachment__WEBPACK_IMPORTED_MODULE_1__.u3)(textAttachment)&&kickOffBodyDownload&&(pendingContent=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("span",{children:[" ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("button",{className:"MessageBody__download-body",onClick:function(){kickOffBodyDownload()},onKeyDown:function(ev){"Space"!==ev.key&&"Enter"!==ev.key||kickOffBodyDownload()},tabIndex:0,type:"button",children:i18n("icu:downloadFullMessage")})]})),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("span",{children:[author&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"MessageBody__author",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_UserText__WEBPACK_IMPORTED_MODULE_4__.a,{text:author})}),":"," "]}),prefix&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("span",{className:"MessageBody__prefix",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_UserText__WEBPACK_IMPORTED_MODULE_4__.a,{text:prefix})})," "]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_3__.mI,{bodyRanges:null!=bodyRanges?bodyRanges:[],direction,disableLinks:null!=disableLinks&&disableLinks,emojiSizeClass:sizeClass,i18n,isSpoilerExpanded,messageText:textWithSuffix,onMentionTrigger:function(conversationId){return null==showConversation?void 0:showConversation({conversationId})},onExpandSpoiler,renderLocation,textLength:text.length}),pendingContent,onIncreaseTextLength?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("button",{className:"MessageBody__read-more",onClick:function(){onIncreaseTextLength()},onKeyDown:function(ev){"Space"!==ev.key&&"Enter"!==ev.key||onIncreaseTextLength()},tabIndex:0,type:"button",children:[" ",i18n("icu:MessageBody--read-more")]}):null]})}MessageBody.displayName="MessageBody"},"./ts/components/conversation/MessageBodyReadMore.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ExcessiveAmountsOfCake:()=>ExcessiveAmountsOfCake,LeafyNotBuffered:()=>LeafyNotBuffered,Links:()=>Links,LongText:()=>LongText,LongText100More:()=>LongText100More,LongTextMostlySpoiler:()=>LongTextMostlySpoiler,LongTextWithFormatting:()=>LongTextWithFormatting,LongTextWithMention:()=>LongTextWithMention,LotsOfCakeWithSomeCherriesOnTop:()=>LotsOfCakeWithSomeCherriesOnTop,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/esm/index.js"),_MessageBodyReadMore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/conversation/MessageBodyReadMore.tsx"),_util_setupI18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/setupI18n.ts"),_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./_locales/en/messages.json"),_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/types/BodyRange.ts"),_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/conversation/MessageTextRenderer.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var i18n=(0,_util_setupI18n__WEBPACK_IMPORTED_MODULE_3__.E5)("en",_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__);const __WEBPACK_DEFAULT_EXPORT__={title:"Components/Conversation/MessageBodyReadMore"};function MessageBodyReadMoreTest(_ref){var bodyRanges=_ref.bodyRanges,isSpoilerExpanded=_ref.isSpoilerExpanded,onExpandSpoiler=_ref.onExpandSpoiler,messageBodyText=_ref.text,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),2),displayLimit=_useState2[0],setDisplayLimit=_useState2[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_MessageBodyReadMore__WEBPACK_IMPORTED_MODULE_2__.M,Object.assign({},function(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{bodyRanges:overrideProps.bodyRanges,direction:"incoming",displayLimit:overrideProps.displayLimit,i18n,id:"some-id",isSpoilerExpanded:!0===overrideProps.isSpoilerExpanded,messageExpanded:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_1__.action)("messageExpanded"),onExpandSpoiler:overrideProps.onExpandSpoiler||(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_1__.action)("onExpandSpoiler"),renderLocation:_MessageTextRenderer__WEBPACK_IMPORTED_MODULE_6__.G5.Timeline,text:overrideProps.text||""}}({bodyRanges,isSpoilerExpanded,onExpandSpoiler,text:messageBodyText}),{displayLimit,messageExpanded:function(_,newDisplayLimit){return setDisplayLimit(newDisplayLimit)}}))}function LongText100More(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:`${"test ".repeat(160)}${"extra ".repeat(10)}`})}function LotsOfCakeWithSomeCherriesOnTop(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:`x${"ðŸ°".repeat(399)}${"ðŸ’".repeat(100)}`})}function LeafyNotBuffered(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:`x${"ðŸŒ¿".repeat(450)}`})}function LongTextWithMention(){var text=`${"x ".repeat(400)}ï¿¼ woo!${"y ".repeat(100)}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{bodyRanges:[{start:800,length:1,mentionUuid:"abc",conversationID:"x",replacementText:"Alice"}],text})}function LongTextWithFormatting(){var bodyRanges=[{start:0,length:5,style:_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__.OY.Style.ITALIC},{start:7,length:3,style:_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__.OY.Style.BOLD},{start:1019,length:4,style:_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__.OY.Style.BOLD},{start:1024,length:6,style:_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__.OY.Style.ITALIC}],text=`ready? set... g${"o".repeat(1e3)}al! bold italic`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{bodyRanges,text})}function LongTextMostlySpoiler(){var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_0__.useState(!1),2),isSpoilerExpanded=_React$useState2[0],setIsSpoilerExpanded=_React$useState2[1],bodyRanges=[{start:7,length:1010,style:_types_BodyRange__WEBPACK_IMPORTED_MODULE_5__.OY.Style.SPOILER}],text=`ready? set... g${"o".repeat(1e3)}al! bold italic`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{bodyRanges,text,isSpoilerExpanded,onExpandSpoiler:function(){return setIsSpoilerExpanded(!0)}})}function Links(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:`${"test ".repeat(176)}https://www.signal.org`})}function ExcessiveAmountsOfCake(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:`x${"ðŸ°".repeat(2e4)}`})}function LongText(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(MessageBodyReadMoreTest,{text:"\n      SCENE I. Rome. A street.\n      Enter FLAVIUS, MARULLUS, and certain Commoners\n      FLAVIUS\n      Hence! home, you idle creatures get you home:\n      Is this a holiday? what! know you not,\n      Being mechanical, you ought not walk\n      Upon a labouring day without the sign\n      Of your profession? Speak, what trade art thou?\n      First Commoner\n      Why, sir, a carpenter.\n      MARULLUS\n      Where is thy leather apron and thy rule?\n      What dost thou with thy best apparel on?\n      You, sir, what trade are you?\n      Second Commoner\n      Truly, sir, in respect of a fine workman, I am but,\n      as you would say, a cobbler.\n      MARULLUS\n      But what trade art thou? answer me directly.\n      Second Commoner\n      A trade, sir, that, I hope, I may use with a safe\n      conscience; which is, indeed, sir, a mender of bad soles.\n      MARULLUS\n      What trade, thou knave? thou naughty knave, what trade?\n      Second Commoner\n      Nay, I beseech you, sir, be not out with me: yet,\n      if you be out, sir, I can mend you.\n      MARULLUS\n      What meanest thou by that? mend me, thou saucy fellow!\n      Second Commoner\n      Why, sir, cobble you.\n      FLAVIUS\n      Thou art a cobbler, art thou?\n      Second Commoner\n      Truly, sir, all that I live by is with the awl: I\n      meddle with no tradesman's matters, nor women's\n      matters, but with awl. I am, indeed, sir, a surgeon\n      to old shoes; when they are in great danger, I\n      recover them. As proper men as ever trod upon\n      neat's leather have gone upon my handiwork.\n      FLAVIUS\n      But wherefore art not in thy shop today?\n      Why dost thou lead these men about the streets?\n      Second Commoner\n      Truly, sir, to wear out their shoes, to get myself\n      into more work. But, indeed, sir, we make holiday,\n      to see Caesar and to rejoice in his triumph.\n      MARULLUS\n      Wherefore rejoice? What conquest brings he home?\n      What tributaries follow him to Rome,\n      To grace in captive bonds his chariot-wheels?\n      You blocks, you stones, you worse than senseless things!\n      O you hard hearts, you cruel men of Rome,\n      Knew you not Pompey? Many a time and oft\n      Have you climb'd up to walls and battlements,\n      To towers and windows, yea, to chimney-tops,\n      Your infants in your arms, and there have sat\n      The livelong day, with patient expectation,\n      To see great Pompey pass the streets of Rome:\n      And when you saw his chariot but appear,\n      Have you not made an universal shout,\n      That Tiber trembled underneath her banks,\n      To hear the replication of your sounds\n      Made in her concave shores?\n      And do you now put on your best attire?\n      And do you now cull out a holiday?\n      And do you now strew flowers in his way\n      That comes in triumph over Pompey's blood? Be gone!\n      Run to your houses, fall upon your knees,\n      Pray to the gods to intermit the plague\n      That needs must light on this ingratitude.\n      FLAVIUS\n      Go, go, good countrymen, and, for this fault,\n      Assemble all the poor men of your sort;\n      Draw them to Tiber banks, and weep your tears\n      Into the channel, till the lowest stream\n      Do kiss the most exalted shores of all.\n      Exeunt all the Commoners\n      See whether their basest metal be not moved;\n      They vanish tongue-tied in their guiltiness.\n      Go you down that way towards the Capitol;\n      This way will I\n      disrobe the images,\n      If you do find them deck'd with ceremonies.\n      MARULLUS\n      May we do so?\n      You know it is the feast of Lupercal.\n      FLAVIUS\n      It is no matter; let no images\n      Be hung with Caesar's trophies. I'll about,\n      And drive away the vulgar from the streets:\n      So do you too, where you perceive them thick.\n      These growing feathers pluck'd from Caesar's wing\n      Will make him fly an ordinary pitch,\n      Who else would soar above the view of men\n      And keep us all in servile fearfulness.\n      "})}MessageBodyReadMoreTest.displayName="MessageBodyReadMoreTest",LongText100More.displayName="LongText100More",LongText100More.story={name:"Long text + 100 more"},LotsOfCakeWithSomeCherriesOnTop.displayName="LotsOfCakeWithSomeCherriesOnTop",LotsOfCakeWithSomeCherriesOnTop.story={name:"Lots of cake with some cherries on top"},LeafyNotBuffered.displayName="LeafyNotBuffered",LongTextWithMention.displayName="LongTextWithMention",LongTextWithFormatting.displayName="LongTextWithFormatting",LongTextMostlySpoiler.displayName="LongTextMostlySpoiler",LeafyNotBuffered.story={name:"Leafy not buffered"},Links.displayName="Links",ExcessiveAmountsOfCake.displayName="ExcessiveAmountsOfCake",ExcessiveAmountsOfCake.story={name:"Excessive amounts of cake"},LongText.displayName="LongText",LongText.story={name:"Long text"};var __namedExportsOrder=["LongText100More","LotsOfCakeWithSomeCherriesOnTop","LeafyNotBuffered","LongTextWithMention","LongTextWithFormatting","LongTextMostlySpoiler","Links","ExcessiveAmountsOfCake","LongText"]},"./ts/components/conversation/MessageBodyReadMore.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>MessageBodyReadMore,_:()=>doesMessageBodyOverflow});__webpack_require__("./node_modules/react/index.js");var _MessageBody__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/MessageBody.tsx"),_util_graphemeAndLinkAwareSlice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/graphemeAndLinkAwareSlice.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function doesMessageBodyOverflow(str){return str.length>900}function MessageBodyReadMore(_ref){var bodyRanges=_ref.bodyRanges,direction=_ref.direction,disableLinks=_ref.disableLinks,displayLimit=_ref.displayLimit,i18n=_ref.i18n,id=_ref.id,isSpoilerExpanded=_ref.isSpoilerExpanded,kickOffBodyDownload=_ref.kickOffBodyDownload,messageExpanded=_ref.messageExpanded,onExpandSpoiler=_ref.onExpandSpoiler,renderLocation=_ref.renderLocation,showConversation=_ref.showConversation,text=_ref.text,textAttachment=_ref.textAttachment,maxLength=displayLimit||800,_graphemeAndLinkAware=(0,_util_graphemeAndLinkAwareSlice__WEBPACK_IMPORTED_MODULE_2__.r)(text,maxLength,100),hasReadMore=_graphemeAndLinkAware.hasReadMore,slicedText=_graphemeAndLinkAware.text,onIncreaseTextLength=hasReadMore?function(){messageExpanded(id,maxLength+3e3)}:void 0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_MessageBody__WEBPACK_IMPORTED_MODULE_1__.D,{bodyRanges,direction,disableLinks,i18n,isSpoilerExpanded,kickOffBodyDownload,onExpandSpoiler,onIncreaseTextLength,renderLocation,showConversation,text:slicedText,textAttachment})}MessageBodyReadMore.displayName="MessageBodyReadMore"},"./ts/util/graphemeAndLinkAwareSlice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>graphemeAndLinkAwareSlice});var linkify_it__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/linkify-it/index.js"),linkify_it__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_0__);function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function graphemeAndLinkAwareSlice(str,length){var text,buffer=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;if(str.length<=length+buffer)return{text:str,hasReadMore:!1};var _step,_iterator=_createForOfIteratorHelper((new Intl.Segmenter).segment(str));try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref=_step.value,index=_ref.index;if(!text&&index>=length&&(text=str.slice(0,index)),text&&index>length)return{text:text=expandToIncludeEntireLink(str,text),hasReadMore:text.length<str.length}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{text:str,hasReadMore:!1}}var expandToIncludeEntireLink=function(original,truncated){var linksInText=(new(linkify_it__WEBPACK_IMPORTED_MODULE_0___default())).match(original);if(!linksInText)return truncated;var truncatedLink=linksInText.map((function(_ref2){return{startIndex:_ref2.index,lastIndex:_ref2.lastIndex}})).filter((function(_ref3){var startIndex=_ref3.startIndex,lastIndex=_ref3.lastIndex;return startIndex<truncated.length&&lastIndex>truncated.length}));return 0===truncatedLink.length?truncated:original.slice(0,truncatedLink[0].lastIndex)}},"./node_modules/classnames/index.js":(module,exports)=>{var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var hasOwn={}.hasOwnProperty;function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}module.exports?module.exports=classNames:void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,[]))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()},"./node_modules/lodash/_asciiSize.js":(module,__unused_webpack_exports,__webpack_require__)=>{var asciiSize=__webpack_require__("./node_modules/lodash/_baseProperty.js")("length");module.exports=asciiSize},"./node_modules/lodash/_baseRepeat.js":module=>{var nativeFloor=Math.floor;module.exports=function baseRepeat(string,n){var result="";if(!string||n<1||n>9007199254740991)return result;do{n%2&&(result+=string),(n=nativeFloor(n/2))&&(string+=string)}while(n);return result}},"./node_modules/lodash/_createPadding.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseRepeat=__webpack_require__("./node_modules/lodash/_baseRepeat.js"),baseToString=__webpack_require__("./node_modules/lodash/_baseToString.js"),castSlice=__webpack_require__("./node_modules/lodash/_castSlice.js"),hasUnicode=__webpack_require__("./node_modules/lodash/_hasUnicode.js"),stringSize=__webpack_require__("./node_modules/lodash/_stringSize.js"),stringToArray=__webpack_require__("./node_modules/lodash/_stringToArray.js"),nativeCeil=Math.ceil;module.exports=function createPadding(length,chars){var charsLength=(chars=void 0===chars?" ":baseToString(chars)).length;if(charsLength<2)return charsLength?baseRepeat(chars,length):chars;var result=baseRepeat(chars,nativeCeil(length/stringSize(chars)));return hasUnicode(chars)?castSlice(stringToArray(result),0,length).join(""):result.slice(0,length)}},"./node_modules/lodash/_stringSize.js":(module,__unused_webpack_exports,__webpack_require__)=>{var asciiSize=__webpack_require__("./node_modules/lodash/_asciiSize.js"),hasUnicode=__webpack_require__("./node_modules/lodash/_hasUnicode.js"),unicodeSize=__webpack_require__("./node_modules/lodash/_unicodeSize.js");module.exports=function stringSize(string){return hasUnicode(string)?unicodeSize(string):asciiSize(string)}},"./node_modules/lodash/_unicodeSize.js":module=>{var rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",reOptMod="(?:"+rsCombo+"|"+rsFitz+")"+"?",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+("(?:\\u200d(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*"),rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");module.exports=function unicodeSize(string){for(var result=reUnicode.lastIndex=0;reUnicode.test(string);)++result;return result}},"./node_modules/lodash/escapeRegExp.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toString=__webpack_require__("./node_modules/lodash/toString.js"),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);module.exports=function escapeRegExp(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}},"./node_modules/lodash/isUndefined.js":module=>{module.exports=function isUndefined(value){return void 0===value}},"./node_modules/lodash/padStart.js":(module,__unused_webpack_exports,__webpack_require__)=>{var createPadding=__webpack_require__("./node_modules/lodash/_createPadding.js"),stringSize=__webpack_require__("./node_modules/lodash/_stringSize.js"),toInteger=__webpack_require__("./node_modules/lodash/toInteger.js"),toString=__webpack_require__("./node_modules/lodash/toString.js");module.exports=function padStart(string,length,chars){string=toString(string);var strLength=(length=toInteger(length))?stringSize(string):0;return length&&strLength<length?createPadding(length-strLength,chars)+string:string}}}]);