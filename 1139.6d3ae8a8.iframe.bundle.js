(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[1139],{"./ts/Bytes.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{k:()=>byteLength,mV:()=>concatenate,Gh:()=>fromBase64,H_:()=>fromHex,mL:()=>fromString,s3:()=>toBase64});var buffer=__webpack_require__("./node_modules/buffer/index.js");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var _window$SignalContext,Bytes=function(){function Bytes(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Bytes)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Bytes,[{key:"fromBase64",value:function fromBase64(value){return buffer.lW.from(value,"base64")}},{key:"fromHex",value:function fromHex(value){return buffer.lW.from(value,"hex")}},{key:"fromBinary",value:function fromBinary(value){return buffer.lW.from(value,"binary")}},{key:"fromString",value:function fromString(value){return buffer.lW.from(value)}},{key:"toBase64",value:function toBase64(data){return buffer.lW.from(data).toString("base64")}},{key:"toHex",value:function toHex(data){return buffer.lW.from(data).toString("hex")}},{key:"toBinary",value:function toBinary(data){return buffer.lW.from(data).toString("binary")}},{key:"toString",value:function toString(data){return buffer.lW.from(data).toString()}},{key:"byteLength",value:function byteLength(value){return buffer.lW.byteLength(value)}},{key:"concatenate",value:function concatenate(list){return buffer.lW.concat(list)}},{key:"isEmpty",value:function isEmpty(data){return!data||0===data.length}},{key:"isNotEmpty",value:function isNotEmpty(data){return!this.isEmpty(data)}},{key:"areEqual",value:function areEqual(a,b){return a&&b?0===buffer.lW.compare(a,b):!a&&!b}}]),Bytes}(),bytes=(null===(_window$SignalContext=window.SignalContext)||void 0===_window$SignalContext?void 0:_window$SignalContext.bytes)||new Bytes;function fromBase64(value){return bytes.fromBase64(value)}function fromHex(value){return bytes.fromHex(value)}function fromString(value){return bytes.fromString(value)}function toBase64(data){return bytes.toBase64(data)}function byteLength(value){return bytes.byteLength(value)}function concatenate(list){return bytes.concatenate(list)}},"./ts/components/Checkbox.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>Checkbox});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),uuid__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/uuid-browser/index.js"),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),Checkbox=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function CheckboxInner(_ref,ref){var checked=_ref.checked,children=_ref.children,description=_ref.description,disabled=_ref.disabled,isRadio=_ref.isRadio,label=_ref.label,moduleClassName=_ref.moduleClassName,name=_ref.name,onChange=_ref.onChange,onClick=_ref.onClick,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("Checkbox",moduleClassName),id=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return`${name}::${(0,uuid__WEBPACK_IMPORTED_MODULE_1__.v4)()}`}),[name]),checkboxNode=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:getClassName("__checkbox"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{checked:Boolean(checked),disabled,id,name,onChange:function(ev){return onChange(ev.target.checked)},onClick,ref,type:isRadio?"radio":"checkbox"})}),labelNode=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("label",{htmlFor:id,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:getClassName("__description"),children:description})]})});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:getClassName(""),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:getClassName("__container"),children:children?children({id,checkboxNode,labelNode,checked}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[checkboxNode,labelNode]})})})}))},"./ts/components/ContactPill.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p:()=>ContactPill});__webpack_require__("./node_modules/react/index.js");var _conversation_ContactName__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/ContactName.tsx"),_Avatar__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Avatar.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ContactPill(_ref){var acceptedMessageRequest=_ref.acceptedMessageRequest,avatarPath=_ref.avatarPath,color=_ref.color,firstName=_ref.firstName,i18n=_ref.i18n,isMe=_ref.isMe,id=_ref.id,phoneNumber=_ref.phoneNumber,profileName=_ref.profileName,sharedGroupNames=_ref.sharedGroupNames,title=_ref.title,unblurredAvatarPath=_ref.unblurredAvatarPath,onClickRemove=_ref.onClickRemove,removeLabel=i18n("icu:ContactPill--remove");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"module-ContactPill",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Avatar__WEBPACK_IMPORTED_MODULE_2__.qE,{acceptedMessageRequest,avatarPath,badge:void 0,color,noteToSelf:!1,conversationType:"direct",i18n,isMe,phoneNumber,profileName,title,sharedGroupNames,size:_Avatar__WEBPACK_IMPORTED_MODULE_2__.DZ.TWENTY,unblurredAvatarPath}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_conversation_ContactName__WEBPACK_IMPORTED_MODULE_1__.K,{firstName,module:"module-ContactPill__contact-name",preferFirstName:!0,title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{"aria-label":removeLabel,className:"module-ContactPill__remove",onClick:function(){onClickRemove(id)},title:removeLabel,type:"button"})]})}ContactPill.displayName="ContactPill"},"./ts/components/ContactPills.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>ContactPills});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_hooks_usePrevious__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/hooks/usePrevious.ts"),_util_scrollUtil__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/util/scrollUtil.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function ContactPills(_ref){var moduleClassName=_ref.moduleClassName,children=_ref.children,elRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),childCount=react__WEBPACK_IMPORTED_MODULE_0__.Children.count(children),previousChildCount=(0,_hooks_usePrevious__WEBPACK_IMPORTED_MODULE_2__.D)(0,childCount);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var hasAddedNewChild=childCount>previousChildCount,el=elRef.current;hasAddedNewChild&&el&&(0,_util_scrollUtil__WEBPACK_IMPORTED_MODULE_4__.Og)(el)}),[childCount,previousChildCount]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-ContactPills",moduleClassName),ref:elRef,children})}ContactPills.displayName="ContactPills"},"./ts/components/Input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>Input});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_grapheme__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/grapheme.ts"),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/getClassNamesFor.ts"),_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/hooks/useRefMerger.ts"),_Bytes__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/Bytes.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Input=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function InputInner(_ref,ref){var _ref$countBytes=_ref.countBytes,countBytes=void 0===_ref$countBytes?_Bytes__WEBPACK_IMPORTED_MODULE_5__.k:_ref$countBytes,_ref$countLength=_ref.countLength,countLength=void 0===_ref$countLength?_util_grapheme__WEBPACK_IMPORTED_MODULE_2__.QX:_ref$countLength,disabled=_ref.disabled,disableSpellcheck=_ref.disableSpellcheck,expandable=_ref.expandable,hasClearButton=_ref.hasClearButton,i18n=_ref.i18n,icon=_ref.icon,_ref$maxByteCount=_ref.maxByteCount,maxByteCount=void 0===_ref$maxByteCount?0:_ref$maxByteCount,_ref$maxLengthCount=_ref.maxLengthCount,maxLengthCount=void 0===_ref$maxLengthCount?0:_ref$maxLengthCount,moduleClassName=_ref.moduleClassName,onChange=_ref.onChange,onEnter=_ref.onEnter,placeholder=_ref.placeholder,_ref$value=_ref.value,value=void 0===_ref$value?"":_ref$value,_ref$whenToShowRemain=_ref.whenToShowRemainingCount,whenToShowRemainingCount=void 0===_ref$whenToShowRemain?1/0:_ref$whenToShowRemain,children=_ref.children,innerRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),valueOnKeydownRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value),selectionStartOnKeydownRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(value.length),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),isLarge=_useState2[0],setIsLarge=_useState2[1],refMerger=(0,_hooks_useRefMerger__WEBPACK_IMPORTED_MODULE_4__.T)(),maybeSetLarge=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){if(expandable){var inputEl=innerRef.current;inputEl&&(inputEl.scrollHeight>inputEl.clientHeight||inputEl.scrollWidth>inputEl.clientWidth)&&setIsLarge(!0)}}),[expandable]),handleKeyDown=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){onEnter&&"Enter"===event.key&&onEnter();var inputEl=innerRef.current;inputEl&&(valueOnKeydownRef.current=inputEl.value,selectionStartOnKeydownRef.current=inputEl.selectionStart||0)}),[onEnter]),handleChange=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){var inputEl=innerRef.current;if(inputEl){var newValue=inputEl.value,newLengthCount=maxLengthCount?countLength(newValue):0,newByteCount=maxByteCount?countBytes(newValue):0;newLengthCount<=maxLengthCount&&newByteCount<=maxByteCount?onChange(newValue):(inputEl.value=valueOnKeydownRef.current,inputEl.selectionStart=selectionStartOnKeydownRef.current,inputEl.selectionEnd=selectionStartOnKeydownRef.current),maybeSetLarge()}}),[countLength,countBytes,maxLengthCount,maxByteCount,maybeSetLarge,onChange]),handlePaste=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(event){var inputEl=innerRef.current;if(inputEl&&maxLengthCount&&maxByteCount){var selectionStart=inputEl.selectionStart||0,selectionEnd=inputEl.selectionEnd||inputEl.selectionStart||0,textBeforeSelection=value.slice(0,selectionStart),textAfterSelection=value.slice(selectionEnd),pastedText=event.clipboardData.getData("Text"),newLengthCount=countLength(textBeforeSelection)+countLength(pastedText)+countLength(textAfterSelection),newByteCount=countBytes(textBeforeSelection)+countBytes(pastedText)+countBytes(textAfterSelection);(newLengthCount>maxLengthCount||newByteCount>maxByteCount)&&event.preventDefault(),maybeSetLarge()}}),[countLength,countBytes,maxLengthCount,maxByteCount,maybeSetLarge,value]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){maybeSetLarge()}),[maybeSetLarge]);var lengthCount=maxLengthCount?countLength(value):-1,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_3__.h)("Input",moduleClassName),inputProps={className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__input"),icon&&getClassName("__input--with-icon"),isLarge&&getClassName("__input--large"),expandable&&getClassName("__input--expandable")),disabled:Boolean(disabled),spellCheck:!disableSpellcheck,onChange:handleChange,onKeyDown:handleKeyDown,onPaste:handlePaste,placeholder,ref:refMerger(ref,innerRef),type:"text",value},clearButtonElement=hasClearButton&&value?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{tabIndex:-1,className:getClassName("__clear-icon"),onClick:function(){return onChange("")},type:"button","aria-label":i18n("icu:cancel")}):null,lengthCountElement=lengthCount>=whenToShowRemainingCount&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:getClassName("__remaining-count"),children:maxLengthCount-lengthCount});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__container"),expandable&&getClassName("__container--expandable"),disabled&&getClassName("__container--disabled")),children:[icon?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:getClassName("__icon"),children:icon}):null,expandable?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("textarea",Object.assign({dir:"auto",rows:1},inputProps)):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("input",Object.assign({dir:"auto"},inputProps)),isLarge?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:getClassName("__controls"),children:[clearButtonElement,children]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{className:getClassName("__remaining-count--large"),children:lengthCountElement})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{className:getClassName("__controls"),children:[lengthCountElement,clearButtonElement,children]})]})}))},"./ts/components/SearchInput.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>SearchInput});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SearchInput=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function SearchInputInner(_ref,ref){var children=_ref.children,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$hasSearchIcon=_ref.hasSearchIcon,hasSearchIcon=void 0===_ref$hasSearchIcon||_ref$hasSearchIcon,i18n=_ref.i18n,label=_ref.label,moduleClassName=_ref.moduleClassName,onClear=_ref.onClear,onBlur=_ref.onBlur,onChange=_ref.onChange,onKeyDown=_ref.onKeyDown,placeholder=_ref.placeholder,value=_ref.value,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("module-SearchInput",moduleClassName);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:getClassName("__container"),"data-supertab":!0,children:[hasSearchIcon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("i",{className:getClassName("__icon")}),children,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("input",{"aria-label":label||i18n("icu:search"),className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__input"),value&&getClassName("__input--with-text"),children&&getClassName("__input--with-children")),dir:"auto",disabled,onBlur,onChange,onKeyDown:function(event){var ctrlKey=event.ctrlKey,key=event.key;"linux"===window.platform&&ctrlKey&&"/"===key?(event.preventDefault(),event.stopPropagation()):"Escape"===key&&onClear&&(onClear(),event.preventDefault(),event.stopPropagation()),null==onKeyDown||onKeyDown(event)},placeholder,ref,type:"text",value}),value&&onClear&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{"aria-label":i18n("icu:cancel"),className:getClassName("__cancel"),onClick:onClear,tabIndex:-1,type:"button"})]})}))},"./ts/components/StoriesSettingsModal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{p1:()=>DistributionListSettingsModal,lq:()=>EditDistributionListModal,zQ:()=>EditMyStoryPrivacy,T3:()=>Page,Q$:()=>StoriesSettingsModal,Ac:()=>getI18nForMyStory,O7:()=>getListViewers});var noop=__webpack_require__("./node_modules/lodash/noop.js"),noop_default=__webpack_require__.n(noop),react=__webpack_require__("./node_modules/react/index.js"),index_esm=__webpack_require__("./node_modules/react-measure/dist/index.esm.js"),Avatar=__webpack_require__("./ts/components/Avatar.tsx"),Button=__webpack_require__("./ts/components/Button.tsx"),Checkbox=__webpack_require__("./ts/components/Checkbox.tsx"),ConfirmationDialog=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),ContactPills=__webpack_require__("./ts/components/ContactPills.tsx"),ContactPill=__webpack_require__("./ts/components/ContactPill.tsx"),ConversationList=__webpack_require__("./ts/components/ConversationList.tsx"),Input=__webpack_require__("./ts/components/Input.tsx"),Intl=__webpack_require__("./ts/components/Intl.tsx"),Stories=__webpack_require__("./ts/types/Stories.ts"),Modal=__webpack_require__("./ts/components/Modal.tsx"),SearchInput=__webpack_require__("./ts/components/SearchInput.tsx"),StoryDistributionListName=__webpack_require__("./ts/components/StoryDistributionListName.tsx"),theme=__webpack_require__("./ts/util/theme.ts"),Util=__webpack_require__("./ts/types/Util.ts"),UUID=__webpack_require__("./ts/types/UUID.ts"),filterAndSortConversations=__webpack_require__("./ts/util/filterAndSortConversations.ts"),isNotNil=__webpack_require__("./ts/util/isNotNil.ts"),shouldNeverBeCalled=__webpack_require__("./ts/util/shouldNeverBeCalled.ts"),useConfirmDiscard=__webpack_require__("./ts/hooks/useConfirmDiscard.tsx"),timestamp=__webpack_require__("./ts/util/timestamp.ts"),SIX_HOURS=6*__webpack_require__("./ts/util/durations/index.ts").kr;function isConversationUnregistered(_ref2){var discoveredUnregisteredAt=_ref2.discoveredUnregisteredAt;return Boolean(discoveredUnregisteredAt&&(0,timestamp.N_)(discoveredUnregisteredAt,SIX_HOURS))}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Page,assert=__webpack_require__("./ts/util/assert.ts"),UserText=__webpack_require__("./ts/components/UserText.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function StoriesSettingsModal_toConsumableArray(arr){return function StoriesSettingsModal_arrayWithoutHoles(arr){if(Array.isArray(arr))return StoriesSettingsModal_arrayLikeToArray(arr)}(arr)||function StoriesSettingsModal_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||StoriesSettingsModal_unsupportedIterableToArray(arr)||function StoriesSettingsModal_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||StoriesSettingsModal_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function StoriesSettingsModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return StoriesSettingsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?StoriesSettingsModal_arrayLikeToArray(o,minLen):void 0}}function StoriesSettingsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function filterConversations(conversations,searchTerm){return(0,filterAndSortConversations.x)(conversations,searchTerm,void 0).filter((function(conversation){return conversation.uuid}))}!function(Page){Page.DistributionLists="DistributionLists",Page.AddViewer="AddViewer",Page.ChooseViewers="ChooseViewers",Page.NameStory="NameStory",Page.HideStoryFrom="HideStoryFrom"}(Page||(Page={}));var modalCommonProps={hasXButton:!0,moduleClassName:"StoriesSettingsModal__modal"};function getListViewers(list,i18n,signalConnections){var memberCount=list.members.length;return list.id===Stories.qn&&list.isBlockList&&(memberCount=list.isBlockList?signalConnections.length-list.members.length:signalConnections.length),i18n("icu:StoriesSettings__viewers",{count:memberCount})}function getI18nForMyStory(list,i18n){return 0===list.members.length||list.isBlockList?i18n("icu:StoriesSettings__mine__all--label"):i18n("icu:SendStoryModal__only-share-with")}function DistributionListItem(_ref){var i18n=_ref.i18n,distributionList=_ref.distributionList,me=_ref.me,signalConnections=_ref.signalConnections,onSelectItemToEdit=_ref.onSelectItemToEdit,isMyStory=distributionList.id===Stories.qn;return(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__list",onClick:function(){onSelectItemToEdit(distributionList.id)},type:"button",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[isMyStory?(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:me.acceptedMessageRequest,avatarPath:me.avatarPath,badge:void 0,color:me.color,conversationType:me.type,i18n,isMe:!0,sharedGroupNames:me.sharedGroupNames,size:Avatar.DZ.THIRTY_TWO,title:me.title}):(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__avatar--custom"}),(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__title",children:[(0,jsx_runtime.jsx)(StoryDistributionListName.e,{i18n,id:distributionList.id,name:distributionList.name}),(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__viewers",children:[isMyStory?getI18nForMyStory(distributionList,i18n):i18n("icu:StoriesSettings__custom-story-subtitle")," · ",getListViewers(distributionList,i18n,signalConnections)]})]})]})})}function GroupStoryItem(_ref2){var i18n=_ref2.i18n,groupStory=_ref2.groupStory,onSelectGroupToView=_ref2.onSelectGroupToView;return(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__list",onClick:function(){onSelectGroupToView(groupStory.id)},type:"button",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:groupStory.acceptedMessageRequest,avatarPath:groupStory.avatarPath,badge:void 0,color:groupStory.color,conversationType:groupStory.type,i18n,isMe:!1,sharedGroupNames:[],size:Avatar.DZ.THIRTY_TWO,title:groupStory.title}),(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__title",children:[(0,jsx_runtime.jsx)(UserText.a,{text:groupStory.title}),(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__viewers",children:[i18n("icu:StoriesSettings__group-story-subtitle")," · ",i18n("icu:StoriesSettings__viewers",{count:groupStory.membersCount})]})]})]})})}function StoriesSettingsModal(_ref3){var modal,candidateConversations=_ref3.candidateConversations,distributionLists=_ref3.distributionLists,groupStories=_ref3.groupStories,signalConnections=_ref3.signalConnections,getPreferredBadge=_ref3.getPreferredBadge,hideStoriesSettings=_ref3.hideStoriesSettings,i18n=_ref3.i18n,me=_ref3.me,onDeleteList=_ref3.onDeleteList,toggleGroupsForStorySend=_ref3.toggleGroupsForStorySend,onDistributionListCreated=_ref3.onDistributionListCreated,onHideMyStoriesFrom=_ref3.onHideMyStoriesFrom,onRemoveMembers=_ref3.onRemoveMembers,onRepliesNReactionsChanged=_ref3.onRepliesNReactionsChanged,onViewersUpdated=_ref3.onViewersUpdated,setMyStoriesToAllSignalConnections=_ref3.setMyStoriesToAllSignalConnections,storyViewReceiptsEnabled=_ref3.storyViewReceiptsEnabled,toggleSignalConnectionsModal=_ref3.toggleSignalConnectionsModal,toggleStoriesView=_ref3.toggleStoriesView,setStoriesDisabled=_ref3.setStoriesDisabled,getConversationByUuid=_ref3.getConversationByUuid,_useConfirmDiscard2=_slicedToArray((0,useConfirmDiscard.N)(i18n),2),confirmDiscardModal=_useConfirmDiscard2[0],confirmDiscardIf=_useConfirmDiscard2[1],_useState2=_slicedToArray((0,react.useState)(void 0),2),listToEditId=_useState2[0],setListToEditId=_useState2[1],listToEdit=(0,react.useMemo)((function(){return distributionLists.find((function(x){return x.id===listToEditId}))}),[distributionLists,listToEditId]),_useState4=_slicedToArray((0,react.useState)(null),2),groupToViewId=_useState4[0],setGroupToViewId=_useState4[1],groupToView=(0,react.useMemo)((function(){return groupStories.find((function(group){return group.id===groupToViewId}))}),[groupStories,groupToViewId]),_useState6=_slicedToArray((0,react.useState)(Page.DistributionLists),2),page=_useState6[0],setPage=_useState6[1],_useState8=_slicedToArray((0,react.useState)([]),2),selectedContacts=_useState8[0],setSelectedContacts=_useState8[1],resetChooseViewersScreen=(0,react.useCallback)((function(){setSelectedContacts([]),setPage(Page.DistributionLists)}),[]),_useState10=_slicedToArray((0,react.useState)(),2),confirmDeleteList=_useState10[0],setConfirmDeleteList=_useState10[1],_useState12=_slicedToArray((0,react.useState)(null),2),confirmRemoveGroup=_useState12[0],setConfirmRemoveGroup=_useState12[1];if(page!==Page.DistributionLists){var isChoosingViewers=page===Page.ChooseViewers||page===Page.AddViewer;modal=function(onClose){return(0,jsx_runtime.jsx)(EditDistributionListModal,{candidateConversations,getPreferredBadge,i18n,page,onClose,onCreateList:function(name,uuids){onDistributionListCreated(name,uuids),resetChooseViewersScreen()},onBackButtonClick:function(){return confirmDiscardIf(selectedContacts.length>0,(function(){page===Page.HideStoryFrom?resetChooseViewersScreen():page===Page.NameStory?setPage(Page.ChooseViewers):isChoosingViewers?resetChooseViewersScreen():listToEdit?setListToEditId(void 0):groupToView&&setGroupToViewId(null)}))},onViewersUpdated:function(uuids){listToEditId&&page===Page.AddViewer&&(onViewersUpdated(listToEditId,uuids),resetChooseViewersScreen()),page===Page.ChooseViewers&&setPage(Page.NameStory),page===Page.HideStoryFrom&&(onHideMyStoriesFrom(uuids),resetChooseViewersScreen())},selectedContacts,setSelectedContacts})}}else modal=listToEdit?function(handleClose){return(0,jsx_runtime.jsx)(DistributionListSettingsModal,{getPreferredBadge,i18n,listToEdit,signalConnectionsCount:signalConnections.length,onRemoveMembers,onRepliesNReactionsChanged,setConfirmDeleteList,setMyStoriesToAllSignalConnections,setPage,setSelectedContacts,toggleSignalConnectionsModal,onBackButtonClick:function(){return setListToEditId(void 0)},onClose:handleClose},"settings-modal")}:groupToView?function(onClose){return(0,jsx_runtime.jsx)(GroupStorySettingsModal,{i18n,group:groupToView,onClose,onBackButtonClick:function(){return setGroupToViewId(null)},getConversationByUuid,onRemoveGroup:function(group){setConfirmRemoveGroup({id:group.id,title:group.title})}})}:function(onClose){return(0,jsx_runtime.jsxs)(Modal.P2,Object.assign({modalName:"StoriesSettingsModal__list",i18n,onClose,title:i18n("icu:StoriesSettings__title")},modalCommonProps,{children:[(0,jsx_runtime.jsx)("p",{className:"StoriesSettingsModal__description",children:i18n("icu:StoriesSettings__description")}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__listHeader",children:(0,jsx_runtime.jsx)("h2",{className:"StoriesSettingsModal__listHeader__title",children:i18n("icu:StoriesSettings__my_stories")})}),(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__list",onClick:function(){setPage(Page.ChooseViewers)},type:"button",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__avatar--new"}),(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__title",children:i18n("icu:StoriesSettings__new-list")})]})}),distributionLists.map((function(distributionList){return(0,jsx_runtime.jsx)(DistributionListItem,{i18n,me,distributionList,signalConnections,onSelectItemToEdit:setListToEditId},distributionList.id)})),groupStories.map((function(groupStory){return(0,jsx_runtime.jsx)(GroupStoryItem,{i18n,groupStory,onSelectGroupToView:setGroupToViewId},groupStory.id)})),(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"}),(0,jsx_runtime.jsx)(Checkbox.X,{disabled:!0,checked:storyViewReceiptsEnabled,description:i18n("icu:StoriesSettings__view-receipts--description"),label:i18n("icu:StoriesSettings__view-receipts--label"),moduleClassName:"StoriesSettingsModal__checkbox",name:"view-receipts",onChange:noop_default()}),(0,jsx_runtime.jsxs)("div",{className:"StoriesSettingsModal__stories-off-container",children:[(0,jsx_runtime.jsx)("p",{className:"StoriesSettingsModal__stories-off-text",children:i18n("icu:Stories__settings-toggle--description")}),(0,jsx_runtime.jsx)(Button.zx,{className:"Preferences__stories-off",variant:Button.Wu.SecondaryDestructive,onClick:async function(){setStoriesDisabled(!0),toggleStoriesView(),onClose()},children:i18n("icu:Stories__settings-toggle--button")})]})]}))};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[!confirmDiscardModal&&(0,jsx_runtime.jsx)(Modal.wo,{modalName:"StoriesSettingsModal",moduleClassName:"StoriesSettingsModal",theme:theme.Q.Dark,onClose:function(){return confirmDiscardIf(selectedContacts.length>0,hideStoriesSettings)},children:modal}),confirmDeleteList&&(0,jsx_runtime.jsx)(ConfirmationDialog.U,{dialogName:"StoriesSettings.deleteList",actions:[{action:function(){onDeleteList(confirmDeleteList.id),setListToEditId(void 0)},style:"negative",text:i18n("icu:delete")}],i18n,onClose:function(){setConfirmDeleteList(void 0)},theme:theme.Q.Dark,children:i18n("icu:StoriesSettings__delete-list--confirm",{name:confirmDeleteList.name})}),null!=confirmRemoveGroup&&(0,jsx_runtime.jsx)(ConfirmationDialog.U,{dialogName:"StoriesSettings.removeGroupStory",actions:[{action:function(){toggleGroupsForStorySend([confirmRemoveGroup.id]),setConfirmRemoveGroup(null),setGroupToViewId(null)},style:"negative",text:i18n("icu:delete")}],i18n,onClose:function(){setConfirmRemoveGroup(null)},theme:theme.Q.Dark,children:i18n("icu:StoriesSettings__remove_group--confirm",{groupTitle:confirmRemoveGroup.title})}),confirmDiscardModal]})}function DistributionListSettingsModal(_ref4){var getPreferredBadge=_ref4.getPreferredBadge,i18n=_ref4.i18n,listToEdit=_ref4.listToEdit,onRemoveMembers=_ref4.onRemoveMembers,onRepliesNReactionsChanged=_ref4.onRepliesNReactionsChanged,onBackButtonClick=_ref4.onBackButtonClick,onClose=_ref4.onClose,setConfirmDeleteList=_ref4.setConfirmDeleteList,setMyStoriesToAllSignalConnections=_ref4.setMyStoriesToAllSignalConnections,setPage=_ref4.setPage,setSelectedContacts=_ref4.setSelectedContacts,toggleSignalConnectionsModal=_ref4.toggleSignalConnectionsModal,signalConnectionsCount=_ref4.signalConnectionsCount,_useState14=_slicedToArray((0,react.useState)(),2),confirmRemoveMember=_useState14[0],setConfirmRemoveMember=_useState14[1],isMyStory=listToEdit.id===Stories.qn,modalTitle=(0,Stories.HH)(i18n,listToEdit.id,listToEdit.name);return(0,jsx_runtime.jsxs)(Modal.P2,Object.assign({modalName:"DistributionListSettingsModal",i18n,onBackButtonClick,onClose,title:modalTitle},modalCommonProps,{children:[!isMyStory&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__list StoriesSettingsModal__list--no-pointer",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__avatar--custom"}),(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__title",children:(0,jsx_runtime.jsx)(StoryDistributionListName.e,{i18n,id:listToEdit.id,name:listToEdit.name})})]})}),(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"})]}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__title",children:i18n("icu:StoriesSettings__who-can-see")}),isMyStory&&(0,jsx_runtime.jsx)(EditMyStoryPrivacy,{i18n,kind:"mine",myStories:listToEdit,onClickExclude:function(){setPage(Page.HideStoryFrom)},onClickOnlyShareWith:function(){setPage(Page.AddViewer)},setSelectedContacts,setMyStoriesToAllSignalConnections,toggleSignalConnectionsModal,signalConnectionsCount}),!isMyStory&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__list",onClick:function(){setSelectedContacts(listToEdit.members),setPage(Page.AddViewer)},type:"button",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__avatar--new"}),(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__title",children:i18n("icu:StoriesSettings__add-viewer")})]})}),listToEdit.members.map((function(member){return(0,jsx_runtime.jsxs)("div",{className:"StoriesSettingsModal__list StoriesSettingsModal__list--no-pointer",children:[(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:member.acceptedMessageRequest,avatarPath:member.avatarPath,badge:getPreferredBadge(member.badges),color:member.color,conversationType:member.type,i18n,isMe:!0,sharedGroupNames:member.sharedGroupNames,size:Avatar.DZ.THIRTY_TWO,theme:Util.f8.dark,title:member.title}),(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__title",children:(0,jsx_runtime.jsx)(UserText.a,{text:member.title})})]}),(0,jsx_runtime.jsx)("button",{"aria-label":i18n("icu:StoriesSettings__remove--title",{title:member.title}),className:"StoriesSettingsModal__list__delete",onClick:function(){(0,assert.Yj)(member.uuid,"Story member was missing uuid"),setConfirmRemoveMember({listId:listToEdit.id,title:member.title,uuid:member.uuid})},type:"button"})]},member.id)}))]}),(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__title",children:i18n("icu:StoriesSettings__replies-reactions--title")}),(0,jsx_runtime.jsx)(Checkbox.X,{checked:listToEdit.allowsReplies,description:i18n("icu:StoriesSettings__replies-reactions--description"),label:i18n("icu:StoriesSettings__replies-reactions--label"),moduleClassName:"StoriesSettingsModal__checkbox",name:"replies-reactions",onChange:function(value){return onRepliesNReactionsChanged(listToEdit.id,value)}}),!isMyStory&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"}),(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__delete-list",onClick:function(){return setConfirmDeleteList(listToEdit)},type:"button",children:i18n("icu:StoriesSettings__delete-list")})]}),confirmRemoveMember&&(0,jsx_runtime.jsx)(ConfirmationDialog.U,{dialogName:"StoriesSettings.confirmRemoveMember",actions:[{action:function(){return onRemoveMembers(confirmRemoveMember.listId,[confirmRemoveMember.uuid])},style:"negative",text:i18n("icu:StoriesSettings__remove--action")}],i18n,onClose:function(){setConfirmRemoveMember(void 0)},theme:theme.Q.Dark,title:i18n("icu:StoriesSettings__remove--title",{title:confirmRemoveMember.title}),children:i18n("icu:StoriesSettings__remove--body")})]}))}function CheckboxRender(_ref5){var checkboxNode=_ref5.checkboxNode,labelNode=_ref5.labelNode,descriptionNode=_ref5.descriptionNode;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[checkboxNode,(0,jsx_runtime.jsxs)("div",{className:"StoriesSettingsModal__checkbox-container",children:[(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__checkbox-label",children:labelNode}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__checkbox-description",children:descriptionNode})]})]})}function EditMyStoryPrivacy(_ref6){var hasDisclaimerAbove=_ref6.hasDisclaimerAbove,i18n=_ref6.i18n,kind=_ref6.kind,myStories=_ref6.myStories,onClickExclude=_ref6.onClickExclude,onClickOnlyShareWith=_ref6.onClickOnlyShareWith,setSelectedContacts=_ref6.setSelectedContacts,setMyStoriesToAllSignalConnections=_ref6.setMyStoriesToAllSignalConnections,toggleSignalConnectionsModal=_ref6.toggleSignalConnectionsModal,signalConnectionsCount=_ref6.signalConnectionsCount,learnMoreLink=function(parts){return(0,jsx_runtime.jsx)("button",{className:"StoriesSettingsModal__disclaimer__learn-more",onClick:toggleSignalConnectionsModal,type:"button",children:parts})},disclaimerElement=(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__disclaimer",children:"mine"===kind?(0,jsx_runtime.jsx)(Intl.R,{components:{learnMoreLink},i18n,id:"icu:StoriesSettings__mine__disclaimer--link"}):(0,jsx_runtime.jsx)(Intl.R,{components:{learnMoreLink},i18n,id:"icu:SendStoryModal__privacy-disclaimer--link"})});return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[hasDisclaimerAbove&&disclaimerElement,(0,jsx_runtime.jsx)(Checkbox.X,{checked:myStories.isBlockList&&!myStories.members.length,isRadio:!0,label:i18n("icu:StoriesSettings__mine__all--label"),moduleClassName:"StoriesSettingsModal__checkbox",name:"share",onChange:function(){setMyStoriesToAllSignalConnections()},children:function(_ref7){var checkboxNode=_ref7.checkboxNode,labelNode=_ref7.labelNode,checked=_ref7.checked;return(0,jsx_runtime.jsx)(CheckboxRender,{checkboxNode,labelNode,descriptionNode:checked&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:i18n("icu:StoriesSettings__viewers",{count:signalConnectionsCount})})})}}),(0,jsx_runtime.jsx)(Checkbox.X,{checked:myStories.isBlockList&&myStories.members.length>0,isRadio:!0,label:i18n("icu:StoriesSettings__mine__exclude--label"),moduleClassName:"StoriesSettingsModal__checkbox",name:"share",onChange:noop_default(),onClick:function(){myStories.isBlockList&&setSelectedContacts(myStories.members),onClickExclude()},children:function(_ref8){var checkboxNode=_ref8.checkboxNode,labelNode=_ref8.labelNode,checked=_ref8.checked;return(0,jsx_runtime.jsx)(CheckboxRender,{checkboxNode,labelNode,descriptionNode:checked&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:i18n("icu:StoriesSettings__viewers",{count:myStories.members.length})})})}}),(0,jsx_runtime.jsx)(Checkbox.X,{checked:!myStories.isBlockList&&myStories.members.length>0,isRadio:!0,label:i18n("icu:StoriesSettings__mine__only--label"),moduleClassName:"StoriesSettingsModal__checkbox",name:"share",onChange:noop_default(),onClick:function(){myStories.isBlockList||setSelectedContacts(myStories.members),onClickOnlyShareWith()},children:function(_ref9){var checkboxNode=_ref9.checkboxNode,labelNode=_ref9.labelNode,checked=_ref9.checked;return(0,jsx_runtime.jsx)(CheckboxRender,{checkboxNode,labelNode,descriptionNode:checked&&(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:i18n("icu:StoriesSettings__viewers",{count:myStories.members.length})})})}}),!hasDisclaimerAbove&&disclaimerElement]})}function EditDistributionListModal(_ref10){var candidateConversations=_ref10.candidateConversations,getPreferredBadge=_ref10.getPreferredBadge,i18n=_ref10.i18n,onCreateList=_ref10.onCreateList,onViewersUpdated=_ref10.onViewersUpdated,page=_ref10.page,onClose=_ref10.onClose,selectedContacts=_ref10.selectedContacts,setSelectedContacts=_ref10.setSelectedContacts,onBackButtonClick=_ref10.onBackButtonClick,_useState16=_slicedToArray((0,react.useState)(""),2),storyName=_useState16[0],setStoryName=_useState16[1],_useState18=_slicedToArray((0,react.useState)(""),2),searchTerm=_useState18[0],setSearchTerm=_useState18[1],normalizedSearchTerm=searchTerm.trim(),_useState20=_slicedToArray((0,react.useState)(filterConversations(candidateConversations,normalizedSearchTerm)),2),filteredConversations=_useState20[0],setFilteredConversations=_useState20[1];(0,react.useEffect)((function(){var timeout=setTimeout((function(){setFilteredConversations(filterConversations(candidateConversations,normalizedSearchTerm))}),200);return function(){clearTimeout(timeout)}}),[candidateConversations,normalizedSearchTerm,setFilteredConversations]);var contactLookup=(0,react.useMemo)((function(){var map=new Map;return candidateConversations.forEach((function(contact){map.set(contact.id,contact)})),map}),[candidateConversations]),selectedConversationUuids=(0,react.useMemo)((function(){return new Set(selectedContacts.map((function(contact){return contact.uuid})).filter(isNotNil.D))}),[selectedContacts]),toggleSelectedConversation=(0,react.useCallback)((function(conversationId){var removeContact=!1,nextSelectedContacts=selectedContacts.filter((function(contact){return contact.id!==conversationId||(removeContact=!0,!1)}));if(removeContact)setSelectedContacts(nextSelectedContacts);else{var selectedContact=contactLookup.get(conversationId);selectedContact&&setSelectedContacts([].concat(StoriesSettingsModal_toConsumableArray(nextSelectedContacts),[selectedContact]))}}),[contactLookup,selectedContacts,setSelectedContacts]),isChoosingViewers=page===Page.ChooseViewers||page===Page.AddViewer;if(page===Page.NameStory){var _footer=(0,jsx_runtime.jsx)(Button.zx,{disabled:!storyName,onClick:function(){onCreateList(storyName,Array.from(selectedConversationUuids)),setStoryName("")},variant:Button.Wu.Primary,children:i18n("icu:done")});return(0,jsx_runtime.jsxs)(Modal.P2,Object.assign({modalName:"StoriesSettings__name-story",title:i18n("icu:StoriesSettings__name-story"),modalFooter:_footer,i18n,onBackButtonClick,onClose},modalCommonProps,{children:[(0,jsx_runtime.jsx)(Input.I,{i18n,onChange:setStoryName,placeholder:i18n("icu:StoriesSettings__name-placeholder"),moduleClassName:"StoriesSettingsModal__input",value:storyName}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__visibility",children:i18n("icu:SendStoryModal__new-custom--name-visibility")}),(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__title",children:i18n("icu:StoriesSettings__who-can-see")}),selectedContacts.map((function(contact){return(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__list StoriesSettingsModal__list--no-pointer",children:(0,jsx_runtime.jsxs)("span",{className:"StoriesSettingsModal__list__left",children:[(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:contact.acceptedMessageRequest,avatarPath:contact.avatarPath,badge:getPreferredBadge(contact.badges),color:contact.color,conversationType:contact.type,i18n,isMe:!0,sharedGroupNames:contact.sharedGroupNames,size:Avatar.DZ.THIRTY_TWO,theme:Util.f8.dark,title:contact.title}),(0,jsx_runtime.jsx)("span",{className:"StoriesSettingsModal__list__title",children:(0,jsx_runtime.jsx)(UserText.a,{text:contact.title})})]})},contact.id)}))]}))}var footer,rowCount=filteredConversations.length,getRow=function(index){var contact=filteredConversations[index];if(contact&&contact.uuid){var isSelected=selectedConversationUuids.has(UUID.hb.cast(contact.uuid));return{type:ConversationList.aC.ContactCheckbox,contact,isChecked:isSelected}}};return isChoosingViewers?footer=(0,jsx_runtime.jsx)(Button.zx,{disabled:0===selectedContacts.length,onClick:function(){onViewersUpdated(Array.from(selectedConversationUuids))},variant:Button.Wu.Primary,children:page===Page.AddViewer?i18n("icu:done"):i18n("icu:next2")}):page===Page.HideStoryFrom&&(footer=(0,jsx_runtime.jsx)(Button.zx,{disabled:0===selectedContacts.length,onClick:function(){onViewersUpdated(Array.from(selectedConversationUuids))},variant:Button.Wu.Primary,children:i18n("icu:update")})),(0,jsx_runtime.jsxs)(Modal.P2,Object.assign({modalName:`EditDistributionListModal__${page}`,i18n,modalFooter:footer,onBackButtonClick,onClose,title:page===Page.HideStoryFrom?i18n("icu:StoriesSettings__hide-story"):i18n("icu:StoriesSettings__choose-viewers"),padded:page!==Page.ChooseViewers&&page!==Page.AddViewer},modalCommonProps,{children:[(0,jsx_runtime.jsx)(SearchInput.M,{disabled:0===candidateConversations.length,i18n,placeholder:i18n("icu:contactSearchPlaceholder"),moduleClassName:"StoriesSettingsModal__search",onChange:function(event){setSearchTerm(event.target.value)},value:searchTerm}),selectedContacts.length?(0,jsx_runtime.jsx)(ContactPills.b,{moduleClassName:"StoriesSettingsModal__tags",children:selectedContacts.map((function(contact){return(0,jsx_runtime.jsx)(ContactPill.p,{acceptedMessageRequest:contact.acceptedMessageRequest,avatarPath:contact.avatarPath,color:contact.color,firstName:contact.firstName,i18n,id:contact.id,isMe:contact.isMe,phoneNumber:contact.phoneNumber,profileName:contact.profileName,sharedGroupNames:contact.sharedGroupNames,title:contact.title,onClickRemove:function(){return toggleSelectedConversation(contact.id)}},contact.id)}))}):void 0,candidateConversations.length?(0,jsx_runtime.jsx)(index_esm.Z,{bounds:!0,children:function(_ref11){var contentRect=_ref11.contentRect,measureRef=_ref11.measureRef;return(0,jsx_runtime.jsx)("div",{className:"StoriesSettingsModal__conversation-list",ref:measureRef,children:(0,jsx_runtime.jsx)(ConversationList.p7,{dimensions:contentRect.bounds,getPreferredBadge,getRow,i18n,lookupConversationWithoutUuid:shouldNeverBeCalled.q,onClickArchiveButton:shouldNeverBeCalled.U,onClickContactCheckbox:function(conversationId){toggleSelectedConversation(conversationId)},onSelectConversation:shouldNeverBeCalled.U,blockConversation:shouldNeverBeCalled.U,removeConversation:shouldNeverBeCalled.U,onOutgoingAudioCallInConversation:shouldNeverBeCalled.U,onOutgoingVideoCallInConversation:shouldNeverBeCalled.U,renderMessageSearchResult:function(){return(0,shouldNeverBeCalled.U)(),(0,jsx_runtime.jsx)("div",{})},rowCount,setIsFetchingUUID:shouldNeverBeCalled.U,shouldRecomputeRowHeights:!1,showChooseGroupMembers:shouldNeverBeCalled.U,showConversation:shouldNeverBeCalled.U,showUserNotFoundModal:shouldNeverBeCalled.U,theme:Util.f8.dark})})}}):(0,jsx_runtime.jsx)("div",{className:"module-ForwardMessageModal__no-candidate-contacts",children:i18n("icu:noContactsFound")})]}))}function GroupStorySettingsModal(_ref12){var i18n=_ref12.i18n,group=_ref12.group,onClose=_ref12.onClose,onBackButtonClick=_ref12.onBackButtonClick,getConversationByUuid=_ref12.getConversationByUuid,onRemoveGroup=_ref12.onRemoveGroup,groupMemberships=function(_ref,getConversationByUuid){var _ref$memberships=_ref.memberships,memberships=void 0===_ref$memberships?[]:_ref$memberships,_ref$pendingApprovalM=_ref.pendingApprovalMemberships,pendingApprovalMemberships=void 0===_ref$pendingApprovalM?[]:_ref$pendingApprovalM,_ref$pendingMembershi=_ref.pendingMemberships,pendingMemberships=void 0===_ref$pendingMembershi?[]:_ref$pendingMembershi;return{memberships:memberships.reduce((function(result,membership){var member=getConversationByUuid(membership.uuid);return member?[].concat(_toConsumableArray(result),[{isAdmin:membership.isAdmin,member}]):result}),[]),pendingApprovalMemberships:pendingApprovalMemberships.reduce((function(result,membership){var member=getConversationByUuid(membership.uuid);return!member||isConversationUnregistered(member)?result:[].concat(_toConsumableArray(result),[{member}])}),[]),pendingMemberships:pendingMemberships.reduce((function(result,membership){var member=getConversationByUuid(membership.uuid);return!member||isConversationUnregistered(member)?result:[].concat(_toConsumableArray(result),[{member,metadata:{addedByUserId:membership.addedByUserId}}])}),[])}}(group,getConversationByUuid);return(0,jsx_runtime.jsxs)(Modal.P2,Object.assign({modalName:"GroupStorySettingsModal",i18n,onClose,onBackButtonClick,title:group.title},modalCommonProps,{children:[(0,jsx_runtime.jsxs)("div",{className:"GroupStorySettingsModal__header",children:[(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:group.acceptedMessageRequest,avatarPath:group.avatarPath,badge:void 0,color:group.color,conversationType:group.type,i18n,isMe:!1,sharedGroupNames:[],size:Avatar.DZ.THIRTY_TWO,title:group.title}),(0,jsx_runtime.jsx)("span",{className:"GroupStorySettingsModal__title",children:(0,jsx_runtime.jsx)(UserText.a,{text:group.title})})]}),(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"}),(0,jsx_runtime.jsx)("p",{className:"GroupStorySettingsModal__members_title",children:i18n("icu:GroupStorySettingsModal__members_title")}),groupMemberships.memberships.map((function(membership){var member=membership.member;return(0,jsx_runtime.jsxs)("div",{className:"GroupStorySettingsModal__members_item",children:[(0,jsx_runtime.jsx)(Avatar.qE,{acceptedMessageRequest:member.acceptedMessageRequest,avatarPath:member.avatarPath,badge:void 0,color:member.color,conversationType:member.type,i18n,isMe:!1,sharedGroupNames:[],size:Avatar.DZ.THIRTY_TWO,title:member.title}),(0,jsx_runtime.jsx)("p",{className:"GroupStorySettingsModal__members_item__name",children:(0,jsx_runtime.jsx)(UserText.a,{text:member.title})})]},member.id)})),(0,jsx_runtime.jsx)("p",{className:"GroupStorySettingsModal__members_help",children:i18n("icu:GroupStorySettingsModal__members_help",{groupTitle:group.title})}),(0,jsx_runtime.jsx)("hr",{className:"StoriesSettingsModal__divider"}),(0,jsx_runtime.jsx)("button",{className:"GroupStorySettingsModal__remove_group",onClick:function(){return onRemoveGroup(group)},type:"button",children:i18n("icu:GroupStorySettingsModal__remove_group")})]}))}DistributionListItem.displayName="DistributionListItem",GroupStoryItem.displayName="GroupStoryItem",DistributionListSettingsModal.displayName="DistributionListSettingsModal",EditDistributionListModal.displayName="EditDistributionListModal",GroupStorySettingsModal.displayName="GroupStorySettingsModal"},"./ts/components/StoryDistributionListName.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>StoryDistributionListName});__webpack_require__("./node_modules/react/index.js");var _types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_UserText__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/UserText.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function StoryDistributionListName(_ref){var i18n=_ref.i18n,id=_ref.id,name=_ref.name;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_UserText__WEBPACK_IMPORTED_MODULE_2__.a,{text:(0,_types_Stories__WEBPACK_IMPORTED_MODULE_1__.HH)(i18n,id,name)})}StoryDistributionListName.displayName="StoryDistributionListName"},"./ts/test-both/helpers/getFakeDistributionLists.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Cb:()=>getMyStories,K5:()=>getFakeDistributionList,sJ:()=>getFakeDistributionListsWithMembers});var casual__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/casual/src/casual.js"),casual__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(casual__WEBPACK_IMPORTED_MODULE_0__),_types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_types_UUID__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/UUID.ts"),_getDefaultConversation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/test-both/helpers/getDefaultConversation.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getFakeDistributionListsWithMembers(){return[Object.assign({},getMyStories(),{members:[]})].concat(_toConsumableArray(Array.from(Array(casual__WEBPACK_IMPORTED_MODULE_0___default().integer(2,8)),(function(){return Object.assign({},getFakeDistributionList(),{members:Array.from(Array(casual__WEBPACK_IMPORTED_MODULE_0___default().integer(3,12)),(function(){return(0,_getDefaultConversation__WEBPACK_IMPORTED_MODULE_3__.E$)()}))})}))))}function getFakeDistributionList(){return{allowsReplies:Boolean(casual__WEBPACK_IMPORTED_MODULE_0___default().coin_flip),id:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),isBlockList:!1,memberUuids:Array.from(Array(casual__WEBPACK_IMPORTED_MODULE_0___default().integer(3,12)),(function(){return _types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString()})),name:casual__WEBPACK_IMPORTED_MODULE_0___default().title}}function getMyStories(){return{allowsReplies:!0,id:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.qn,isBlockList:!0,memberUuids:[],name:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.qn}}},"./ts/util/filterAndSortConversations.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>filterAndSortConversationsByRecent});var fuse_esm=__webpack_require__("./node_modules/fuse.js/dist/fuse.esm.js"),libphonenumberInstance=__webpack_require__("./ts/util/libphonenumberInstance.ts");function removeDiacritics(text){return text.normalize("NFD").replace(/\p{Diacritic}/gu,"")}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ACTIVE_AT_SCORE_FACTOR=1/__webpack_require__("./ts/util/durations/index.ts").ps*.01,FUSE_OPTIONS={threshold:.2,includeScore:!0,useExtendedSearch:!0,shouldSort:!0,distance:200,keys:[{name:"searchableTitle",weight:1},{name:"title",weight:1},{name:"name",weight:1},{name:"username",weight:1},{name:"e164",weight:.5}],getFn:function(){var _Fuse$config,text=(_Fuse$config=fuse_esm.Z.config).getFn.apply(_Fuse$config,arguments);return text?"string"==typeof text?removeDiacritics(text):text.map(removeDiacritics):text}},cachedIndices=new WeakMap,COMMANDS=new Map;function filterAndSortConversationsByRecent(conversations,searchTerm,regionCode){if(searchTerm.length){var now=Date.now();return function searchConversations(conversations,searchTerm,regionCode){var maybeCommand=searchTerm.match(/^!([^\s]+):(.*)$/);if(maybeCommand){var _maybeCommand=_slicedToArray(maybeCommand,3),commandName=_maybeCommand[1],_query=_maybeCommand[2],command=COMMANDS.get(commandName);if(command)return command(conversations,_query).map((function(item){return{item}}))}var phoneNumber=(0,libphonenumberInstance.i9)(searchTerm,regionCode),extendedSearchTerm=searchTerm;phoneNumber&&(extendedSearchTerm+=` | ${phoneNumber.e164}`);var index=cachedIndices.get(conversations);return index||(index=new fuse_esm.Z(conversations,FUSE_OPTIONS),cachedIndices.set(conversations,index)),index.search(extendedSearchTerm)}(conversations.filter((function(item){return item.titleNoDefault})),searchTerm,regionCode).slice().sort((function(a,b){var _a$score,_b$score,_a$item=a.item,_a$item$activeAt=_a$item.activeAt,aActiveAt=void 0===_a$item$activeAt?0:_a$item$activeAt,_a$item$left=_a$item.left,aLeft=void 0!==_a$item$left&&_a$item$left,_b$item=b.item,_b$item$activeAt=_b$item.activeAt,bActiveAt=void 0===_b$item$activeAt?0:_b$item$activeAt,_b$item$left=_b$item.left,bLeft=void 0!==_b$item$left&&_b$item$left;return(now-aActiveAt)*ACTIVE_AT_SCORE_FACTOR+(null!==(_a$score=a.score)&&void 0!==_a$score?_a$score:0)+(aLeft?1:0)-((now-bActiveAt)*ACTIVE_AT_SCORE_FACTOR+(null!==(_b$score=b.score)&&void 0!==_b$score?_b$score:0)+(bLeft?1:0))})).map((function(result){return result.item}))}return conversations.concat().sort((function(a,b){return a.activeAt&&b.activeAt?a.activeAt>b.activeAt?-1:1:a.activeAt&&!b.activeAt?-1:1}))}COMMANDS.set("uuidEndsWith",(function(conversations,query){return conversations.filter((function(convo){var _convo$uuid;return null===(_convo$uuid=convo.uuid)||void 0===_convo$uuid?void 0:_convo$uuid.endsWith(query)}))})),COMMANDS.set("idEndsWith",(function(conversations,query){return conversations.filter((function(convo){var _convo$id;return null===(_convo$id=convo.id)||void 0===_convo$id?void 0:_convo$id.endsWith(query)}))})),COMMANDS.set("e164EndsWith",(function(conversations,query){return conversations.filter((function(convo){var _convo$e;return null===(_convo$e=convo.e164)||void 0===_convo$e?void 0:_convo$e.endsWith(query)}))})),COMMANDS.set("groupIdEndsWith",(function(conversations,query){return conversations.filter((function(convo){var _convo$groupId;return null===(_convo$groupId=convo.groupId)||void 0===_convo$groupId?void 0:_convo$groupId.endsWith(query)}))}))},"./ts/util/isNotNil.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isNotNil(value){return null!=value}__webpack_require__.d(__webpack_exports__,{D:()=>isNotNil})},"./ts/util/libphonenumberInstance.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M9:()=>PhoneNumberFormat,eE:()=>instance,i9:()=>parseAndFormatPhoneNumber});var google_libphonenumber__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/google-libphonenumber/dist/libphonenumber.js"),google_libphonenumber__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(google_libphonenumber__WEBPACK_IMPORTED_MODULE_0__),instance=google_libphonenumber__WEBPACK_IMPORTED_MODULE_0___default().PhoneNumberUtil.getInstance(),PhoneNumberFormat=google_libphonenumber__WEBPACK_IMPORTED_MODULE_0___default().PhoneNumberFormat;function parseAndFormatPhoneNumber(str,regionCode){var result,format=arguments.length>2&&void 0!==arguments[2]?arguments[2]:PhoneNumberFormat.E164;try{result=instance.parse(str,regionCode)}catch(err){return}return{isValid:instance.isValidNumber(result),userInput:str,e164:instance.format(result,format)}}},"./ts/util/scrollUtil.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Og:()=>scrollToBottom,bV:()=>setScrollBottom,rA:()=>getScrollBottom});var getScrollBottom=function(el){return el.scrollHeight-el.scrollTop-el.clientHeight};function setScrollBottom(el,newScrollBottom){el.scrollTop=el.scrollHeight-newScrollBottom-el.clientHeight}function scrollToBottom(el){el.scrollTop=el.scrollHeight}},"./ts/util/shouldNeverBeCalled.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>shouldNeverBeCalled,q:()=>asyncShouldNeverBeCalled});var _assert__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/util/assert.ts");function shouldNeverBeCalled(){(0,_assert__WEBPACK_IMPORTED_MODULE_0__.q8)(!1,"This should never be called. Doing nothing")}async function asyncShouldNeverBeCalled(){shouldNeverBeCalled()}},"./node_modules/lodash/escapeRegExp.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toString=__webpack_require__("./node_modules/lodash/toString.js"),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);module.exports=function escapeRegExp(string){return(string=toString(string))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}},"./node_modules/lodash/isBoolean.js":(module,__unused_webpack_exports,__webpack_require__)=>{var baseGetTag=__webpack_require__("./node_modules/lodash/_baseGetTag.js"),isObjectLike=__webpack_require__("./node_modules/lodash/isObjectLike.js");module.exports=function isBoolean(value){return!0===value||!1===value||isObjectLike(value)&&"[object Boolean]"==baseGetTag(value)}}}]);