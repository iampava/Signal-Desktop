(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[7109],{"./ts/components/Alert.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>Alert});__webpack_require__("./node_modules/react/index.js");var _Button__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Button.tsx"),_Modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Modal.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Alert(_ref){var body=_ref.body,i18n=_ref.i18n,onClose=_ref.onClose,theme=_ref.theme,title=_ref.title;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_2__.u_,{i18n,modalFooter:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_1__.zx,{onClick:onClose,children:i18n("icu:Confirmation--confirm")}),modalName:"Alert",onClose,theme,title,children:body})}Alert.displayName="Alert"},"./ts/components/Button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Wu:()=>ButtonVariant,c:()=>ButtonIconType,qE:()=>ButtonSize,zx:()=>Button});var ButtonSize,ButtonVariant,ButtonIconType,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_assert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/assert.ts"),_util_theme__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/util/theme.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");!function(ButtonSize){ButtonSize[ButtonSize.Large=0]="Large",ButtonSize[ButtonSize.Medium=1]="Medium",ButtonSize[ButtonSize.Small=2]="Small"}(ButtonSize||(ButtonSize={})),function(ButtonVariant){ButtonVariant.Calling="Calling",ButtonVariant.Destructive="Destructive",ButtonVariant.Details="Details",ButtonVariant.Primary="Primary",ButtonVariant.Secondary="Secondary",ButtonVariant.SecondaryAffirmative="SecondaryAffirmative",ButtonVariant.SecondaryDestructive="SecondaryDestructive",ButtonVariant.SystemMessage="SystemMessage"}(ButtonVariant||(ButtonVariant={})),function(ButtonIconType){ButtonIconType.audio="audio",ButtonIconType.muted="muted",ButtonIconType.search="search",ButtonIconType.unmuted="unmuted",ButtonIconType.video="video"}(ButtonIconType||(ButtonIconType={}));var SIZE_CLASS_NAMES=new Map([[ButtonSize.Large,"module-Button--large"],[ButtonSize.Medium,"module-Button--medium"],[ButtonSize.Small,"module-Button--small"]]),VARIANT_CLASS_NAMES=new Map([[ButtonVariant.Primary,"module-Button--primary"],[ButtonVariant.Secondary,"module-Button--secondary"],[ButtonVariant.SecondaryAffirmative,"module-Button--secondary module-Button--secondary--affirmative"],[ButtonVariant.SecondaryDestructive,"module-Button--secondary module-Button--secondary--destructive"],[ButtonVariant.Destructive,"module-Button--destructive"],[ButtonVariant.Calling,"module-Button--calling"],[ButtonVariant.SystemMessage,"module-Button--system-message"],[ButtonVariant.Details,"module-Button--details"]]),Button=react__WEBPACK_IMPORTED_MODULE_0__.forwardRef((function ButtonInner(props,ref){var onClick,type,form,children=props.children,className=props.className,_props$disabled=props.disabled,disabled=void 0!==_props$disabled&&_props$disabled,icon=props.icon,style=props.style,tabIndex=props.tabIndex,theme=props.theme,_props$variant=props.variant,variant=void 0===_props$variant?ButtonVariant.Primary:_props$variant,_props$size=props.size,size=void 0===_props$size?variant===ButtonVariant.Details?ButtonSize.Small:ButtonSize.Medium:_props$size,ariaLabel=props["aria-label"],ariaDisabled=props["aria-disabled"];"onClick"in props?(onClick=props.onClick,type="button"):(onClick=void 0,type=props.type,form=props.form);var sizeClassName=SIZE_CLASS_NAMES.get(size);(0,_util_assert__WEBPACK_IMPORTED_MODULE_2__.q8)(sizeClassName,"<Button> size not found");var variantClassName=VARIANT_CLASS_NAMES.get(variant);(0,_util_assert__WEBPACK_IMPORTED_MODULE_2__.q8)(variantClassName,"<Button> variant not found");var buttonElement=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("button",{"aria-label":ariaLabel,"aria-disabled":ariaDisabled,className:classnames__WEBPACK_IMPORTED_MODULE_1___default()("module-Button",sizeClassName,variantClassName,icon&&`module-Button--icon--${icon}`,className),disabled,onClick,form,ref,style,tabIndex,type,children});return theme?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:(0,_util_theme__WEBPACK_IMPORTED_MODULE_3__.j)(theme),children:buttonElement}):buttonElement}))},"./ts/components/ConfirmationDialog.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>ConfirmationDialog});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_react_spring_web__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@react-spring/web/dist/react-spring-web.esm.js"),_Button__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/Button.tsx"),_ModalHost__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ModalHost.tsx"),_Modal__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/Modal.tsx"),_hooks_useAnimated__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/hooks/useAnimated.tsx"),_Spinner__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/Spinner.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react/jsx-runtime.js");function focusRef(el){el&&el.focus()}var ConfirmationDialog=react__WEBPACK_IMPORTED_MODULE_0__.memo((function ConfirmationDialogInner(_ref){var _ref$actions=_ref.actions,actions=void 0===_ref$actions?[]:_ref$actions,dialogName=_ref.dialogName,cancelButtonVariant=_ref.cancelButtonVariant,cancelText=_ref.cancelText,children=_ref.children,hasXButton=_ref.hasXButton,i18n=_ref.i18n,isSpinning=_ref.isSpinning,moduleClassName=_ref.moduleClassName,noMouseClose=_ref.noMouseClose,noDefaultCancelButton=_ref.noDefaultCancelButton,onCancel=_ref.onCancel,onClose=_ref.onClose,onTopOfEverything=_ref.onTopOfEverything,theme=_ref.theme,title=_ref.title,_useAnimated=(0,_hooks_useAnimated__WEBPACK_IMPORTED_MODULE_5__.F)(onClose,{getFrom:function(){return{opacity:0,transform:"scale(0.25)"}},getTo:function(isOpen){return{opacity:isOpen?1:0,transform:"scale(1)"}}}),close=_useAnimated.close,overlayStyles=_useAnimated.overlayStyles,modalStyles=_useAnimated.modalStyles,cancelAndClose=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){onCancel&&onCancel(),close()}),[close,onCancel]),handleCancel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){e.target===e.currentTarget&&cancelAndClose()}),[cancelAndClose]),hasActions=Boolean(actions.length),footer=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.Fragment,{children:[isSpinning||noDefaultCancelButton?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{onClick:handleCancel,ref:focusRef,variant:cancelButtonVariant||(hasActions?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Secondary:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Primary),children:cancelText||i18n("icu:confirmation-dialog--Cancel")}),actions.map((function(action,i){var _action$id,buttonStyle;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_2__.zx,{disabled:action.disabled||isSpinning,"aria-disabled":action["aria-disabled"],onClick:function(){action.action(),!1!==action.autoClose&&close()},"data-action":i,variant:(buttonStyle=action.style,"affirmative"===buttonStyle?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Primary:"negative"===buttonStyle?_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Destructive:_Button__WEBPACK_IMPORTED_MODULE_2__.Wu.Secondary),children:isSpinning?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Spinner__WEBPACK_IMPORTED_MODULE_6__.$j,{size:"22px",svgSize:"small",direction:"on-primary-button"}):action.text},"string"==typeof action.text?null!==(_action$id=action.id)&&void 0!==_action$id?_action$id:action.text:action.id)}))]}),modalName=`ConfirmationDialog.${dialogName}`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ModalHost__WEBPACK_IMPORTED_MODULE_3__.l,{modalName,noMouseClose,onClose:close,onEscape:cancelAndClose,onTopOfEverything,overlayStyles,theme,moduleClassName:moduleClassName?`${moduleClassName}__ModalHost`:void 0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_react_spring_web__WEBPACK_IMPORTED_MODULE_1__.animated.div,{style:modalStyles,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_4__.P2,{modalName,hasXButton,i18n,moduleClassName,onClose:cancelAndClose,title,modalFooter:footer,children})})})}))},"./ts/components/MyStories.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FailedSentStory:()=>FailedSentStory,MultiListStories:()=>MultiListStories,NoStories:()=>NoStories,SingleListStories:()=>SingleListStories,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _storybook_jest__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/jest/dist/esm/index.js"),uuid__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/uuid-browser/index.js"),_storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/testing-library/dist/esm/index.js"),_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./_locales/en/messages.json"),_types_Stories__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/types/Stories.ts"),_MyStories__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/MyStories.tsx"),_messages_MessageSendState__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/messages/MessageSendState.ts"),_test_both_helpers_getDefaultConversation__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/test-both/helpers/getDefaultConversation.ts"),_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/test-both/helpers/getFakeStory.tsx"),_util_setupI18n__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ts/util/setupI18n.ts"),_util_sleep__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./ts/util/sleep.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var i18n=(0,_util_setupI18n__WEBPACK_IMPORTED_MODULE_10__.E5)("en",_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_4__);const __WEBPACK_DEFAULT_EXPORT__={title:"Components/MyStories",component:_MyStories__WEBPACK_IMPORTED_MODULE_6__.g,argTypes:{i18n:{defaultValue:i18n},onBack:{action:!0},onDelete:{action:!0},onForward:{action:!0},onSave:{action:!0},ourConversationId:{defaultValue:(0,_test_both_helpers_getDefaultConversation__WEBPACK_IMPORTED_MODULE_8__.E$)().id},hasViewReceiptSetting:{control:"boolean",defaultValue:!1},queueStoryDownload:{action:!0},retryMessageSend:{action:!0},viewStory:{action:!0}}};var Template=function(args){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_MyStories__WEBPACK_IMPORTED_MODULE_6__.g,Object.assign({},args))};Template.displayName="Template";var NoStories=Template.bind({});NoStories.args={myStories:[]},NoStories.story={name:"No Stories"};var interactionTest=async function(_ref){var args=_ref.args,canvasElement=_ref.canvasElement,canvas=(0,_storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__.uh)(canvasElement),btnDownload=_slicedToArray(canvas.getAllByLabelText("Download story"),1)[0];await _storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__.mV.click(btnDownload),await(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_1__.l)(args.onSave).toHaveBeenCalled();var btnBack=_slicedToArray(canvas.getAllByLabelText("Back"),1)[0];await _storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__.mV.click(btnBack),await(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_1__.l)(args.onBack).toHaveBeenCalled();var btnCtxMenu=_slicedToArray(canvas.getAllByLabelText("Context menu"),1)[0];await _storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__.mV.click(btnCtxMenu),await(0,_util_sleep__WEBPACK_IMPORTED_MODULE_12__._)(300);var btnFwd=_slicedToArray(canvas.getAllByLabelText("Forward"),1)[0];await _storybook_testing_library__WEBPACK_IMPORTED_MODULE_3__.mV.click(btnFwd),await(0,_storybook_jest__WEBPACK_IMPORTED_MODULE_1__.l)(args.onForward).toHaveBeenCalled()},SingleListStories=Template.bind({});SingleListStories.args={myStories:[(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)(_types_Stories__WEBPACK_IMPORTED_MODULE_5__.qn)]},SingleListStories.play=interactionTest,SingleListStories.story={name:"One distribution list"};var MultiListStories=Template.bind({});MultiListStories.args={myStories:[(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)(_types_Stories__WEBPACK_IMPORTED_MODULE_5__.qn),(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)((0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),"Cool Peeps"),(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)((0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),"Family")]},MultiListStories.play=interactionTest,MultiListStories.story={name:"Multiple distribution lists"};var FailedSentStory=Template.bind({}),myStory=(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)(_types_Stories__WEBPACK_IMPORTED_MODULE_5__.qn);FailedSentStory.args={myStories:[Object.assign({},myStory,{stories:myStory.stories.map((function(story,index){return 0===index?Object.assign({},story,{sendState:[{recipient:(0,_test_both_helpers_getDefaultConversation__WEBPACK_IMPORTED_MODULE_8__.E$)(),status:_messages_MessageSendState__WEBPACK_IMPORTED_MODULE_7__.fq.Failed}]}):story}))}),(0,_test_both_helpers_getFakeStory__WEBPACK_IMPORTED_MODULE_9__.GS)((0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)(),"Cool Peeps")]};var __namedExportsOrder=["NoStories","SingleListStories","MultiListStories","FailedSentStory"]},"./ts/components/MyStories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>MyStories});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/ConfirmationDialog.tsx"),_ContextMenu__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/ContextMenu.tsx"),_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/components/conversation/MessageTimestamp.tsx"),_StoryDistributionListName__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/components/StoryDistributionListName.tsx"),_StoryImage__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/components/StoryImage.tsx"),_util_theme__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/theme.ts"),_util_resolveStorySendStatus__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ts/util/resolveStorySendStatus.ts"),_hooks_useRetryStorySend__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ts/hooks/useRetryStorySend.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function MyStories(_ref){var i18n=_ref.i18n,myStories=_ref.myStories,onBack=_ref.onBack,onDelete=_ref.onDelete,onForward=_ref.onForward,onSave=_ref.onSave,queueStoryDownload=_ref.queueStoryDownload,retryMessageSend=_ref.retryMessageSend,viewStory=_ref.viewStory,hasViewReceiptSetting=_ref.hasViewReceiptSetting,onMediaPlaybackStart=_ref.onMediaPlaybackStart,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(),2),confirmDeleteStory=_useState2[0],setConfirmDeleteStory=_useState2[1];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[confirmDeleteStory&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ConfirmationDialog__WEBPACK_IMPORTED_MODULE_2__.U,{dialogName:"MyStories.delete",actions:[{text:i18n("icu:delete"),action:function(){return onDelete(confirmDeleteStory)},style:"negative"}],i18n,onClose:function(){return setConfirmDeleteStory(void 0)},children:i18n("icu:MyStories__delete")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"Stories__pane__header Stories__pane__header--centered",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{"aria-label":i18n("icu:back"),className:"Stories__pane__header--back",onClick:onBack,type:"button"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__header--title",children:i18n("icu:MyStories__title")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__list",children:myStories.map((function(list){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__distribution",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__distribution__title",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_StoryDistributionListName__WEBPACK_IMPORTED_MODULE_5__.e,{i18n,id:list.id,name:list.name})}),list.stories.map((function(story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(StorySent,{hasViewReceiptSetting,i18n,onForward,onSave,onMediaPlaybackStart,queueStoryDownload,retryMessageSend,setConfirmDeleteStory,story,viewStory},story.messageId)}))]},list.id)}))}),!myStories.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"Stories__pane__list--empty",children:i18n("icu:Stories__list-empty")})]})}function StorySent(_ref2){var _story$sendState,_story$views,hasViewReceiptSetting=_ref2.hasViewReceiptSetting,i18n=_ref2.i18n,onForward=_ref2.onForward,onSave=_ref2.onSave,onMediaPlaybackStart=_ref2.onMediaPlaybackStart,queueStoryDownload=_ref2.queueStoryDownload,retryMessageSend=_ref2.retryMessageSend,setConfirmDeleteStory=_ref2.setConfirmDeleteStory,story=_ref2.story,viewStory=_ref2.viewStory,sendStatus=(0,_util_resolveStorySendStatus__WEBPACK_IMPORTED_MODULE_8__.Z)(null!==(_story$sendState=story.sendState)&&void 0!==_story$sendState?_story$sendState:[]),_useRetryStorySend=(0,_hooks_useRetryStorySend__WEBPACK_IMPORTED_MODULE_9__.X)(i18n,sendStatus),renderAlert=_useRetryStorySend.renderAlert,setWasManuallyRetried=_useRetryStorySend.setWasManuallyRetried,wasManuallyRetried=_useRetryStorySend.wasManuallyRetried;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__story",children:[renderAlert(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("button",{"aria-label":i18n("icu:MyStories__story"),className:"StoryListItem__button MyStories__story-button",onClick:function(){if(!wasManuallyRetried&&(sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Failed||sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.PartiallySent))return setWasManuallyRetried(!0),void retryMessageSend(story.messageId);viewStory({storyId:story.messageId,storyViewMode:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.bX.MyStories})},type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"StoryListItem__previews",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_StoryImage__WEBPACK_IMPORTED_MODULE_6__.s,{attachment:story.attachment,firstName:i18n("icu:you"),i18n,isMe:!0,isThumbnail:!0,label:i18n("icu:MyStories__story"),moduleClassName:"StoryListItem__previews--image",queueStoryDownload,storyId:story.messageId,onMediaPlaybackStart})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{className:"MyStories__story__details",children:[sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Sending&&i18n("icu:Stories__list--sending"),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Failed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[i18n("icu:Stories__list--send_failed"),!wasManuallyRetried&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed__button",children:i18n("icu:Stories__list--retry-send")})]})}),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.PartiallySent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{children:[i18n("icu:Stories__list--partially-sent"),!wasManuallyRetried&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{className:"MyStories__story__details__failed__button",children:i18n("icu:Stories__list--retry-send")})]})}),sendStatus===_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Ox.Sent&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.Fragment,{children:[hasViewReceiptSetting?i18n("icu:MyStories__views",{views:null!==(_story$views=story.views)&&void 0!==_story$views?_story$views:0}):i18n("icu:MyStories__views-off"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_conversation_MessageTimestamp__WEBPACK_IMPORTED_MODULE_4__.i,{i18n,isRelativeTime:!0,module:"MyStories__story__timestamp",timestamp:story.timestamp})]})]})]}),story.attachment&&(story.attachment.path||story.attachment.data)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("button",{"aria-label":i18n("icu:MyStories__download"),className:"MyStories__story__download",onClick:function(){onSave(story)},type:"button"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ContextMenu__WEBPACK_IMPORTED_MODULE_3__.x,{i18n,menuOptions:[{icon:"MyStories__icon--forward",label:i18n("icu:forward"),onClick:function(){onForward(story.messageId)}},{icon:"StoryListItem__icon--info",label:i18n("icu:StoryListItem__info"),onClick:function(){viewStory({storyId:story.messageId,storyViewMode:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.bX.MyStories,viewTarget:_types_Stories__WEBPACK_IMPORTED_MODULE_1__.Zk.Details})}},{icon:"MyStories__icon--delete",label:i18n("icu:delete"),onClick:function(){setConfirmDeleteStory(story)}}],moduleClassName:"MyStories__story__more",theme:_util_theme__WEBPACK_IMPORTED_MODULE_7__.Q.Dark})]},story.timestamp)}StorySent.displayName="StorySent"},"./ts/components/Spinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$j:()=>Spinner,me:()=>SpinnerSvgSizes,sX:()=>SpinnerDirections});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SpinnerSvgSizes=["small","normal"],SpinnerDirections=["outgoing","incoming","on-background","on-primary-button","on-progress-dialog","on-avatar"];function Spinner(_ref){var ariaLabel=_ref.ariaLabel,direction=_ref.direction,moduleClassName=_ref.moduleClassName,role=_ref.role,size=_ref.size,svgSize=_ref.svgSize,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("module-spinner",moduleClassName);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__container"),getClassName(`__container--${svgSize}`),getClassName(direction&&`__container--${direction}`),getClassName(direction&&`__container--${svgSize}-${direction}`)),role,"aria-label":ariaLabel,style:{height:size,width:size},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__circle"),getClassName(`__circle--${svgSize}`),getClassName(direction&&`__circle--${direction}`),getClassName(direction&&`__circle--${svgSize}-${direction}`))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__arc"),getClassName(`__arc--${svgSize}`),getClassName(direction&&`__arc--${direction}`),getClassName(direction&&`__arc--${svgSize}-${direction}`))})]})}Spinner.displayName="Spinner"},"./ts/components/StoryDistributionListName.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>StoryDistributionListName});__webpack_require__("./node_modules/react/index.js");var _types_Stories__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Stories.ts"),_UserText__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/components/UserText.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function StoryDistributionListName(_ref){var i18n=_ref.i18n,id=_ref.id,name=_ref.name;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_UserText__WEBPACK_IMPORTED_MODULE_2__.a,{text:(0,_types_Stories__WEBPACK_IMPORTED_MODULE_1__.HH)(i18n,id,name)})}StoryDistributionListName.displayName="StoryDistributionListName"},"./ts/components/Time.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>Time});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./node_modules/react/jsx-runtime.js")),_excluded=["children","dateOnly","timestamp"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function Time(_ref){var dateTime,children=_ref.children,_ref$dateOnly=_ref.dateOnly,dateOnly=void 0!==_ref$dateOnly&&_ref$dateOnly,timestamp=_ref.timestamp,otherProps=_objectWithoutProperties(_ref,_excluded);dateOnly?dateTime=moment__WEBPACK_IMPORTED_MODULE_0___default()(timestamp).format("YYYY-MM-DD"):dateTime=("number"==typeof timestamp?new Date(timestamp):timestamp).toISOString();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("time",Object.assign({dateTime},otherProps,{children}))}Time.displayName="Time"},"./ts/components/UserText.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>UserText});__webpack_require__("./node_modules/react/index.js");var _conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/conversation/Emojify.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function UserText(_ref){var text=_ref.text;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{dir:"auto",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_conversation_Emojify__WEBPACK_IMPORTED_MODULE_1__.u,{text})})}UserText.displayName="UserText"},"./ts/components/conversation/AddNewLines.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>AddNewLines});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),defaultRenderNonNewLine=function(_ref){return _ref.text};function AddNewLines(_ref2){var text=_ref2.text,_ref2$renderNonNewLin=_ref2.renderNonNewLine,renderNonNewLine=void 0===_ref2$renderNonNewLin?defaultRenderNonNewLine:_ref2$renderNonNewLin,results=[],FIND_NEWLINES=/\n/g,match=FIND_NEWLINES.exec(text),last=0,count=1;if(!match)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:renderNonNewLine({text,key:0})});for(;match;){if(last<match.index){var textWithNoNewline=text.slice(last,match.index);count+=1,results.push(renderNonNewLine({text:textWithNoNewline,key:count}))}count+=1,results.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{},count)),last=FIND_NEWLINES.lastIndex,match=FIND_NEWLINES.exec(text)}return last<text.length&&(count+=1,results.push(renderNonNewLine({text:text.slice(last),key:count}))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:results})}},"./ts/components/conversation/MessageTimestamp.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>MessageTimestamp});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),util_timestamp=__webpack_require__("./ts/util/timestamp.ts"),Time=__webpack_require__("./ts/components/Time.tsx"),events=__webpack_require__("./node_modules/events/events.js"),durations=__webpack_require__("./ts/util/durations/index.ts");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ev=new events.EventEmitter;ev.setMaxListeners(1/0),setInterval((function(){return ev.emit("tick")}),durations.EB);var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function MessageTimestamp(_ref){var deletedForEveryone=_ref.deletedForEveryone,direction=_ref.direction,i18n=_ref.i18n,isRelativeTime=_ref.isRelativeTime,module=_ref.module,timestamp=_ref.timestamp,withImageNoCaption=_ref.withImageNoCaption,withSticker=_ref.withSticker,withTapToViewExpired=_ref.withTapToViewExpired,now=function useNowThatUpdatesEveryMinute(){var _useState2=_slicedToArray((0,react.useState)(Date.now()),2),now=_useState2[0],setNow=_useState2[1];return(0,react.useEffect)((function(){var updateNow=function(){return setNow(Date.now())};return updateNow(),ev.on("tick",updateNow),function(){ev.off("tick",updateNow)}}),[]),now}(),moduleName=module||"module-timestamp";return(0,jsx_runtime.jsx)(Time.q,{className:classnames_default()(moduleName,direction?`${moduleName}--${direction}`:null,withTapToViewExpired&&direction?`${moduleName}--${direction}-with-tap-to-view-expired`:null,withImageNoCaption?`${moduleName}--with-image-no-caption`:null,withSticker?`${moduleName}--with-sticker`:null,deletedForEveryone?`${moduleName}--deleted-for-everyone`:null),timestamp,children:(0,util_timestamp.mr)(i18n,timestamp,now,isRelativeTime)})}MessageTimestamp.displayName="MessageTimestamp"},"./ts/hooks/useRetryStorySend.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>useRetryStorySend});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_components_Alert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/components/Alert.tsx"),_types_Stories__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/Stories.ts"),_usePrevious__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/hooks/usePrevious.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useRetryStorySend(i18n,sendStatus){var _useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),hasSendFailedAlert=_useState2[0],setHasSendFailedAlert=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),2),wasManuallyRetried=_useState4[0],setWasManuallyRetried=_useState4[1],previousSendStatus=(0,_usePrevious__WEBPACK_IMPORTED_MODULE_3__.D)(sendStatus,sendStatus);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){wasManuallyRetried&&previousSendStatus!==sendStatus&&(sendStatus!==_types_Stories__WEBPACK_IMPORTED_MODULE_2__.Ox.Failed&&sendStatus!==_types_Stories__WEBPACK_IMPORTED_MODULE_2__.Ox.PartiallySent||setHasSendFailedAlert(!0))}),[previousSendStatus,sendStatus,wasManuallyRetried]),{renderAlert:function renderAlert(){return hasSendFailedAlert?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_components_Alert__WEBPACK_IMPORTED_MODULE_1__.b,{body:i18n("icu:Stories__failed-send"),i18n,onClose:function(){return setHasSendFailedAlert(!1)}}):null},setWasManuallyRetried,wasManuallyRetried}}},"./ts/test-both/helpers/fakeAttachment.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{C4:()=>fakeDraftAttachment,Jh:()=>fakeThumbnail,dh:()=>fakeAttachment});var _types_MIME__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ts/types/MIME.ts"),fakeAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,width:800,height:600,size:10304},overrides)},fakeThumbnail=function(url){return{contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,height:100,path:url,url,width:100}},fakeDraftAttachment=function(){var overrides=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({pending:!1,contentType:_types_MIME__WEBPACK_IMPORTED_MODULE_0__._l,path:"file.jpg",size:10304},overrides)}},"./ts/test-both/helpers/getDefaultConversation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Bj:()=>getDefaultGroupListItem,E$:()=>getDefaultConversation,nS:()=>getDefaultConversationWithUuid,uN:()=>getDefaultGroup});var lodash_sample__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/sample.js"),lodash_sample__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_sample__WEBPACK_IMPORTED_MODULE_0__),casual__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/casual/src/casual.js"),casual__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(casual__WEBPACK_IMPORTED_MODULE_1__),_types_UUID__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/UUID.ts"),_getRandomColor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/test-both/helpers/getRandomColor.ts"),_types_Colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/types/Colors.ts"),_types_Stories__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/types/Stories.ts"),getAvatarPath=function(){return lodash_sample__WEBPACK_IMPORTED_MODULE_0___default()(["/fixtures/kitten-1-64-64.jpg","/fixtures/kitten-2-64-64.jpg","/fixtures/kitten-3-64-64.jpg"])||""};function getDefaultConversation(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},firstName=casual__WEBPACK_IMPORTED_MODULE_1___default().first_name,lastName=casual__WEBPACK_IMPORTED_MODULE_1___default().last_name;return Object.assign({acceptedMessageRequest:!0,avatarPath:getAvatarPath(),badges:[],e164:`+${casual__WEBPACK_IMPORTED_MODULE_1___default().phone.replace(/-/g,"")}`,conversationColor:_types_Colors__WEBPACK_IMPORTED_MODULE_4__.cU[0],color:(0,_getRandomColor__WEBPACK_IMPORTED_MODULE_3__.m)(),firstName,id:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),isMe:!1,lastUpdated:casual__WEBPACK_IMPORTED_MODULE_1___default().unix_time,markedUnread:Boolean(overrideProps.markedUnread),sharedGroupNames:[],title:`${firstName} ${lastName}`,titleNoDefault:`${firstName} ${lastName}`,uuid:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString()},overrideProps,{type:"direct",acknowledgedGroupNameCollisions:void 0,storySendMode:void 0})}function getDefaultGroupListItem(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({},getDefaultGroup(),{disabledReason:void 0,membersCount:24,memberships:[]},overrideProps)}function getDefaultGroup(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},memberships=Array.from(Array(casual__WEBPACK_IMPORTED_MODULE_1___default().integer(1,20)),(function(){return{uuid:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),isAdmin:Boolean(casual__WEBPACK_IMPORTED_MODULE_1___default().coin_flip)}}));return Object.assign({acceptedMessageRequest:!0,announcementsOnly:!1,avatarPath:getAvatarPath(),badges:[],color:(0,_getRandomColor__WEBPACK_IMPORTED_MODULE_3__.m)(),conversationColor:_types_Colors__WEBPACK_IMPORTED_MODULE_4__.cU[0],groupDescription:casual__WEBPACK_IMPORTED_MODULE_1___default().sentence,groupId:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),groupLink:casual__WEBPACK_IMPORTED_MODULE_1___default().url,groupVersion:2,id:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),isMe:!1,lastUpdated:casual__WEBPACK_IMPORTED_MODULE_1___default().unix_time,markedUnread:Boolean(overrideProps.markedUnread),membersCount:memberships.length,memberships,sharedGroupNames:[],title:casual__WEBPACK_IMPORTED_MODULE_1___default().title,uuid:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),acknowledgedGroupNameCollisions:{},storySendMode:_types_Stories__WEBPACK_IMPORTED_MODULE_5__.vW.IfActive},overrideProps,{type:"group"})}function getDefaultConversationWithUuid(){var overrideProps=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},uuid=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString();return Object.assign({},getDefaultConversation(overrideProps),{uuid})}},"./ts/test-both/helpers/getFakeStory.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GS:()=>getFakeMyStory,Mh:()=>getFakeStoryView,U6:()=>getFakeStory});var casual__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/casual/src/casual.js"),casual__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(casual__WEBPACK_IMPORTED_MODULE_0__),_util_durations__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/util/durations/index.ts"),_types_UUID__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/types/UUID.ts"),_getDefaultConversation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/test-both/helpers/getDefaultConversation.ts"),_fakeAttachment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ts/test-both/helpers/fakeAttachment.ts"),_types_Stories__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ts/types/Stories.ts");function getFakeMyStory(id,name){var storyCount=casual__WEBPACK_IMPORTED_MODULE_0___default().integer(2,6);return{id:id||_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString(),name:name||id===_types_Stories__WEBPACK_IMPORTED_MODULE_5__.qn?"My Stories":casual__WEBPACK_IMPORTED_MODULE_0___default().catch_phrase,reducedSendStatus:_types_Stories__WEBPACK_IMPORTED_MODULE_5__.Ox.Sent,stories:Array.from(Array(storyCount),(function(){return Object.assign({},getFakeStoryView(),{sendState:[],views:casual__WEBPACK_IMPORTED_MODULE_0___default().integer(1,20)})}))}}function getFakeStoryView(attachmentUrl,timestamp){var url,sender=(0,_getDefaultConversation__WEBPACK_IMPORTED_MODULE_3__.E$)(),messageId=_types_UUID__WEBPACK_IMPORTED_MODULE_2__.hb.generate().toString();return{attachment:(url=attachmentUrl||"/fixtures/tina-rolf-269345-unsplash.jpg",(0,_fakeAttachment__WEBPACK_IMPORTED_MODULE_4__.dh)({path:url,thumbnail:(0,_fakeAttachment__WEBPACK_IMPORTED_MODULE_4__.Jh)(url),url})),isUnread:Boolean(casual__WEBPACK_IMPORTED_MODULE_0___default().coin_flip),messageId,messageIdForLogging:`${messageId} (for logging)`,sender,timestamp:timestamp||Date.now()-2*_util_durations__WEBPACK_IMPORTED_MODULE_1__.EB,expirationTimestamp:void 0}}function getFakeStory(_ref){var attachmentUrl=_ref.attachmentUrl,group=_ref.group,storyView=getFakeStoryView(attachmentUrl,_ref.timestamp),hasReplies=!!group&&Boolean(casual__WEBPACK_IMPORTED_MODULE_0___default().coin_flip),hasRepliesFromSelf=!(!group||!hasReplies)&&Boolean(casual__WEBPACK_IMPORTED_MODULE_0___default().coin_flip);return{conversationId:storyView.sender.id,hasReplies,hasRepliesFromSelf,group,storyView}}},"./ts/test-both/helpers/getRandomColor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>getRandomColor});var lodash_sample__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/sample.js"),lodash_sample__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_sample__WEBPACK_IMPORTED_MODULE_0__),_types_Colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/types/Colors.ts");function getRandomColor(){return lodash_sample__WEBPACK_IMPORTED_MODULE_0___default()(_types_Colors__WEBPACK_IMPORTED_MODULE_1__.sj)||_types_Colors__WEBPACK_IMPORTED_MODULE_1__.sj[0]}},"./ts/types/Colors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A0:()=>ContactNameColors,Cy:()=>DEFAULT_CONVERSATION_COLOR,cU:()=>ConversationColors,hx:()=>getAvatarColor,nE:()=>AvatarColorMap,sj:()=>AvatarColors});var AvatarColorMap=new Map([["A100",{bg:"#e3e3fe",fg:"#3838f5"}],["A110",{bg:"#dde7fc",fg:"#1251d3"}],["A120",{bg:"#d8e8f0",fg:"#086da0"}],["A130",{bg:"#cde4cd",fg:"#067906"}],["A140",{bg:"#eae0fd",fg:"#661aff"}],["A150",{bg:"#f5e3fe",fg:"#9f00f0"}],["A160",{bg:"#f6d8ec",fg:"#b8057c"}],["A170",{bg:"#f5d7d7",fg:"#be0404"}],["A180",{bg:"#fef5d0",fg:"#836b01"}],["A190",{bg:"#eae6d5",fg:"#7d6f40"}],["A200",{bg:"#d2d2dc",fg:"#4f4f6d"}],["A210",{bg:"#d7d7d9",fg:"#5c5c5c"}]]),AvatarColors=Array.from(AvatarColorMap.keys()),ConversationColors=["ultramarine","crimson","vermilion","burlap","forest","wintergreen","teal","blue","indigo","violet","plum","taupe","steel","ember","midnight","infrared","lagoon","fluorescent","basil","sublime","sea","tangerine"],ContactNameColors=["200","120","300","010","210","330","230","180","030","340","270","090","000","150","240","040","160","280","080","320","020","140","260","060","350","100","290","130","220","050","170","250","070","190","310","110"],DEFAULT_CONVERSATION_COLOR={color:"ultramarine"};function getAvatarColor(color){return color||AvatarColors[0]}},"./ts/types/LinkPreview.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Df:()=>isStickerPack,Hz:()=>isGroupLink,ge:()=>getDomain,go:()=>shouldPreviewHref,hH:()=>LinkPreviewSourceType,kz:()=>isLinkSneaky,rq:()=>findLinks,vl:()=>shouldLinkifyMessage});var LinkPreviewSourceType,lodash_range__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/range.js"),lodash_range__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_0__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/isEmpty.js"),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__),lodash_compact__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/compact.js"),lodash_compact__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_compact__WEBPACK_IMPORTED_MODULE_2__),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/isNumber.js"),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__),url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/url/url.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/linkify-it/index.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_5__),_util_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/url.ts"),_util_emoji__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/util/emoji.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(LinkPreviewSourceType){LinkPreviewSourceType[LinkPreviewSourceType.Composer=0]="Composer",LinkPreviewSourceType[LinkPreviewSourceType.ForwardMessageModal=1]="ForwardMessageModal",LinkPreviewSourceType[LinkPreviewSourceType.StoryCreator=2]="StoryCreator"}(LinkPreviewSourceType||(LinkPreviewSourceType={}));var linkify=linkify_it__WEBPACK_IMPORTED_MODULE_5___default()();function shouldPreviewHref(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);return Boolean(url&&"https:"===url.protocol&&!function isDomainExcluded(url){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(EXCLUDED_DOMAINS);try{for(_iterator.s();!(_step=_iterator.n()).done;){var excludedDomain=_step.value;if(url.hostname.endsWith(`.${excludedDomain}`)||url.hostname===excludedDomain)return!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1}(url)&&!isLinkSneaky(href))}var EXCLUDED_DOMAINS=["debuglogs.org","example","example.com","example.net","example.org","invalid","localhost","onion","test"];var DIRECTIONAL_OVERRIDES=/[\u202c\u202d\u202e]/,UNICODE_DRAWING=/[\u2500-\u25FF]/;function shouldLinkifyMessage(message){return!message||!DIRECTIONAL_OVERRIDES.test(message)&&!UNICODE_DRAWING.test(message)}function isStickerPack(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.art/addstickers/")}function isGroupLink(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.group/")}function findLinks(text,caretLocation){if(!shouldLinkifyMessage(text))return[];var haveCaretLocation=lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default()(caretLocation),textLength=text?text.length:0,matches=linkify.match(text?(0,_util_emoji__WEBPACK_IMPORTED_MODULE_6__.s)(text):"")||[];return lodash_compact__WEBPACK_IMPORTED_MODULE_2___default()(matches.map((function(match){return haveCaretLocation?void 0===caretLocation?null:match.lastIndex===textLength&&caretLocation===textLength||match.index>caretLocation||match.lastIndex<caretLocation?match.text:null:match.text})))}function getDomain(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url||!url.hostname)throw new Error("getDomain: Unable to extract hostname from href");return url.hostname}var VALID_URI_CHARACTERS=new Set(["%",":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","="].concat(_toConsumableArray(String.fromCharCode.apply(String,_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(65,91)).concat(_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(97,123))))),_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(10).map(String)),["-",".","_","~"])),ASCII_PATTERN=/[\u0020-\u007F]/g;function isLinkSneaky(href){if(href.length>4096)return!0;var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url)return!0;if(url.username||url.password)return!0;if(!url.hostname)return!0;if(url.hostname.length>2048)return!0;if(url.hostname.includes("%"))return!0;var labels=url.hostname.split(".");if(labels.length<2||labels.some(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default()))return!0;var withoutPeriods=(url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode?url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode(url.hostname):url.hostname).replace(/\./g,""),hasASCII=ASCII_PATTERN.test(withoutPeriods),withoutASCII=withoutPeriods.replace(ASCII_PATTERN,"");if(hasASCII&&withoutASCII.length>0)return!0;var startOfPathAndHash=href.indexOf("/",url.protocol.length+4);return _toConsumableArray(-1===startOfPathAndHash?"":href.substr(startOfPathAndHash)).some((function(character){return!VALID_URI_CHARACTERS.has(character)}))}},"./ts/types/Stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$q:()=>HasStories,FT:()=>StoryViewDirectionType,HH:()=>getStoryDistributionListName,Ox:()=>ResolvedSendStatus,Zk:()=>StoryViewTargetType,bX:()=>StoryViewModeType,qn:()=>MY_STORY_ID,vW:()=>StorySendMode});var StoryViewDirectionType,StoryViewTargetType,StoryViewModeType,HasStories,StorySendMode,ResolvedSendStatus,MY_STORY_ID="00000000-0000-0000-0000-000000000000";function getStoryDistributionListName(i18n,id,name){return id===MY_STORY_ID?i18n("icu:Stories__mine"):name}!function(StoryViewDirectionType){StoryViewDirectionType.Next="Next",StoryViewDirectionType.Previous="Previous"}(StoryViewDirectionType||(StoryViewDirectionType={})),function(StoryViewTargetType){StoryViewTargetType.Details="Details",StoryViewTargetType.Views="Views",StoryViewTargetType.Replies="Replies"}(StoryViewTargetType||(StoryViewTargetType={})),function(StoryViewModeType){StoryViewModeType.All="All",StoryViewModeType.Hidden="Hidden",StoryViewModeType.MyStories="MyStories",StoryViewModeType.Single="Single",StoryViewModeType.Unread="Unread",StoryViewModeType.User="User"}(StoryViewModeType||(StoryViewModeType={})),function(HasStories){HasStories.Read="Read",HasStories.Unread="Unread"}(HasStories||(HasStories={})),function(StorySendMode){StorySendMode.IfActive="IfActive",StorySendMode.Always="Always",StorySendMode.Never="Never"}(StorySendMode||(StorySendMode={})),function(ResolvedSendStatus){ResolvedSendStatus.Failed="Failed",ResolvedSendStatus.PartiallySent="PartiallySent",ResolvedSendStatus.Sending="Sending",ResolvedSendStatus.Sent="Sent"}(ResolvedSendStatus||(ResolvedSendStatus={}))},"./ts/types/UUID.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{TP:()=>isValidUuid,hb:()=>UUID});var UUIDKind,uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/uuid-browser/index.js"),_util_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/util/assert.ts");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}!function(UUIDKind){UUIDKind.ACI="ACI",UUIDKind.PNI="PNI",UUIDKind.Unknown="Unknown"}(UUIDKind||(UUIDKind={}));var UUID_REGEXP=/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,isValidUuid=function(value){return"string"==typeof value&&("00000000-0000-0000-0000-000000000000"===value||UUID_REGEXP.test(value))},UUID=function(){function UUID(value){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,UUID),this.value=value,(0,_util_assert__WEBPACK_IMPORTED_MODULE_1__.Yj)(isValidUuid(value),`Invalid UUID: ${value}`)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(UUID,[{key:"toString",value:function toString(){return this.value}},{key:"isEqual",value:function isEqual(other){return this.value===other.value}}],[{key:"parse",value:function parse(value){return new UUID(value)}},{key:"lookup",value:function lookup(identifier){var conversation=window.ConversationController.get(identifier),uuid=null==conversation?void 0:conversation.get("uuid");if(void 0!==uuid)return new UUID(uuid)}},{key:"checkedLookup",value:function checkedLookup(identifier){var uuid=UUID.lookup(identifier);return(0,_util_assert__WEBPACK_IMPORTED_MODULE_1__.Yj)(void 0!==uuid,`Conversation ${identifier} not found or has no uuid`),uuid}},{key:"generate",value:function generate(){return new UUID((0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)())}},{key:"cast",value:function cast(value){return new UUID(value.toLowerCase()).toString()}},{key:"fromPrefix",value:function fromPrefix(value){for(var padded=value;padded.length<8;)padded+="0";return new UUID(`${padded}-0000-4000-8000-${"0".repeat(12)}`)}}]),UUID}()},"./ts/util/sleep.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function sleep(ms,abortSignal){return new Promise((function(resolve,reject){var timeout=setTimeout(resolve,ms);null==abortSignal||abortSignal.addEventListener("abort",(function(){void 0!==timeout&&(clearTimeout(timeout),timeout=void 0),reject(new Error("Aborted"))}))}))}__webpack_require__.d(__webpack_exports__,{_:()=>sleep})},"./ts/util/timestamp.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N_:()=>isMoreRecentThan,Uj:()=>formatDateTimeShort,Wl:()=>formatDateTimeForAttachment,gD:()=>formatDateTimeLong,mr:()=>formatTime,p6:()=>formatDate,zk:()=>isToday});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/moment/moment.js"),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),_durations__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/util/durations/index.ts");function isMoreRecentThan(timestamp,delta){return timestamp>Date.now()-delta}var isSameDay=function(a,b){return moment__WEBPACK_IMPORTED_MODULE_0___default()(a).isSame(b,"day")},isToday=function(rawTimestamp){return isSameDay(rawTimestamp,Date.now())},isYesterday=function(rawTimestamp){return isSameDay(rawTimestamp,moment__WEBPACK_IMPORTED_MODULE_0___default()().subtract(1,"day"))};function formatDateTimeShort(i18n,rawTimestamp){var timestamp=rawTimestamp.valueOf(),now=Date.now(),diff=now-timestamp,locale=window.getPreferredSystemLocales();if(diff<_durations__WEBPACK_IMPORTED_MODULE_1__.kr||isToday(timestamp))return formatTime(i18n,rawTimestamp,now);var m=moment__WEBPACK_IMPORTED_MODULE_0___default()(timestamp);return diff<_durations__WEBPACK_IMPORTED_MODULE_1__.ps&&m.isSame(now,"month")?new Intl.DateTimeFormat(locale,{weekday:"short"}).format(timestamp):m.isSame(now,"year")?new Intl.DateTimeFormat(locale,{day:"numeric",month:"short"}).format(timestamp):new Intl.DateTimeFormat(locale,{day:"numeric",month:"short",year:"numeric"}).format(timestamp)}function formatDateTimeForAttachment(i18n,rawTimestamp){var timestamp=rawTimestamp.valueOf(),now=Date.now(),diff=now-timestamp,locale=window.getPreferredSystemLocales();if(diff<_durations__WEBPACK_IMPORTED_MODULE_1__.kr||isToday(timestamp))return formatTime(i18n,rawTimestamp,now);var m=moment__WEBPACK_IMPORTED_MODULE_0___default()(timestamp);return diff<_durations__WEBPACK_IMPORTED_MODULE_1__.ps&&m.isSame(now,"month")?new Intl.DateTimeFormat(locale,{weekday:"short",hour:"numeric",minute:"numeric"}).format(timestamp):m.isSame(now,"year")?new Intl.DateTimeFormat(locale,{day:"numeric",month:"short",hour:"numeric",minute:"numeric"}).format(timestamp):new Intl.DateTimeFormat(locale,{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"}).format(timestamp)}function formatDateTimeLong(i18n,rawTimestamp){var locale=window.getPreferredSystemLocales(),timestamp=rawTimestamp.valueOf();return isToday(rawTimestamp)?i18n("icu:timestampFormat__long--today",{time:new Intl.DateTimeFormat(locale,{hour:"numeric",minute:"numeric"}).format(timestamp)}):isYesterday(rawTimestamp)?i18n("icu:timestampFormat__long--yesterday",{time:new Intl.DateTimeFormat(locale,{hour:"numeric",minute:"numeric"}).format(timestamp)}):new Intl.DateTimeFormat(locale,{day:"numeric",hour:"numeric",minute:"numeric",month:"short",year:"numeric"}).format(timestamp)}function formatTime(i18n,rawTimestamp,now,isRelativeTime){var timestamp=rawTimestamp.valueOf(),diff=now.valueOf()-timestamp;return diff<_durations__WEBPACK_IMPORTED_MODULE_1__.EB?i18n("icu:justNow"):diff<_durations__WEBPACK_IMPORTED_MODULE_1__.kr?i18n("icu:minutesAgo",{minutes:Math.floor(diff/_durations__WEBPACK_IMPORTED_MODULE_1__.EB)}):isRelativeTime?i18n("icu:hoursAgo",{hours:Math.floor(diff/_durations__WEBPACK_IMPORTED_MODULE_1__.kr)}):new Date(timestamp).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}function formatDate(i18n,rawTimestamp){if(isToday(rawTimestamp))return i18n("icu:today");if(isYesterday(rawTimestamp))return i18n("icu:yesterday");var locale=window.getPreferredSystemLocales(),m=moment__WEBPACK_IMPORTED_MODULE_0___default()(rawTimestamp),timestamp=rawTimestamp.valueOf();return Math.abs(m.diff(Date.now()))<6*_durations__WEBPACK_IMPORTED_MODULE_1__.vc?new Intl.DateTimeFormat(locale,{day:"numeric",month:"short",weekday:"short"}).format(timestamp):new Intl.DateTimeFormat(locale,{day:"numeric",month:"short",year:"numeric"}).format(timestamp)}},"./ts/util/url.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function maybeParseUrl(value){if("string"==typeof value)try{return new URL(value)}catch(err){}}__webpack_require__.d(__webpack_exports__,{FS:()=>maybeParseUrl})},"./node_modules/casual/src/providers sync recursive ^\\.\\/.*$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./address":"./node_modules/casual/src/providers/address.js","./address.js":"./node_modules/casual/src/providers/address.js","./ar_SY/address":"./node_modules/casual/src/providers/ar_SY/address.js","./ar_SY/address.js":"./node_modules/casual/src/providers/ar_SY/address.js","./ar_SY/color":"./node_modules/casual/src/providers/ar_SY/color.js","./ar_SY/color.js":"./node_modules/casual/src/providers/ar_SY/color.js","./ar_SY/date":"./node_modules/casual/src/providers/ar_SY/date.js","./ar_SY/date.js":"./node_modules/casual/src/providers/ar_SY/date.js","./ar_SY/person":"./node_modules/casual/src/providers/ar_SY/person.js","./ar_SY/person.js":"./node_modules/casual/src/providers/ar_SY/person.js","./ar_SY/text":"./node_modules/casual/src/providers/ar_SY/text.js","./ar_SY/text.js":"./node_modules/casual/src/providers/ar_SY/text.js","./bg_BG/address":"./node_modules/casual/src/providers/bg_BG/address.js","./bg_BG/address.js":"./node_modules/casual/src/providers/bg_BG/address.js","./bg_BG/date":"./node_modules/casual/src/providers/bg_BG/date.js","./bg_BG/date.js":"./node_modules/casual/src/providers/bg_BG/date.js","./bg_BG/internet":"./node_modules/casual/src/providers/bg_BG/internet.js","./bg_BG/internet.js":"./node_modules/casual/src/providers/bg_BG/internet.js","./bg_BG/person":"./node_modules/casual/src/providers/bg_BG/person.js","./bg_BG/person.js":"./node_modules/casual/src/providers/bg_BG/person.js","./bg_BG/text":"./node_modules/casual/src/providers/bg_BG/text.js","./bg_BG/text.js":"./node_modules/casual/src/providers/bg_BG/text.js","./color":"./node_modules/casual/src/providers/color.js","./color.js":"./node_modules/casual/src/providers/color.js","./da_DK/address":"./node_modules/casual/src/providers/da_DK/address.js","./da_DK/address.js":"./node_modules/casual/src/providers/da_DK/address.js","./da_DK/person":"./node_modules/casual/src/providers/da_DK/person.js","./da_DK/person.js":"./node_modules/casual/src/providers/da_DK/person.js","./da_DK/text":"./node_modules/casual/src/providers/da_DK/text.js","./da_DK/text.js":"./node_modules/casual/src/providers/da_DK/text.js","./date":"./node_modules/casual/src/providers/date.js","./date.js":"./node_modules/casual/src/providers/date.js","./de_DE/address":"./node_modules/casual/src/providers/de_DE/address.js","./de_DE/address.js":"./node_modules/casual/src/providers/de_DE/address.js","./de_DE/date":"./node_modules/casual/src/providers/de_DE/date.js","./de_DE/date.js":"./node_modules/casual/src/providers/de_DE/date.js","./de_DE/person":"./node_modules/casual/src/providers/de_DE/person.js","./de_DE/person.js":"./node_modules/casual/src/providers/de_DE/person.js","./de_DE/text":"./node_modules/casual/src/providers/de_DE/text.js","./de_DE/text.js":"./node_modules/casual/src/providers/de_DE/text.js","./en_CA/address":"./node_modules/casual/src/providers/en_CA/address.js","./en_CA/address.js":"./node_modules/casual/src/providers/en_CA/address.js","./en_US/address":"./node_modules/casual/src/providers/en_US/address.js","./en_US/address.js":"./node_modules/casual/src/providers/en_US/address.js","./fr_FR/address":"./node_modules/casual/src/providers/fr_FR/address.js","./fr_FR/address.js":"./node_modules/casual/src/providers/fr_FR/address.js","./fr_FR/person":"./node_modules/casual/src/providers/fr_FR/person.js","./fr_FR/person.js":"./node_modules/casual/src/providers/fr_FR/person.js","./id_ID/address":"./node_modules/casual/src/providers/id_ID/address.js","./id_ID/address.js":"./node_modules/casual/src/providers/id_ID/address.js","./internet":"./node_modules/casual/src/providers/internet.js","./internet.js":"./node_modules/casual/src/providers/internet.js","./it_CH/address":"./node_modules/casual/src/providers/it_CH/address.js","./it_CH/address.js":"./node_modules/casual/src/providers/it_CH/address.js","./it_CH/date":"./node_modules/casual/src/providers/it_CH/date.js","./it_CH/date.js":"./node_modules/casual/src/providers/it_CH/date.js","./it_CH/person":"./node_modules/casual/src/providers/it_CH/person.js","./it_CH/person.js":"./node_modules/casual/src/providers/it_CH/person.js","./it_IT/address":"./node_modules/casual/src/providers/it_IT/address.js","./it_IT/address.js":"./node_modules/casual/src/providers/it_IT/address.js","./it_IT/date":"./node_modules/casual/src/providers/it_IT/date.js","./it_IT/date.js":"./node_modules/casual/src/providers/it_IT/date.js","./it_IT/person":"./node_modules/casual/src/providers/it_IT/person.js","./it_IT/person.js":"./node_modules/casual/src/providers/it_IT/person.js","./ja_JP/address":"./node_modules/casual/src/providers/ja_JP/address.js","./ja_JP/address.js":"./node_modules/casual/src/providers/ja_JP/address.js","./ja_JP/date":"./node_modules/casual/src/providers/ja_JP/date.js","./ja_JP/date.js":"./node_modules/casual/src/providers/ja_JP/date.js","./ja_JP/internet":"./node_modules/casual/src/providers/ja_JP/internet.js","./ja_JP/internet.js":"./node_modules/casual/src/providers/ja_JP/internet.js","./ja_JP/person":"./node_modules/casual/src/providers/ja_JP/person.js","./ja_JP/person.js":"./node_modules/casual/src/providers/ja_JP/person.js","./misc":"./node_modules/casual/src/providers/misc.js","./misc.js":"./node_modules/casual/src/providers/misc.js","./nb_NO/address":"./node_modules/casual/src/providers/nb_NO/address.js","./nb_NO/address.js":"./node_modules/casual/src/providers/nb_NO/address.js","./nb_NO/color":"./node_modules/casual/src/providers/nb_NO/color.js","./nb_NO/color.js":"./node_modules/casual/src/providers/nb_NO/color.js","./nb_NO/date":"./node_modules/casual/src/providers/nb_NO/date.js","./nb_NO/date.js":"./node_modules/casual/src/providers/nb_NO/date.js","./nb_NO/person":"./node_modules/casual/src/providers/nb_NO/person.js","./nb_NO/person.js":"./node_modules/casual/src/providers/nb_NO/person.js","./nl_NL/address":"./node_modules/casual/src/providers/nl_NL/address.js","./nl_NL/address.js":"./node_modules/casual/src/providers/nl_NL/address.js","./nl_NL/person":"./node_modules/casual/src/providers/nl_NL/person.js","./nl_NL/person.js":"./node_modules/casual/src/providers/nl_NL/person.js","./number":"./node_modules/casual/src/providers/number.js","./number.js":"./node_modules/casual/src/providers/number.js","./payment":"./node_modules/casual/src/providers/payment.js","./payment.js":"./node_modules/casual/src/providers/payment.js","./person":"./node_modules/casual/src/providers/person.js","./person.js":"./node_modules/casual/src/providers/person.js","./pt_BR/address":"./node_modules/casual/src/providers/pt_BR/address.js","./pt_BR/address.js":"./node_modules/casual/src/providers/pt_BR/address.js","./pt_BR/color":"./node_modules/casual/src/providers/pt_BR/color.js","./pt_BR/color.js":"./node_modules/casual/src/providers/pt_BR/color.js","./pt_BR/person":"./node_modules/casual/src/providers/pt_BR/person.js","./pt_BR/person.js":"./node_modules/casual/src/providers/pt_BR/person.js","./ro_RO/address":"./node_modules/casual/src/providers/ro_RO/address.js","./ro_RO/address.js":"./node_modules/casual/src/providers/ro_RO/address.js","./ro_RO/date":"./node_modules/casual/src/providers/ro_RO/date.js","./ro_RO/date.js":"./node_modules/casual/src/providers/ro_RO/date.js","./ro_RO/person":"./node_modules/casual/src/providers/ro_RO/person.js","./ro_RO/person.js":"./node_modules/casual/src/providers/ro_RO/person.js","./ru_RU/address":"./node_modules/casual/src/providers/ru_RU/address.js","./ru_RU/address.js":"./node_modules/casual/src/providers/ru_RU/address.js","./ru_RU/color":"./node_modules/casual/src/providers/ru_RU/color.js","./ru_RU/color.js":"./node_modules/casual/src/providers/ru_RU/color.js","./ru_RU/internet":"./node_modules/casual/src/providers/ru_RU/internet.js","./ru_RU/internet.js":"./node_modules/casual/src/providers/ru_RU/internet.js","./ru_RU/person":"./node_modules/casual/src/providers/ru_RU/person.js","./ru_RU/person.js":"./node_modules/casual/src/providers/ru_RU/person.js","./ru_RU/text":"./node_modules/casual/src/providers/ru_RU/text.js","./ru_RU/text.js":"./node_modules/casual/src/providers/ru_RU/text.js","./sv_SE/address":"./node_modules/casual/src/providers/sv_SE/address.js","./sv_SE/address.js":"./node_modules/casual/src/providers/sv_SE/address.js","./sv_SE/person":"./node_modules/casual/src/providers/sv_SE/person.js","./sv_SE/person.js":"./node_modules/casual/src/providers/sv_SE/person.js","./sv_SE/text":"./node_modules/casual/src/providers/sv_SE/text.js","./sv_SE/text.js":"./node_modules/casual/src/providers/sv_SE/text.js","./text":"./node_modules/casual/src/providers/text.js","./text.js":"./node_modules/casual/src/providers/text.js","./uk_UA/address":"./node_modules/casual/src/providers/uk_UA/address.js","./uk_UA/address.js":"./node_modules/casual/src/providers/uk_UA/address.js","./uk_UA/color":"./node_modules/casual/src/providers/uk_UA/color.js","./uk_UA/color.js":"./node_modules/casual/src/providers/uk_UA/color.js","./uk_UA/text":"./node_modules/casual/src/providers/uk_UA/text.js","./uk_UA/text.js":"./node_modules/casual/src/providers/uk_UA/text.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./node_modules/casual/src/providers sync recursive ^\\.\\/.*$"},"./node_modules/casual/src sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/casual/src sync recursive",module.exports=webpackEmptyContext}}]);