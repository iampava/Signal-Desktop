(globalThis.webpackChunksignal_desktop=globalThis.webpackChunksignal_desktop||[]).push([[3423],{"./ts/components/Spinner.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$j:()=>Spinner,me:()=>SpinnerSvgSizes,sX:()=>SpinnerDirections});__webpack_require__("./node_modules/react/index.js");var classnames__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__),_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/getClassNamesFor.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SpinnerSvgSizes=["small","normal"],SpinnerDirections=["outgoing","incoming","on-background","on-primary-button","on-progress-dialog","on-avatar"];function Spinner(_ref){var ariaLabel=_ref.ariaLabel,direction=_ref.direction,moduleClassName=_ref.moduleClassName,role=_ref.role,size=_ref.size,svgSize=_ref.svgSize,getClassName=(0,_util_getClassNamesFor__WEBPACK_IMPORTED_MODULE_2__.h)("module-spinner",moduleClassName);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__container"),getClassName(`__container--${svgSize}`),getClassName(direction&&`__container--${direction}`),getClassName(direction&&`__container--${svgSize}-${direction}`)),role,"aria-label":ariaLabel,style:{height:size,width:size},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__circle"),getClassName(`__circle--${svgSize}`),getClassName(direction&&`__circle--${direction}`),getClassName(direction&&`__circle--${svgSize}-${direction}`))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{className:classnames__WEBPACK_IMPORTED_MODULE_1___default()(getClassName("__arc"),getClassName(`__arc--${svgSize}`),getClassName(direction&&`__arc--${direction}`),getClassName(direction&&`__arc--${svgSize}-${direction}`))})]})}Spinner.displayName="Spinner"},"./ts/components/TextAttachment.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AutowrapText:()=>AutowrapText,CharacterWrapBold:()=>CharacterWrapBold,Gradient:()=>Gradient,LinkPreview:()=>LinkPreview,LinkPreviewJustUrl:()=>LinkPreviewJustUrl,LinkPreviewJustUrlText:()=>LinkPreviewJustUrlText,LinkPreviewLongTitle:()=>LinkPreviewLongTitle,LinkPreviewReallyLongDomain:()=>LinkPreviewReallyLongDomain,LinkPreviewThumbnail:()=>LinkPreviewThumbnail,LinkPreviewWRJ:()=>LinkPreviewWRJ,MixOfNewlinesOverflowAutowrap:()=>MixOfNewlinesOverflowAutowrap,OverflowNewlineNumbers:()=>OverflowNewlineNumbers,RomeoJuliet:()=>RomeoJuliet,SolidBgTextBg:()=>SolidBgTextBg,TextBackgroundAndLinkPreview:()=>TextBackgroundAndLinkPreview,TextWithLineBreaksAutowrapSerifFont:()=>TextWithLineBreaksAutowrapSerifFont,TextWithLineBreaksCondensedFont:()=>TextWithLineBreaksCondensedFont,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var _locales_en_messages_json__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./_locales/en/messages.json"),_util_setupI18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ts/util/setupI18n.ts"),_TextAttachment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ts/components/TextAttachment.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/react/jsx-runtime.js"),i18n=(0,_util_setupI18n__WEBPACK_IMPORTED_MODULE_2__.E5)("en",_locales_en_messages_json__WEBPACK_IMPORTED_MODULE_1__),getDefaultProps=function(){return{i18n,textAttachment:{}}};const __WEBPACK_DEFAULT_EXPORT__={title:"Components/TextAttachment"};function SolidBgTextBg(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4286869806,text:"hello",textBackgroundColor:4293263387,textForegroundColor:4294967295,textStyle:1}}))}function Gradient(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:191,endColor:4282529679,startColor:4294260804},text:"hey",textBackgroundColor:0,textForegroundColor:4294704123,textStyle:1}}))}function TextWithLineBreaksCondensedFont(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:180,endColor:4278884698,startColor:4284861868},text:"Wow!\nThis is 2 lines!",textBackgroundColor:4294967295,textForegroundColor:4278249127,textStyle:5}}))}function TextWithLineBreaksAutowrapSerifFont(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4278249127,text:"Wrap?\nYes please, wrap this text automatically for me so that it fits nicely inside the story.",textBackgroundColor:0,textForegroundColor:4294967295,textStyle:3}}))}function AutowrapText(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:175,endColor:4294859832,startColor:4294950980},text:"This text should automatically wrap into multiple lines since it exceeds the bounds of the story",textBackgroundColor:4294967295,textForegroundColor:4278249037,textStyle:1}}))}function RomeoJuliet(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:180,endColor:4286632135,startColor:4278227945},text:"Two households, both alike in dignity, In fair Verona, where we lay our scene, From ancient grudge break to new mutiny, Where civil blood makes civil hands unclean. From forth the fatal loins of these two foes A pair of star-cross'd lovers take their life; Whose misadventured piteous overthrows Do with their death bury their parents' strife. The fearful passage of their death-mark'd love, And the continuance of their parents' rage, Which, but their children's end, nought could remove, Is now the two hours' traffic of our stage; The which if you with patient ears attend, What here shall miss, our toil shall strive to mend.",textBackgroundColor:0,textForegroundColor:4294704123,textStyle:4}}))}function OverflowNewlineNumbers(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:175,endColor:4294859832,startColor:4294950980},text:"1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16",textBackgroundColor:4294967295,textForegroundColor:4278249037,textStyle:1}}))}function CharacterWrapBold(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4278825851,text:"mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm",textBackgroundColor:0,textForegroundColor:4294704123,textStyle:2}}))}function MixOfNewlinesOverflowAutowrap(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,text:"A new line\nIs this a new line? Yes, indeed and I should be wrapped woooooooooooooooooooooooow this is working!\nCool.",textBackgroundColor:0,textForegroundColor:4278231014,textStyle:1}}))}function LinkPreview(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,preview:{url:"https://www.signal.org/workworkwork",title:"Signal >> Careers"}}}))}function LinkPreviewThumbnail(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{isThumbnail:!0,textAttachment:{color:4294951251,preview:{url:"https://www.signal.org/workworkwork",title:"Signal >> Careers"}}}))}function LinkPreviewLongTitle(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,preview:{title:"2021 Etihad Airways Abu Dhabi Grand Prix Race Summary - F1 RaceCast Dec 10 to Dec 12 - ESPN",url:"https://www.espn.com/f1/race/_/id/600001776"},text:"Spoiler alert!",textForegroundColor:4294704123}}))}function LinkPreviewJustUrl(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,preview:{url:"https://www.rolex.com/en-us/watches/day-date/m228236-0012.html"}}}))}function LinkPreviewJustUrlText(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,preview:{url:"https://www.rolex.com/en-us/watches/day-date/m228236-0012.html"},text:"Check this out!"}}))}function LinkPreviewReallyLongDomain(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{color:4294951251,preview:{url:"https://llanfairpwllgwyngyllgogerychwyrndrobwllllantysiliogogogoch.international/"}}}))}function LinkPreviewWRJ(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:180,endColor:4286632135,startColor:4278227945},text:"Two households, both alike in dignity, In fair Verona, where we lay our scene, From ancient grudge break to new mutiny, Where civil blood makes civil hands unclean. From forth the fatal loins of these two foes A pair of star-cross'd lovers take their life; Whose misadventured piteous overthrows Do with their death bury their parents' strife. The fearful passage of their death-mark'd love, And the continuance of their parents' rage, Which, but their children's end, nought could remove, Is now the two hours' traffic of our stage; The which if you with patient ears attend, What here shall miss, our toil shall strive to mend.",textBackgroundColor:0,textForegroundColor:4294704123,textStyle:4,preview:{title:"Romeo and Juliet: Entire Play",url:"http://shakespeare.mit.edu/romeo_juliet/full.html"}}}))}function TextBackgroundAndLinkPreview(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_TextAttachment__WEBPACK_IMPORTED_MODULE_3__.S,Object.assign({},getDefaultProps(),{textAttachment:{gradient:{angle:175,endColor:4294859832,startColor:4294950980},text:"Check out this neat video I found",textBackgroundColor:4294967295,textForegroundColor:4278249037,textStyle:1,preview:{title:"A really long title so that the we can test the margins",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}}}))}SolidBgTextBg.displayName="SolidBgTextBg",SolidBgTextBg.story={name:"Solid bg + text bg"},Gradient.displayName="Gradient",TextWithLineBreaksCondensedFont.displayName="TextWithLineBreaksCondensedFont",TextWithLineBreaksCondensedFont.story={name:"Text with line breaks (condensed font)"},TextWithLineBreaksAutowrapSerifFont.displayName="TextWithLineBreaksAutowrapSerifFont",TextWithLineBreaksAutowrapSerifFont.story={name:"Text with line breaks + Autowrap (serif font)"},AutowrapText.displayName="AutowrapText",AutowrapText.story={name:"Autowrap text"},RomeoJuliet.displayName="RomeoJuliet",RomeoJuliet.story={name:"Romeo & Juliet"},OverflowNewlineNumbers.displayName="OverflowNewlineNumbers",OverflowNewlineNumbers.story={name:"Overflow newline numbers"},CharacterWrapBold.displayName="CharacterWrapBold",CharacterWrapBold.story={name:"Character wrap (bold)"},MixOfNewlinesOverflowAutowrap.displayName="MixOfNewlinesOverflowAutowrap",MixOfNewlinesOverflowAutowrap.story={name:"Mix of newlines, overflow, autowrap"},LinkPreview.displayName="LinkPreview",LinkPreview.story={name:"Link preview"},LinkPreviewThumbnail.displayName="LinkPreviewThumbnail",LinkPreviewThumbnail.story={name:"Link preview (thumbnail)"},LinkPreviewLongTitle.displayName="LinkPreviewLongTitle",LinkPreviewLongTitle.story={name:"Link preview (long title)"},LinkPreviewJustUrl.displayName="LinkPreviewJustUrl",LinkPreviewJustUrl.story={name:"Link preview (just url)"},LinkPreviewJustUrlText.displayName="LinkPreviewJustUrlText",LinkPreviewJustUrlText.story={name:"Link preview (just url + text)"},LinkPreviewReallyLongDomain.displayName="LinkPreviewReallyLongDomain",LinkPreviewReallyLongDomain.story={name:"Link preview (really long domain)"},LinkPreviewWRJ.displayName="LinkPreviewWRJ",LinkPreviewWRJ.story={name:"Link Preview w/ R&J"},TextBackgroundAndLinkPreview.displayName="TextBackgroundAndLinkPreview";var __namedExportsOrder=["SolidBgTextBg","Gradient","TextWithLineBreaksCondensedFont","TextWithLineBreaksAutowrapSerifFont","AutowrapText","RomeoJuliet","OverflowNewlineNumbers","CharacterWrapBold","MixOfNewlinesOverflowAutowrap","LinkPreview","LinkPreviewThumbnail","LinkPreviewLongTitle","LinkPreviewJustUrl","LinkPreviewJustUrlText","LinkPreviewReallyLongDomain","LinkPreviewWRJ","TextBackgroundAndLinkPreview"]},"./ts/components/conversation/AddNewLines.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>AddNewLines});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),defaultRenderNonNewLine=function(_ref){return _ref.text};function AddNewLines(_ref2){var text=_ref2.text,_ref2$renderNonNewLin=_ref2.renderNonNewLine,renderNonNewLine=void 0===_ref2$renderNonNewLin?defaultRenderNonNewLine:_ref2$renderNonNewLin,results=[],FIND_NEWLINES=/\n/g,match=FIND_NEWLINES.exec(text),last=0,count=1;if(!match)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:renderNonNewLine({text,key:0})});for(;match;){if(last<match.index){var textWithNoNewline=text.slice(last,match.index);count+=1,results.push(renderNonNewLine({text:textWithNoNewline,key:count}))}count+=1,results.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{},count)),last=FIND_NEWLINES.lastIndex,match=FIND_NEWLINES.exec(text)}return last<text.length&&(count+=1,results.push(renderNonNewLine({text:text.slice(last),key:count}))),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:results})}},"./ts/hooks/useRefMerger.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>useRefMerger});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_util_refMerger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ts/util/refMerger.ts"),useRefMerger=function(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(_util_refMerger__WEBPACK_IMPORTED_MODULE_1__.d,[])}},"./ts/types/LinkPreview.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Df:()=>isStickerPack,Hz:()=>isGroupLink,ge:()=>getDomain,go:()=>shouldPreviewHref,hH:()=>LinkPreviewSourceType,kz:()=>isLinkSneaky,rq:()=>findLinks,vl:()=>shouldLinkifyMessage});var LinkPreviewSourceType,lodash_range__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/range.js"),lodash_range__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_range__WEBPACK_IMPORTED_MODULE_0__),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/lodash/isEmpty.js"),lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1__),lodash_compact__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/compact.js"),lodash_compact__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash_compact__WEBPACK_IMPORTED_MODULE_2__),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/lodash/isNumber.js"),lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash_isNumber__WEBPACK_IMPORTED_MODULE_3__),url__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/url/url.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/linkify-it/index.js"),linkify_it__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(linkify_it__WEBPACK_IMPORTED_MODULE_5__),_util_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ts/util/url.ts"),_util_emoji__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ts/util/emoji.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}!function(LinkPreviewSourceType){LinkPreviewSourceType[LinkPreviewSourceType.Composer=0]="Composer",LinkPreviewSourceType[LinkPreviewSourceType.ForwardMessageModal=1]="ForwardMessageModal",LinkPreviewSourceType[LinkPreviewSourceType.StoryCreator=2]="StoryCreator"}(LinkPreviewSourceType||(LinkPreviewSourceType={}));var linkify=linkify_it__WEBPACK_IMPORTED_MODULE_5___default()();function shouldPreviewHref(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);return Boolean(url&&"https:"===url.protocol&&!function isDomainExcluded(url){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(EXCLUDED_DOMAINS);try{for(_iterator.s();!(_step=_iterator.n()).done;){var excludedDomain=_step.value;if(url.hostname.endsWith(`.${excludedDomain}`)||url.hostname===excludedDomain)return!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1}(url)&&!isLinkSneaky(href))}var EXCLUDED_DOMAINS=["debuglogs.org","example","example.com","example.net","example.org","invalid","localhost","onion","test"];var DIRECTIONAL_OVERRIDES=/[\u202c\u202d\u202e]/,UNICODE_DRAWING=/[\u2500-\u25FF]/;function shouldLinkifyMessage(message){return!message||!DIRECTIONAL_OVERRIDES.test(message)&&!UNICODE_DRAWING.test(message)}function isStickerPack(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.art/addstickers/")}function isGroupLink(){var link=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return link.startsWith("https://signal.group/")}function findLinks(text,caretLocation){if(!shouldLinkifyMessage(text))return[];var haveCaretLocation=lodash_isNumber__WEBPACK_IMPORTED_MODULE_3___default()(caretLocation),textLength=text?text.length:0,matches=linkify.match(text?(0,_util_emoji__WEBPACK_IMPORTED_MODULE_6__.s)(text):"")||[];return lodash_compact__WEBPACK_IMPORTED_MODULE_2___default()(matches.map((function(match){return haveCaretLocation?void 0===caretLocation?null:match.lastIndex===textLength&&caretLocation===textLength||match.index>caretLocation||match.lastIndex<caretLocation?match.text:null:match.text})))}function getDomain(href){var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url||!url.hostname)throw new Error("getDomain: Unable to extract hostname from href");return url.hostname}var VALID_URI_CHARACTERS=new Set(["%",":","/","?","#","[","]","@","!","$","&","'","(",")","*","+",",",";","="].concat(_toConsumableArray(String.fromCharCode.apply(String,_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(65,91)).concat(_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(97,123))))),_toConsumableArray(lodash_range__WEBPACK_IMPORTED_MODULE_0___default()(10).map(String)),["-",".","_","~"])),ASCII_PATTERN=/[\u0020-\u007F]/g;function isLinkSneaky(href){if(href.length>4096)return!0;var url=(0,_util_url__WEBPACK_IMPORTED_MODULE_7__.FS)(href);if(!url)return!0;if(url.username||url.password)return!0;if(!url.hostname)return!0;if(url.hostname.length>2048)return!0;if(url.hostname.includes("%"))return!0;var labels=url.hostname.split(".");if(labels.length<2||labels.some(lodash_isEmpty__WEBPACK_IMPORTED_MODULE_1___default()))return!0;var withoutPeriods=(url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode?url__WEBPACK_IMPORTED_MODULE_4__.domainToUnicode(url.hostname):url.hostname).replace(/\./g,""),hasASCII=ASCII_PATTERN.test(withoutPeriods),withoutASCII=withoutPeriods.replace(ASCII_PATTERN,"");if(hasASCII&&withoutASCII.length>0)return!0;var startOfPathAndHash=href.indexOf("/",url.protocol.length+4);return _toConsumableArray(-1===startOfPathAndHash?"":href.substr(startOfPathAndHash)).some((function(character){return!VALID_URI_CHARACTERS.has(character)}))}},"./ts/util/getClassNamesFor.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>getClassNamesFor});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__);function getClassNamesFor(){for(var _len=arguments.length,modules=new Array(_len),_key=0;_key<_len;_key++)modules[_key]=arguments[_key];return function(modifier){if(void 0===modifier)return"";var cx=modules.flatMap((function(m){return m?m.split(" "):void 0})).map((function(parentModule){return parentModule?`${parentModule}${modifier}`:void 0}));return classnames__WEBPACK_IMPORTED_MODULE_0___default()(cx)}}},"./ts/util/refMerger.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>refMerger,d:()=>createRefMerger});var memoizee__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/memoizee/index.js"),memoizee__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(memoizee__WEBPACK_IMPORTED_MODULE_0__);function refMerger(){for(var _len=arguments.length,refs=new Array(_len),_key=0;_key<_len;_key++)refs[_key]=arguments[_key];return function(el){refs.forEach((function(ref){"function"==typeof ref?ref(el):ref&&(ref.current=el)}))}}function createRefMerger(){return memoizee__WEBPACK_IMPORTED_MODULE_0___default()(refMerger,{length:!1,max:1})}},"./ts/util/url.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function maybeParseUrl(value){if("string"==typeof value)try{return new URL(value)}catch(err){}}__webpack_require__.d(__webpack_exports__,{FS:()=>maybeParseUrl})},"./node_modules/lodash/_unescapeHtmlChar.js":(module,__unused_webpack_exports,__webpack_require__)=>{var unescapeHtmlChar=__webpack_require__("./node_modules/lodash/_basePropertyOf.js")({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});module.exports=unescapeHtmlChar},"./node_modules/lodash/unescape.js":(module,__unused_webpack_exports,__webpack_require__)=>{var toString=__webpack_require__("./node_modules/lodash/toString.js"),unescapeHtmlChar=__webpack_require__("./node_modules/lodash/_unescapeHtmlChar.js"),reEscapedHtml=/&(?:amp|lt|gt|quot|#39);/g,reHasEscapedHtml=RegExp(reEscapedHtml.source);module.exports=function unescape(string){return(string=toString(string))&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}},"./node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}__webpack_require__.d(__webpack_exports__,{Z:()=>react_textarea_autosize_browser_esm});var react=__webpack_require__("./node_modules/react/index.js");const use_isomorphic_layout_effect_browser_esm=react.useLayoutEffect;var updateRef=function updateRef(ref,value){"function"!=typeof ref?ref.current=value:ref(value)};const use_composed_ref_esm=function useComposedRef(libRef,userRef){var prevUserRef=(0,react.useRef)();return(0,react.useCallback)((function(instance){libRef.current=instance,prevUserRef.current&&updateRef(prevUserRef.current,null),prevUserRef.current=userRef,userRef&&updateRef(userRef,instance)}),[userRef])};var HIDDEN_TEXTAREA_STYLE={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles=function forceHiddenStyles(node){Object.keys(HIDDEN_TEXTAREA_STYLE).forEach((function(key){node.style.setProperty(key,HIDDEN_TEXTAREA_STYLE[key],"important")}))},hiddenTextarea=null;var noop=function noop(){},SIZING_STYLE=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],isIE=!!document.documentElement.currentStyle,useWindowResizeListener=function useWindowResizeListener(listener){var latestListener=function useLatest(value){var ref=react.useRef(value);return use_isomorphic_layout_effect_browser_esm((function(){ref.current=value})),ref}(listener);(0,react.useLayoutEffect)((function(){var handler=function handler(event){latestListener.current(event)};return window.addEventListener("resize",handler),function(){window.removeEventListener("resize",handler)}}),[])},TextareaAutosize=function TextareaAutosize(_ref,userRef){var cacheMeasurements=_ref.cacheMeasurements,maxRows=_ref.maxRows,minRows=_ref.minRows,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?noop:_ref$onChange,_ref$onHeightChange=_ref.onHeightChange,onHeightChange=void 0===_ref$onHeightChange?noop:_ref$onHeightChange,props=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(_ref,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]);var isControlled=void 0!==props.value,libRef=(0,react.useRef)(null),ref=use_composed_ref_esm(libRef,userRef),heightRef=(0,react.useRef)(0),measurementsCacheRef=(0,react.useRef)(),resizeTextarea=function resizeTextarea(){var node=libRef.current,nodeSizingData=cacheMeasurements&&measurementsCacheRef.current?measurementsCacheRef.current:function getSizingData(node){var style=window.getComputedStyle(node);if(null===style)return null;var sizingStyle=function pick(props,obj){return props.reduce((function(acc,prop){return acc[prop]=obj[prop],acc}),{})}(SIZING_STYLE,style),boxSizing=sizingStyle.boxSizing;return""===boxSizing?null:(isIE&&"border-box"===boxSizing&&(sizingStyle.width=parseFloat(sizingStyle.width)+parseFloat(sizingStyle.borderRightWidth)+parseFloat(sizingStyle.borderLeftWidth)+parseFloat(sizingStyle.paddingRight)+parseFloat(sizingStyle.paddingLeft)+"px"),{sizingStyle,paddingSize:parseFloat(sizingStyle.paddingBottom)+parseFloat(sizingStyle.paddingTop),borderSize:parseFloat(sizingStyle.borderBottomWidth)+parseFloat(sizingStyle.borderTopWidth)})}(node);if(nodeSizingData){measurementsCacheRef.current=nodeSizingData;var _calculateNodeHeight=function calculateNodeHeight(sizingData,value,minRows,maxRows){void 0===minRows&&(minRows=1),void 0===maxRows&&(maxRows=1/0),hiddenTextarea||((hiddenTextarea=document.createElement("textarea")).setAttribute("tabindex","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),forceHiddenStyles(hiddenTextarea)),null===hiddenTextarea.parentNode&&document.body.appendChild(hiddenTextarea);var paddingSize=sizingData.paddingSize,borderSize=sizingData.borderSize,sizingStyle=sizingData.sizingStyle,boxSizing=sizingStyle.boxSizing;Object.keys(sizingStyle).forEach((function(_key){var key=_key;hiddenTextarea.style[key]=sizingStyle[key]})),forceHiddenStyles(hiddenTextarea),hiddenTextarea.value=value;var height=function getHeight(node,sizingData){var height=node.scrollHeight;return"border-box"===sizingData.sizingStyle.boxSizing?height+sizingData.borderSize:height-sizingData.paddingSize}(hiddenTextarea,sizingData);hiddenTextarea.value="x";var rowHeight=hiddenTextarea.scrollHeight-paddingSize,minHeight=rowHeight*minRows;"border-box"===boxSizing&&(minHeight=minHeight+paddingSize+borderSize),height=Math.max(minHeight,height);var maxHeight=rowHeight*maxRows;return"border-box"===boxSizing&&(maxHeight=maxHeight+paddingSize+borderSize),[height=Math.min(maxHeight,height),rowHeight]}(nodeSizingData,node.value||node.placeholder||"x",minRows,maxRows),height=_calculateNodeHeight[0],rowHeight=_calculateNodeHeight[1];heightRef.current!==height&&(heightRef.current=height,node.style.setProperty("height",height+"px","important"),onHeightChange(height,{rowHeight}))}};return(0,react.useLayoutEffect)(resizeTextarea),useWindowResizeListener(resizeTextarea),(0,react.createElement)("textarea",_extends({},props,{onChange:function handleChange(event){isControlled||resizeTextarea(),onChange(event)},ref}))};const react_textarea_autosize_browser_esm=(0,react.forwardRef)(TextareaAutosize)}}]);